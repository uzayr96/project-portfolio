[
  {
    "objectID": "Mask Detection.html",
    "href": "Mask Detection.html",
    "title": "Introduction",
    "section": "",
    "text": "With the spread of covid-19, people are advised to wear mask in order to protect themselves from spread of the virus. Governments have made mandatory to wear the mask. Now the question is how government can ensure that all people wear mask? With the help of artificial intelligence, governments are able to track people. In this project, with the help of Adrian Rosebrock, PhD guidance, I was able to make mask detector based on deep learning. I have taken pictures from pyimage tutorial and google."
  },
  {
    "objectID": "Mask Detection.html#viewing-few-images",
    "href": "Mask Detection.html#viewing-few-images",
    "title": "Introduction",
    "section": "Viewing few images",
    "text": "Viewing few images\n\nn = random.sample(range(1, 5600), 30)\nplt.figure(figsize=(15, 15))\nfor i,source in enumerate(n):\n    plt.subplot(5 , 6, i + 1)\n    plt.imshow(images[source])\n    plt.title(f\"Target {target[source]}\")"
  },
  {
    "objectID": "Mask Detection.html#preprocessing",
    "href": "Mask Detection.html#preprocessing",
    "title": "Introduction",
    "section": "Preprocessing",
    "text": "Preprocessing\n\nX = np.array(data)\ny_array = np.array(target)\ny = to_categorical(y_array)\n\n\nprint(X.shape)\nprint(y_array.shape)\n\n(5601, 224, 224, 3)\n(5601,)\n\n\n\n(X_train, X_val_test, y_train, y_val_test) = train_test_split(X,\n                                                              y,\n                                                              test_size = 0.40,\n                                                              random_state = 999,\n                                                              stratify = y,\n                                                              shuffle = True)\n(X_val, X_test, y_val, y_test) = train_test_split(X_val_test,\n                                                  y_val_test,\n                                                  test_size = 0.50,\n                                                  random_state = 1234,\n                                                  stratify = y_val_test,\n                                                  shuffle = True)\nprint(X_train.shape)\nprint(X_test.shape)\nprint(X_val.shape)\nprint(y_train.shape)\nprint(y_test.shape)\nprint(y_val.shape)\n\n(3360, 224, 224, 3)\n(1121, 224, 224, 3)\n(1120, 224, 224, 3)\n(3360, 2)\n(1121, 2)\n(1120, 2)"
  },
  {
    "objectID": "Mask Detection.html#image-data-augmentation",
    "href": "Mask Detection.html#image-data-augmentation",
    "title": "Introduction",
    "section": "Image Data Augmentation",
    "text": "Image Data Augmentation\nI will use data augmentation to increase the size of the dataset by using the same image but with difference angle and zoom so that our model generalizes well.\n\naug = ImageDataGenerator(rotation_range=20,\n                         zoom_range=0.15,\n                         width_shift_range=0.2,\n                         height_shift_range=0.2,\n                         shear_range=0.15,\n                         horizontal_flip=True)\naug.fit(X_train)"
  },
  {
    "objectID": "Mask Detection.html#model-evaluation",
    "href": "Mask Detection.html#model-evaluation",
    "title": "Introduction",
    "section": "Model Evaluation",
    "text": "Model Evaluation\n\nplt.figure(figsize = (15,6))\nplt.style.use('classic')\nplt.plot(np.arange(0, epochs), history.history['loss'], label = 'Training_Loss')\nplt.plot(np.arange(0, epochs), history.history['val_loss'], label = 'val_Loss')\nplt.plot(np.arange(0, epochs), history.history['accuracy'], label = 'train_accuracy')\nplt.plot(np.arange(0, epochs), history.history['val_accuracy'], label = 'val_accuracy')\nplt.title('ModelPerformance', fontsize = 9)\nplt.xlabel('Number of epochs', fontsize = 8)\nplt.ylabel('Loss/Acc', fontsize = 8)\nplt.legend(loc = 'center')\nplt.show()\n\n\n\n\n\n\n\n\nLooking at the graph, we can see our model overfitting after epoch number 63. With the help of callback, I already have best performing model saved in my working directory, so I will use the model with 63 epochs.\n\nscore_val = model.evaluate(X_val, y_val, verbose = 0)\nscore_train = model.evaluate(X_train, y_train, verbose = 0)\nscore_test = model.evaluate(X_test, y_test, verbose = 0)\n\n\nprint('Accuracy of Validation : {} %'.format(round(score_val[1] * 100), 2))\nprint('Accuracy of train : {} %'.format(round(score_train[1] * 100), 2))\nprint('Accuracy of test {} %'.format(round(score_test[1] * 100), 2))\nprint('Loss of Validation : {}'.format(score_val[0]))\nprint('Loss of train : {}'.format(score_train[0]))\nprint('Loss of test {} '.format(score_test[0]))\n\nAccuracy of Validation : 97 %\nAccuracy of train : 99 %\nAccuracy of test 97 %\nLoss of Validation : 0.09353941864267523\nLoss of train : 0.021156626015103288\nLoss of test 0.12470129030249036 \n\n\nScore shows a sign of overfitting, but with the help of callback, we have the best performing model saved in our directory. We will use that model in our live mask detection.\n\nbestmodel = load_model('model-063.model/')\n\n\nscore_val_best = bestmodel.evaluate(X_val, y_val, verbose = 0)\nscore_train_best = bestmodel.evaluate(X_train, y_train, verbose = 0)\nscore_test_best = bestmodel.evaluate(X_test, y_test, verbose = 0)\n\n\nprint('Best model Accuracy of Validation : {} %'.format(round(score_val_best[1] * 100), 2))\nprint('Best model Accuracy of train : {} %'.format(round(score_train_best[1] * 100), 2))\nprint('Best model Accuracy of test {} %'.format(round(score_test_best[1] * 100), 2))\nprint('Best model Loss of Validation : {}'.format(score_val_best[0]))\nprint('Best model Loss of train : {}'.format(score_train_best[0]))\nprint('Best model Loss of test {} '.format(score_test_best[0]))\n\nBest model Accuracy of Validation : 98 %\nBest model Accuracy of train : 99 %\nBest model Accuracy of test 97 %\nBest model Loss of Validation : 0.06396120258473924\nBest model Loss of train : 0.03232613244049606\nBest model Loss of test 0.12173265422643291 \n\n\nWe can clearly see that the results of model with 63 epochs is better than the model with 100 epochs."
  },
  {
    "objectID": "Mask Detection.html#testing",
    "href": "Mask Detection.html#testing",
    "title": "Introduction",
    "section": "Testing",
    "text": "Testing\n\nmodel_file = 'res10_300x300_ssd_iter_140000.caffemodel'\nconfig_file = 'deploy.prototxt.txt'\n\n\nnet = cv2.dnn.readNetFromCaffe(config_file, model_file)\n\n\npath = 'Test'\ntest_image_path = os.listdir(path)\nprint(\"[INFO] Loading Image........\")\nfor img in test_image_path:\n    image_path = os.path.join(path, img)\n    image = cv2.imread(image_path)\n    image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)\n    original = image.copy()\n    h, w = image.shape[:2]\n    blob = cv2.dnn.blobFromImage(cv2.resize(image, (300, 300)), 1.0,\n    (300, 300), (104.0, 117.0, 123.0))\n    net.setInput(blob)\n    faces = net.forward()\n\n    for i in range(faces.shape[2]):\n            confidence = faces[0, 0, i, 2]\n            if confidence &gt; 0.5:\n                box = faces[0, 0, i, 3:7] * np.array([w, h, w, h])\n                (startX, startY, endX, endY) = box.astype(\"int\")\n                (startX, startY) = (max(0, startX), max(0, startY))\n                (endX, endY) = (min(w - 1, endX), min(h - 1, endY))\n                print('[INFO] Extracting Face Location')\n                face = image[startY:endY, startX:endX]\n                face = cv2.resize(face, (224, 224))\n                face = img_to_array(face)\n                face = preprocess_input(face)\n                face = np.expand_dims(face, axis=0)\n                print('[INFO] Predicting........')\n            \n                mask, nomask = bestmodel.predict(face)[0]\n                prediction = bestmodel.predict(face)\n            \n                result = np.argmax(prediction, axis = 1)[0]\n                label = \"Mask\" if result == 0 else \"No Mask\"\n                color = (0, 255, 0) if label == \"Mask\" else (255, 0, 0)\n            \n                cv2.putText(image, label, (startX, startY - 10),cv2.FONT_HERSHEY_SIMPLEX, 0.45, color, 2)\n                cv2.rectangle(image, (startX, startY), (endX, endY), color, 2)\n          \n    plt.figure(figsize=(6, 6))            \n    plt.imshow(image)\n    plt.title(\"Image 1\")\n    plt.show()\n\n[INFO] Loading Image........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n\n\n\n\n\n\n\n\n\n[INFO] Extracting Face Location\n[INFO] Predicting........\n\n\n\n\n\n\n\n\n\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n\n\n\n\n\n\n\n\n\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n\n\n\n\n\n\n\n\n\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n\n\n\n\n\n\n\n\n\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n[INFO] Extracting Face Location\n[INFO] Predicting........\n\n\n\n\n\n\n\n\n\nLooking at the pictures above, we can say that our model performed well overall. In this first image, dnn caffe model failed to detect face location so our model was unable to predict. In live environment, model sometimes make wrong predictions when the brightness on the face is extremely high. Improvements can be made by including high brightness images to the training. Thank you for checking out my kernel"
  },
  {
    "objectID": "Restaurant Revenue Prediction.html",
    "href": "Restaurant Revenue Prediction.html",
    "title": "Introduction",
    "section": "",
    "text": "This project is about predicting restaurant revenues, TFI hosted the competition on Kaggle and the prize money was $30,000. TFI is the company behind world’s most well-known brands like Burger King, Popeyes etc. Restaurant business usually requires a large initial investment, in order to find better investment opportunities, investors would be able to make smart decisions on where to invest their capital. The competition is about creating a robust machine learning model that can predict the revenue of the restaurant based on features like City, Open Date, Demographics of the location, real estate and schools. The dataset is available on this link.\nimport pandas as pd\nimport re\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport datetime\nfrom sklearn.preprocessing import LabelEncoder, MinMaxScaler\nimport warnings\nwarnings.filterwarnings(action='ignore')\npd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', None)\ntrain = pd.read_csv('train.csv')\ntest = pd.read_csv('test.csv')\n\nprint(\"There are {} columns and {} rows in train dataset\".format(train.shape[1], train.shape[0]))\nprint(\"There are {} columns and {} rows in test dataset\".format(test.shape[1], test.shape[0]))\n\nThere are 43 columns and 137 rows in train dataset\nThere are 42 columns and 100000 rows in test dataset\nprint(\"We have a total of {} missing values in train dataset\".format(train.isnull().sum().sum()))\nprint(\"We have a total of {} missing values in test dataset\".format(test.isnull().sum().sum()))\n\nWe have a total of 0 missing values in train dataset\nWe have a total of 0 missing values in test dataset\ntrain.head()\n\n\n\n\n\n\n\n\nId\nOpen Date\nCity\nCity Group\nType\nP1\nP2\nP3\nP4\nP5\nP6\nP7\nP8\nP9\nP10\nP11\nP12\nP13\nP14\nP15\nP16\nP17\nP18\nP19\nP20\nP21\nP22\nP23\nP24\nP25\nP26\nP27\nP28\nP29\nP30\nP31\nP32\nP33\nP34\nP35\nP36\nP37\nrevenue\n\n\n\n\n0\n0\n07/17/1999\nİstanbul\nBig Cities\nIL\n4\n5.0\n4.0\n4.0\n2\n2\n5\n4\n5\n5\n3\n5\n5.0\n1\n2\n2\n2\n4\n5\n4\n1\n3\n3\n1\n1\n1.0\n4.0\n2.0\n3.0\n5\n3\n4\n5\n5\n4\n3\n4\n5653753.0\n\n\n1\n1\n02/14/2008\nAnkara\nBig Cities\nFC\n4\n5.0\n4.0\n4.0\n1\n2\n5\n5\n5\n5\n1\n5\n5.0\n0\n0\n0\n0\n0\n3\n2\n1\n3\n2\n0\n0\n0.0\n0.0\n3.0\n3.0\n0\n0\n0\n0\n0\n0\n0\n0\n6923131.0\n\n\n2\n2\n03/09/2013\nDiyarbakır\nOther\nIL\n2\n4.0\n2.0\n5.0\n2\n3\n5\n5\n5\n5\n2\n5\n5.0\n0\n0\n0\n0\n0\n1\n1\n1\n1\n1\n0\n0\n0.0\n0.0\n1.0\n3.0\n0\n0\n0\n0\n0\n0\n0\n0\n2055379.0\n\n\n3\n3\n02/02/2012\nTokat\nOther\nIL\n6\n4.5\n6.0\n6.0\n4\n4\n10\n8\n10\n10\n8\n10\n7.5\n6\n4\n9\n3\n12\n20\n12\n6\n1\n10\n2\n2\n2.5\n2.5\n2.5\n7.5\n25\n12\n10\n6\n18\n12\n12\n6\n2675511.0\n\n\n4\n4\n05/09/2009\nGaziantep\nOther\nIL\n3\n4.0\n3.0\n4.0\n2\n2\n5\n5\n5\n5\n2\n5\n5.0\n2\n1\n2\n1\n4\n2\n2\n1\n2\n1\n2\n3\n3.0\n5.0\n1.0\n3.0\n5\n1\n3\n2\n3\n4\n3\n3\n4316715.0\nprint(train['Type'].value_counts())\nprint(test['Type'].value_counts())\n\nFC    76\nIL    60\nDT     1\nName: Type, dtype: int64\nFC    57019\nIL    40447\nDT     2244\nMB      290\nName: Type, dtype: int64\nAs we can see from the above output, Type variable in the trainset have just 1 DT category and 0 MB category. ML models won’t be able to predict on MB categories. So I will replace MB with DT."
  },
  {
    "objectID": "Restaurant Revenue Prediction.html#converting-open-date-to-date-format-and-extracting-month-year-day-and-day-of-the-week",
    "href": "Restaurant Revenue Prediction.html#converting-open-date-to-date-format-and-extracting-month-year-day-and-day-of-the-week",
    "title": "Introduction",
    "section": "Converting Open Date to Date Format and Extracting Month, Year, Day and Day of the week",
    "text": "Converting Open Date to Date Format and Extracting Month, Year, Day and Day of the week\n\n## Remove Outlier\ntrain = train[train['revenue'] &lt; 15000000]\ny = train['revenue']\nn_train = train.shape[0]\n\n## Drop revenue\ntrain.drop('revenue', axis=1, inplace=True)\n\n## Change MB to DT\ntest['Type'] = test['Type'].replace('MB', 'DT')\n\n## Get Date Attributes\ndata = pd.concat([train, test], axis=0)\ndata['Date'] = pd.to_datetime(data['Open Date'], format='%m/%d/%Y')\ndata['Month'] = data['Date'].dt.month.astype(str)\ndata['Day'] = data['Date'].dt.day\ndata['Year'] = data['Date'].dt.year.astype(str)\ndata['Weekday'] = data['Date'].dt.day_name()\nprint(\"There are {} columns and {} rows in the dataset after getting date attributes\".format(data.shape[1],\n                                                                                               data.shape[0]))\n\nThere are 47 columns and 100135 rows in the dataset after getting date attributes\n\n\n\nplt.figure(figsize=(15,15))\nsns.heatmap(data.corr(), vmin = -1, vmax = 1, annot=True)\nplt.show()\n\n\n\n\n\n\n\n\n\nskew = round(y.skew(), 2)\nplt.title('Distribution of Revenue')\nax = sns.distplot(y)\nax.text(x=0.6, y=0.91, transform=ax.transAxes, s=\"Skewness: %f\" % skew)\nplt.show()\n\n\n\n\n\n\n\n\n\ndata.head()\n\n\n\n\n\n\n\n\nId\nOpen Date\nCity\nCity Group\nType\nP1\nP2\nP3\nP4\nP5\nP6\nP7\nP8\nP9\nP10\nP11\nP12\nP13\nP14\nP15\nP16\nP17\nP18\nP19\nP20\nP21\nP22\nP23\nP24\nP25\nP26\nP27\nP28\nP29\nP30\nP31\nP32\nP33\nP34\nP35\nP36\nP37\nDate\nMonth\nDay\nYear\nWeekday\n\n\n\n\n0\n0\n07/17/1999\nİstanbul\nBig Cities\nIL\n4\n5.0\n4.0\n4.0\n2\n2\n5\n4\n5\n5\n3\n5\n5.0\n1\n2\n2\n2\n4\n5\n4\n1\n3\n3\n1\n1\n1.0\n4.0\n2.0\n3.0\n5\n3\n4\n5\n5\n4\n3\n4\n1999-07-17\n7\n17\n1999\nSaturday\n\n\n1\n1\n02/14/2008\nAnkara\nBig Cities\nFC\n4\n5.0\n4.0\n4.0\n1\n2\n5\n5\n5\n5\n1\n5\n5.0\n0\n0\n0\n0\n0\n3\n2\n1\n3\n2\n0\n0\n0.0\n0.0\n3.0\n3.0\n0\n0\n0\n0\n0\n0\n0\n0\n2008-02-14\n2\n14\n2008\nThursday\n\n\n2\n2\n03/09/2013\nDiyarbakır\nOther\nIL\n2\n4.0\n2.0\n5.0\n2\n3\n5\n5\n5\n5\n2\n5\n5.0\n0\n0\n0\n0\n0\n1\n1\n1\n1\n1\n0\n0\n0.0\n0.0\n1.0\n3.0\n0\n0\n0\n0\n0\n0\n0\n0\n2013-03-09\n3\n9\n2013\nSaturday\n\n\n3\n3\n02/02/2012\nTokat\nOther\nIL\n6\n4.5\n6.0\n6.0\n4\n4\n10\n8\n10\n10\n8\n10\n7.5\n6\n4\n9\n3\n12\n20\n12\n6\n1\n10\n2\n2\n2.5\n2.5\n2.5\n7.5\n25\n12\n10\n6\n18\n12\n12\n6\n2012-02-02\n2\n2\n2012\nThursday\n\n\n4\n4\n05/09/2009\nGaziantep\nOther\nIL\n3\n4.0\n3.0\n4.0\n2\n2\n5\n5\n5\n5\n2\n5\n5.0\n2\n1\n2\n1\n4\n2\n2\n1\n2\n1\n2\n3\n3.0\n5.0\n1.0\n3.0\n5\n1\n3\n2\n3\n4\n3\n3\n2009-05-09\n5\n9\n2009\nSaturday\n\n\n\n\n\n\n\n\n# cols = ['Type', 'City Group', 'Weekday', 'City']\n# for i in cols:\n#     lb = LabelEncoder()\n#     lb.fit(list(data[i].values))\n#     data[i] = lb.transform(list(data[i].values))\n\n\ncols_to_remove_train = ['Open Date', 'Id', 'Date']\n\ndata_filtered = data.drop(cols_to_remove_train, axis=1)\nprint(data_filtered.shape)\n\n(100135, 44)\n\n\n\ndummies = pd.get_dummies(data_filtered,drop_first=True)\nprint(dummies.shape)\ndummies.head()\n\n(100135, 139)\n\n\n\n\n\n\n\n\n\nP1\nP2\nP3\nP4\nP5\nP6\nP7\nP8\nP9\nP10\nP11\nP12\nP13\nP14\nP15\nP16\nP17\nP18\nP19\nP20\nP21\nP22\nP23\nP24\nP25\nP26\nP27\nP28\nP29\nP30\nP31\nP32\nP33\nP34\nP35\nP36\nP37\nDay\nCity_Afyonkarahisar\nCity_Aksaray\nCity_Amasya\nCity_Ankara\nCity_Antalya\nCity_Artvin\nCity_Aydın\nCity_Balıkesir\nCity_Batman\nCity_Bilecik\nCity_Bolu\nCity_Bursa\nCity_Denizli\nCity_Diyarbakır\nCity_Düzce\nCity_Edirne\nCity_Elazığ\nCity_Erzincan\nCity_Erzurum\nCity_Eskişehir\nCity_Gaziantep\nCity_Giresun\nCity_Hatay\nCity_Isparta\nCity_Kahramanmaraş\nCity_Karabük\nCity_Kars\nCity_Kastamonu\nCity_Kayseri\nCity_Kocaeli\nCity_Konya\nCity_Kütahya\nCity_Kırklareli\nCity_Kırıkkale\nCity_Kırşehir\nCity_Malatya\nCity_Manisa\nCity_Mardin\nCity_Mersin\nCity_Muğla\nCity_Nevşehir\nCity_Niğde\nCity_Ordu\nCity_Osmaniye\nCity_Rize\nCity_Sakarya\nCity_Samsun\nCity_Siirt\nCity_Sivas\nCity_Tanımsız\nCity_Tekirdağ\nCity_Tokat\nCity_Trabzon\nCity_Uşak\nCity_Yalova\nCity_Zonguldak\nCity_Çanakkale\nCity_Çankırı\nCity_Çorum\nCity_İstanbul\nCity_İzmir\nCity_Şanlıurfa\nCity Group_Other\nType_FC\nType_IL\nMonth_10\nMonth_11\nMonth_12\nMonth_2\nMonth_3\nMonth_4\nMonth_5\nMonth_6\nMonth_7\nMonth_8\nMonth_9\nYear_1996\nYear_1997\nYear_1998\nYear_1999\nYear_2000\nYear_2001\nYear_2002\nYear_2003\nYear_2004\nYear_2005\nYear_2006\nYear_2007\nYear_2008\nYear_2009\nYear_2010\nYear_2011\nYear_2012\nYear_2013\nYear_2014\nWeekday_Monday\nWeekday_Saturday\nWeekday_Sunday\nWeekday_Thursday\nWeekday_Tuesday\nWeekday_Wednesday\n\n\n\n\n0\n4\n5.0\n4.0\n4.0\n2\n2\n5\n4\n5\n5\n3\n5\n5.0\n1\n2\n2\n2\n4\n5\n4\n1\n3\n3\n1\n1\n1.0\n4.0\n2.0\n3.0\n5\n3\n4\n5\n5\n4\n3\n4\n17\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n\n\n1\n4\n5.0\n4.0\n4.0\n1\n2\n5\n5\n5\n5\n1\n5\n5.0\n0\n0\n0\n0\n0\n3\n2\n1\n3\n2\n0\n0\n0.0\n0.0\n3.0\n3.0\n0\n0\n0\n0\n0\n0\n0\n0\n14\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n\n\n2\n2\n4.0\n2.0\n5.0\n2\n3\n5\n5\n5\n5\n2\n5\n5.0\n0\n0\n0\n0\n0\n1\n1\n1\n1\n1\n0\n0\n0.0\n0.0\n1.0\n3.0\n0\n0\n0\n0\n0\n0\n0\n0\n9\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n\n\n3\n6\n4.5\n6.0\n6.0\n4\n4\n10\n8\n10\n10\n8\n10\n7.5\n6\n4\n9\n3\n12\n20\n12\n6\n1\n10\n2\n2\n2.5\n2.5\n2.5\n7.5\n25\n12\n10\n6\n18\n12\n12\n6\n2\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n\n\n4\n3\n4.0\n3.0\n4.0\n2\n2\n5\n5\n5\n5\n2\n5\n5.0\n2\n1\n2\n1\n4\n2\n2\n1\n2\n1\n2\n3\n3.0\n5.0\n1.0\n3.0\n5\n1\n3\n2\n3\n4\n3\n3\n9\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n\n\n\n\n\n\n\nAfter getting dummies, I will remove special characters from the column names as xgboost algorithm will show error if the special characters are in the column names.\n\ndummies = dummies.rename(columns = lambda x:re.sub('[^A-Za-z0-9_]+', '', x))\nX_train = dummies.iloc[:n_train]\nX_test = dummies.iloc[n_train:]\nprint(X_train.shape)\nprint(X_test.shape)\n(print(y.shape))\n\n(135, 139)\n(100000, 139)\n(135,)"
  },
  {
    "objectID": "Restaurant Revenue Prediction.html#importing-ml-packages",
    "href": "Restaurant Revenue Prediction.html#importing-ml-packages",
    "title": "Introduction",
    "section": "Importing ML packages",
    "text": "Importing ML packages\n\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import cross_val_score, RepeatedKFold\nimport xgboost as xgb"
  },
  {
    "objectID": "Restaurant Revenue Prediction.html#custom-functions",
    "href": "Restaurant Revenue Prediction.html#custom-functions",
    "title": "Introduction",
    "section": "Custom Functions",
    "text": "Custom Functions\nAs the training dataset is small, I will use repeated KFold cross validation to find out how our model performs before predicting on our final test dataset. For that I will create a custom function that takes our model, train dataset and number of folds. I will also include a default parameter of columns to remove incase I use it in the training.\n\n## Score function\ndef score(model, train, y, nfolds, repeats,  columns_to_remove=None):\n    kf = RepeatedKFold(n_splits=nfolds, random_state=42,n_repeats=repeats).get_n_splits(train.values)\n    rmse = np.sqrt(-cross_val_score(model, train.values, y, scoring='neg_mean_squared_error',cv = kf))\n    if columns_to_remove:\n        train = train.drop(columns_to_remove, axis = 1)\n        kf = RepeatedKFold(n_splits=nfolds, random_state=42,n_repeats=repeats).get_n_splits(train.values)\n        rmse = np.sqrt(-cross_val_score(model, train.values, y, scoring='neg_mean_squared_error',cv = kf)) \n    return(rmse)\n\n## trainmodel function\ndef trainModel(model, X, y, test,columns_to_remove=None):\n    model.fit(X,y)\n    pred = model.predict(test)\n    if columns_to_remove:\n        X = X.drop(columns_to_remove, axis = 1)\n        model.fit(X, y)\n        test = test.drop(columns_to_remove, axis = 1)\n        pred = model.predict(test)\n    \n    return(pred)\n\n\nmodel_rf = RandomForestRegressor(n_estimators=100,\n                                 max_depth=1,\n                                 verbose=0,\n                                 bootstrap=False,\n                                 random_state=42,\n                                 n_jobs=3,\n                                 max_features=20)\n\nprint(\"[RANDOM FOREST] RMSE: \", score(model_rf,\n                                      train = X_train,\n                                      y=y,\n                                      nfolds=10,\n                                      repeats=5,\n                                      columns_to_remove=None).mean())\n\n[RANDOM FOREST] RMSE:  1601228.319918123\n\n\nThe above parameters were randomly selected. The rmse of random forest from the cross validation score is around 160,000 and on the public leaderboard(1% of the test data) score we get around 183,000 and on the private leaderboard (99% of the test data) score we get around 182,000.\n\nparams = {\n    'eta':0.1,\n    'max_depth':1,\n    'colsample_bytree':0.67,\n    'min_child_weight':1,\n    'objective':'reg:squarederror',\n    'subsample':0.8,\n    'reg_alpha':0.1,\n    'reg_lambda':0.1,\n    'n_estimators':25,\n    'booster':'gbtree',\n    'gamma':0\n}\n\n\n\nmodel_xgb = xgb.XGBRegressor(**params)\n\n\n\nprint(\"[XGboost] RMSE: \", score(model_xgb,\n                                      train = X_train,\n                                      y=y,\n                                      nfolds=10,\n                                      repeats=5,\n                                      columns_to_remove=None).mean())\n\n[XGboost] RMSE:  1558082.3011479408\n\n\nXgboost on the public leaderboard performed way better than the randomforest but the private leaderboard result was quite similar.\n\nprediction_rf = trainModel(model_rf,X=X_train,y=y,test = X_test,columns_to_remove=None)\nprediction_xgb = trainModel(model_xgb,X=X_train,y=y,test = X_test,columns_to_remove=None)\n\n\nsubmission = pd.DataFrame()\nsubmission['Id'] = test['Id']\nsubmission['Prediction'] = (prediction_xgb)\nsubmission.head()\n\n\n\n\n\n\n\n\nId\nPrediction\n\n\n\n\n0\n0\n3626202.00\n\n\n1\n1\n3288649.50\n\n\n2\n2\n2980387.25\n\n\n3\n3\n3085518.75\n\n\n4\n4\n3464793.25\n\n\n\n\n\n\n\n\nsubmission.to_csv('submission.csv', index=False)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Résumé & Credentials",
    "section": "",
    "text": "View My CV"
  },
  {
    "objectID": "about.html#master-of-science",
    "href": "about.html#master-of-science",
    "title": "Résumé & Credentials",
    "section": "Master of Science",
    "text": "Master of Science\n\n\n\nBusiness Analysis & Consulting\nInstitute: University of Strathclyde\nLocation: Glasgow, United Kingdom\nView My Degree\nVisit Official Website\n\n\n\n\n\nThis browser does not support PDFs. Please download the PDF to view it: Download PDF."
  },
  {
    "objectID": "about.html#bachelor-of-business-administration",
    "href": "about.html#bachelor-of-business-administration",
    "title": "Résumé & Credentials",
    "section": "Bachelor of Business Administration",
    "text": "Bachelor of Business Administration\n\n\n\nAccounting & Finance\nInstitute: SZABIST\nLocation: Dubai, United Arab Emirates\nView My Degree\nVisit Official Website\n\n\n\n\n\nThis browser does not support PDFs. Please download the PDF to view it: Download PDF."
  },
  {
    "objectID": "LoanPredAnalytics.html",
    "href": "LoanPredAnalytics.html",
    "title": "Introduction",
    "section": "",
    "text": "Ever wondered why banks set different interest rate for different borrowers? Banks usually set the interest rate based on applicants prior history, income, debt to income ratio, number of accounts etc. Based on historical data, banks evaluate an applicant’s probability of default, the higher the probability, the higher will be the interest rate. This project is about predicting the interest rate. This project was hosted by analyticsvidhya. The dataset and other information is available on this link. The dataset is cleaned already. Dataset has some missing values but I will use h2o which will automatically handles the missing values. The purpose of using h2o is that it automatically creates scaled variable importance, confusion matrix and other useful information which can be viewed by opening the link we get after initializing of h2o.\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport h2o\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings(action='ignore')\npd.set_option('display.max_columns', None)"
  },
  {
    "objectID": "LoanPredAnalytics.html#import-dataset",
    "href": "LoanPredAnalytics.html#import-dataset",
    "title": "Introduction",
    "section": "Import Dataset",
    "text": "Import Dataset\n\nbackup_train = pd.read_csv('https://datahack-prod.s3.amazonaws.com/train_file/train_fNxu4vz.csv')\nbackup_test = pd.read_csv('https://datahack-prod.s3.amazonaws.com/test_file/test_fjtUOL8.csv')\n\n\ntrain = backup_train.copy()\ntest = backup_test.copy()\ntrain['Loan_Amount_Requested'] = train['Loan_Amount_Requested'].str.replace(\",\", \"\").astype(int)\ntest['Loan_Amount_Requested'] = test['Loan_Amount_Requested'].str.replace(\",\", \"\").astype(int)\n\n\ntrain.head()\n\n\n\n\n\n\n\n\nLoan_ID\nLoan_Amount_Requested\nLength_Employed\nHome_Owner\nAnnual_Income\nIncome_Verified\nPurpose_Of_Loan\nDebt_To_Income\nInquiries_Last_6Mo\nMonths_Since_Deliquency\nNumber_Open_Accounts\nTotal_Accounts\nGender\nInterest_Rate\n\n\n\n\n0\n10000001\n7000\n&lt; 1 year\nRent\n68000.0\nnot verified\ncar\n18.37\n0\nNaN\n9\n14\nFemale\n1\n\n\n1\n10000002\n30000\n4 years\nMortgage\nNaN\nVERIFIED - income\ndebt_consolidation\n14.93\n0\n17.0\n12\n24\nFemale\n3\n\n\n2\n10000003\n24725\n7 years\nMortgage\n75566.4\nVERIFIED - income source\ndebt_consolidation\n15.88\n0\nNaN\n12\n16\nMale\n3\n\n\n3\n10000004\n16000\n&lt; 1 year\nNaN\n56160.0\nVERIFIED - income source\ndebt_consolidation\n14.34\n3\nNaN\n16\n22\nMale\n3\n\n\n4\n10000005\n17000\n8 years\nOwn\n96000.0\nVERIFIED - income source\ndebt_consolidation\n22.17\n1\nNaN\n19\n30\nFemale\n1\n\n\n\n\n\n\n\n\nmissing_values = train.isnull().sum()/len(train)\nmissing_values = missing_values[missing_values &gt; 0]\nmissing_values = missing_values.sort_values(ascending = False)\nmissing_values\n\nMonths_Since_Deliquency    0.537883\nHome_Owner                 0.154276\nAnnual_Income              0.152773\nLength_Employed            0.044861\ndtype: float64"
  },
  {
    "objectID": "LoanPredAnalytics.html#brief-eda",
    "href": "LoanPredAnalytics.html#brief-eda",
    "title": "Introduction",
    "section": "Brief EDA",
    "text": "Brief EDA\n\nprint(\"Skewness of Annual Income : \", train.Annual_Income.skew())\nplt.figure(figsize = (9,6))\nsns.kdeplot(train['Annual_Income'])\nplt.title('Distribution of Annual Income')\nplt.show()\n\nSkewness of Annual Income :  40.22530582196167\n\n\n\n\n\n\n\n\n\n\nprint(\"Skewness of Loan Amount Requested : \", train.Loan_Amount_Requested.skew())\nplt.figure(figsize = (9,6))\nsns.kdeplot(train['Loan_Amount_Requested'])\nplt.title('Distribution of Loan Amount Requested')\nplt.show()\n\nSkewness of Loan Amount Requested :  0.7272164488493352\n\n\n\n\n\n\n\n\n\n\nprint(\"Skewness of Debt To Income Ratio : \", train.Debt_To_Income.skew())\nplt.figure(figsize = (9,6))\nsns.kdeplot(train['Debt_To_Income'])\nplt.title('Distribution of Debt to Income')\nplt.show()\n\nSkewness of Debt To Income Ratio :  0.19220424443627823\n\n\n\n\n\n\n\n\n\n\nprint(\"Skewness of  Number of Open Accounts: \", train.Number_Open_Accounts.skew())\nplt.figure(figsize = (9,6))\nsns.kdeplot(train['Number_Open_Accounts'])\nplt.title('Distribution of Number of Open Accounts')\nplt.show()\n\nSkewness of  Number of Open Accounts:  1.1640839965373095\n\n\n\n\n\n\n\n\n\n\nprint(\"Skewness of Total Accounts : \", train.Total_Accounts.skew())\nplt.figure(figsize = (9,6))\nsns.kdeplot(train['Total_Accounts'])\nplt.title('Distribution of Total Accounts')\nplt.show()\n\nSkewness of Total Accounts :  0.817347341039482\n\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(9,6))\nplt.scatter(x = train['Number_Open_Accounts'], y = train['Total_Accounts'])\nplt.title('Number of Open Accounts and Total Accounts')\nplt.xlabel('Open Accounts')\nplt.ylabel('Total Accounts')\nplt.show()"
  },
  {
    "objectID": "LoanPredAnalytics.html#one-hot-encoding",
    "href": "LoanPredAnalytics.html#one-hot-encoding",
    "title": "Introduction",
    "section": "One Hot Encoding",
    "text": "One Hot Encoding\nIn order to deal with multicollinearity, I will remove the least occuring category in each categorical variable\n\ncat_features = train.dtypes[train.dtypes == 'object'].index\ncat_data = train[cat_features]\ncat_test = test[cat_features]\ndummies = pd.get_dummies(cat_data, drop_first=False)\ndummies_test = pd.get_dummies(cat_test, drop_first=False)\nprint(dummies.shape)\nprint(dummies_test.shape)\ndummies.head()\n\n(164309, 35)\n(109541, 35)\n\n\n\n\n\n\n\n\n\nLength_Employed_1 year\nLength_Employed_10+ years\nLength_Employed_2 years\nLength_Employed_3 years\nLength_Employed_4 years\nLength_Employed_5 years\nLength_Employed_6 years\nLength_Employed_7 years\nLength_Employed_8 years\nLength_Employed_9 years\nLength_Employed_&lt; 1 year\nHome_Owner_Mortgage\nHome_Owner_None\nHome_Owner_Other\nHome_Owner_Own\nHome_Owner_Rent\nIncome_Verified_VERIFIED - income\nIncome_Verified_VERIFIED - income source\nIncome_Verified_not verified\nPurpose_Of_Loan_car\nPurpose_Of_Loan_credit_card\nPurpose_Of_Loan_debt_consolidation\nPurpose_Of_Loan_educational\nPurpose_Of_Loan_home_improvement\nPurpose_Of_Loan_house\nPurpose_Of_Loan_major_purchase\nPurpose_Of_Loan_medical\nPurpose_Of_Loan_moving\nPurpose_Of_Loan_other\nPurpose_Of_Loan_renewable_energy\nPurpose_Of_Loan_small_business\nPurpose_Of_Loan_vacation\nPurpose_Of_Loan_wedding\nGender_Female\nGender_Male\n\n\n\n\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n\n\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n\n\n2\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n\n\n3\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n\n\n4\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0"
  },
  {
    "objectID": "LoanPredAnalytics.html#categorical-eda",
    "href": "LoanPredAnalytics.html#categorical-eda",
    "title": "Introduction",
    "section": "Categorical EDA",
    "text": "Categorical EDA\n\nplt.figure(figsize=(9,6))\nsns.countplot(cat_data['Gender'])\nplt.title('Number of People Account to Gender')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(9,6))\nsns.countplot(cat_data['Income_Verified'])\nplt.title('Number of People Account to Income Verified')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(9,6))\nsns.countplot(cat_data['Home_Owner'])\nplt.title('Number of People Account to Ownership')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12,6))\nsns.countplot(cat_data['Length_Employed'])\nplt.title('Number of People Account to Employment Length')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12,6))\nsns.countplot(cat_data['Purpose_Of_Loan'])\nplt.title('Number of People Account to Purpose of Loan')\nplt.xticks(rotation = 45)\nplt.show()\n\n\n\n\n\n\n\n\n\ncolumns_to_remove = ['Gender_Female','Purpose_Of_Loan_renewable_energy', 'Income_Verified_not verified',\n                    'Home_Owner_None', 'Length_Employed_&lt; 1 year']\n\ndummies = dummies.drop(columns=columns_to_remove, axis = 1)\ndummies_test = dummies_test.drop(columns=columns_to_remove, axis=1)\nprint(dummies.shape)\nprint(dummies_test.shape)\n\n(164309, 30)\n(109541, 30)\n\n\n\ntrain = pd.concat([train, dummies], axis=1)\ntest = pd.concat([test, dummies_test], axis=1)\nprint(train.shape)\nprint(test.shape)\n\n(164309, 44)\n(109541, 43)\n\n\n\nnum_features = train.dtypes[train.dtypes != 'object'].index\nfinal_train = train[num_features]\nfinal_test = test[test.dtypes[test.dtypes != 'object'].index]\n\n\nfinal_train.head()\n\n\n\n\n\n\n\n\nLoan_ID\nLoan_Amount_Requested\nAnnual_Income\nDebt_To_Income\nInquiries_Last_6Mo\nMonths_Since_Deliquency\nNumber_Open_Accounts\nTotal_Accounts\nInterest_Rate\nLength_Employed_1 year\nLength_Employed_10+ years\nLength_Employed_2 years\nLength_Employed_3 years\nLength_Employed_4 years\nLength_Employed_5 years\nLength_Employed_6 years\nLength_Employed_7 years\nLength_Employed_8 years\nLength_Employed_9 years\nHome_Owner_Mortgage\nHome_Owner_Other\nHome_Owner_Own\nHome_Owner_Rent\nIncome_Verified_VERIFIED - income\nIncome_Verified_VERIFIED - income source\nPurpose_Of_Loan_car\nPurpose_Of_Loan_credit_card\nPurpose_Of_Loan_debt_consolidation\nPurpose_Of_Loan_educational\nPurpose_Of_Loan_home_improvement\nPurpose_Of_Loan_house\nPurpose_Of_Loan_major_purchase\nPurpose_Of_Loan_medical\nPurpose_Of_Loan_moving\nPurpose_Of_Loan_other\nPurpose_Of_Loan_small_business\nPurpose_Of_Loan_vacation\nPurpose_Of_Loan_wedding\nGender_Male\n\n\n\n\n0\n10000001\n7000\n68000.0\n18.37\n0\nNaN\n9\n14\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n10000002\n30000\nNaN\n14.93\n0\n17.0\n12\n24\n3\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n10000003\n24725\n75566.4\n15.88\n0\nNaN\n12\n16\n3\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n\n\n3\n10000004\n16000\n56160.0\n14.34\n3\nNaN\n16\n22\n3\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n\n\n4\n10000005\n17000\n96000.0\n22.17\n1\nNaN\n19\n30\n1\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0"
  },
  {
    "objectID": "LoanPredAnalytics.html#xgboost",
    "href": "LoanPredAnalytics.html#xgboost",
    "title": "Introduction",
    "section": "Xgboost",
    "text": "Xgboost\n\nparam = {\n    \"max_depth\" : 9,\n    \"learn_rate\" : 0.1,\n    \"sample_rate\" : 0.7,\n    \"col_sample_rate_per_tree\" : 0.9,\n    \"ntrees\": 300,\n    \"stopping_rounds\":10,\n    \"stopping_tolerance\":0.001,\n    \"stopping_metric\":'mean_per_class_error',\n    \"distribution\": \"multinomial\",\n    \"seed\":42,\n    \"sample_rate\":0.9,\n    \"fold_assignment\":\"Modulo\",\n    \"nfolds\" : 5,\n    \"keep_cross_validation_predictions\":True\n}\nxgb = H2OXGBoostEstimator(**param)\n\n\nxgb.train(x=x,\n          y=y,\n          training_frame = train_h2o)\n\nxgboost Model Build progress: |███████████████████████████████████████████| 100%"
  },
  {
    "objectID": "LoanPredAnalytics.html#random-forest",
    "href": "LoanPredAnalytics.html#random-forest",
    "title": "Introduction",
    "section": "Random Forest",
    "text": "Random Forest\n\nrf = H2ORandomForestEstimator(ntrees = 50,\n                              max_depth = 20,\n                              nfolds = 5,\n                              fold_assignment = \"Modulo\",\n                              keep_cross_validation_predictions=True)\n\nrf.train(x=x,\n         y=y,\n         training_frame=train_h2o,\n         model_id = 'rf')\n\ndrf Model Build progress: |███████████████████████████████████████████████| 100%"
  },
  {
    "objectID": "LoanPredAnalytics.html#gradient-boosting",
    "href": "LoanPredAnalytics.html#gradient-boosting",
    "title": "Introduction",
    "section": "Gradient Boosting",
    "text": "Gradient Boosting\n\ngbm = H2OGradientBoostingEstimator(ntrees = 200,\n                                   max_depth = 7,\n                                   learn_rate = 0.01,\n                                   seed = 42,\n                                   distribution = 'multinomial',\n                                   nfolds = 5,\n                                   fold_assignment = \"Modulo\",\n                                   balance_classes = True,\n                                   stopping_rounds = 10,\n                                   stopping_tolerance = 0.001,\n                                   stopping_metric = 'mean_per_class_error',\n                                   keep_cross_validation_predictions=True)\ngbm.train(x=x,\n          y=y,\n          training_frame=train_h2o,\n          model_id = 'gbm')\n\ngbm Model Build progress: |███████████████████████████████████████████████| 100%"
  },
  {
    "objectID": "LoanPredAnalytics.html#stacked-ensemble",
    "href": "LoanPredAnalytics.html#stacked-ensemble",
    "title": "Introduction",
    "section": "Stacked Ensemble",
    "text": "Stacked Ensemble\n\nstack_blend = H2OStackedEnsembleEstimator(base_models=[rf.model_id, gbm.model_id, xgb.model_id],\n                                          seed=42)\n\nstack_blend.train(x=x,\n                  y=y,\n                  training_frame=train_h2o)\n\nstackedensemble Model Build progress: |███████████████████████████████████| 100%\n\n\n\nresult = stack_blend.predict(test_h2o)\n\nstackedensemble prediction progress: |████████████████████████████████████| 100%\n\n\n\npredictions = h2o.as_list(result)\npredictions.head()\n\n\n\n\n\n\n\n\npredict\np1\np2\np3\n\n\n\n\n0\n2\n0.234083\n0.442597\n0.323320\n\n\n1\n1\n0.546638\n0.364778\n0.088584\n\n\n2\n3\n0.082874\n0.350497\n0.566628\n\n\n3\n2\n0.197691\n0.528902\n0.273407\n\n\n4\n2\n0.123268\n0.533398\n0.343335"
  },
  {
    "objectID": "LoanPredAnalytics.html#preparing-data-for-submission",
    "href": "LoanPredAnalytics.html#preparing-data-for-submission",
    "title": "Introduction",
    "section": "Preparing data for submission",
    "text": "Preparing data for submission\n\nsubmission = pd.DataFrame()\nsubmission['Loan_ID'] = test['Loan_ID']\nsubmission['Interest_Rate'] = predictions['predict']\nsubmission.to_csv('loan_pred.csv', index = False)\n\n\nh2o.cluster().shutdown()\n\nH2O session _sid_b404 closed.\n\n\nFinal result is weighted f1 of 0.530, highest score in the competition is 0.5399, which means that our model is good enough overall. Although the hyperparameters were randomly selected for all the models. In order to get higher score, h2o grid search can be used to tune the models. Thank you for checking out my kernel."
  },
  {
    "objectID": "Credit Default Risk.html",
    "href": "Credit Default Risk.html",
    "title": "Introduction",
    "section": "",
    "text": "This competition was started many years back on kaggle.com. This competition is about predicting the loan default risk. After the global financial crisis back in 2008, banks are concerned about the potential default of the borrowers. In order to minimize the risk, Banks need to come up with a system which will help them in making right decisions regarding lending a loan. In this dataset, we have multiple files from bureau, application of applicants, their cash balance history, credit card history etc. Complete description and the dataset is available at kaggle at this link. This competition had the prize of about $70,000.\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nimport os\npd.set_option('display.max_columns', 500)\n\n## ignore any warnings\nimport warnings\nwarnings.filterwarnings('ignore')\nfrom sklearn.preprocessing import LabelEncoder\nfrom statistics import stdev, mean\nfrom sklearn.model_selection import GridSearchCV\n\nC:\\Users\\uzair\\Anaconda3\\lib\\site-packages\\statsmodels\\tools\\_testing.py:19: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.\n  import pandas.util.testing as tm\nos.chdir(\"C:\\\\Users\\\\uzair\\\\Codes\\\\Home Default risk\")"
  },
  {
    "objectID": "Credit Default Risk.html#distribution-of-application-dataset",
    "href": "Credit Default Risk.html#distribution-of-application-dataset",
    "title": "Introduction",
    "section": "Distribution of Application Dataset",
    "text": "Distribution of Application Dataset\n\nplt.style.use('classic')\nplt.figure(figsize=(12, 6))\n\nax = sns.distplot(app_train['AMT_CREDIT'])\nplt.title('Distribution of Amount Credit')\nskewness = app_train['AMT_CREDIT'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12, 6))\n\nsns.distplot(abs(app_train['DAYS_BIRTH']/365))\nplt.title('Age Distribution')\nplt.xlabel('Age')\nskewness = app_train['DAYS_BIRTH'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12, 6))\n\nsns.distplot(app_train['DAYS_EMPLOYED']/365)\nplt.title('Years of Employment')\nskewness = app_train['DAYS_EMPLOYED'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\n\nplt.show()\n\n\n\n\n\n\n\n\nThis is strange. How can a person is employed for more than 800 years?\n\nplt.figure(figsize=(12, 6))\n\nax = sns.distplot(app_train['EXT_SOURCE_3'].dropna())\nplt.title('Distribution of Ext_Source 3')\nskewness = app_train['EXT_SOURCE_3'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12, 6))\n\nax = sns.distplot(app_train['EXT_SOURCE_2'].dropna())\nplt.title('Distribution of Ext_Source 2')\n\nskewness = app_train['EXT_SOURCE_2'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12, 6))\n\nax = sns.distplot(app_train['EXT_SOURCE_1'].dropna())\nplt.title('Distribution of Ext_Source 1')\nskewness = app_train['EXT_SOURCE_3'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12, 6))\n\nax = sns.distplot(app_train['AMT_ANNUITY'].dropna())\nplt.title('Distribution of Amount Annuity')\nskewness = app_train['AMT_ANNUITY'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(12, 6))\n\nax = sns.distplot(app_train['AMT_GOODS_PRICE'].dropna())\nplt.title('Distribution of Amount Good Price')\nskewness = app_train['AMT_GOODS_PRICE'].skew()\nplt.legend(['skewness = {:.5f}'.format(skewness)],\n            loc='best')\nplt.show()\n\n\n\n\n\n\n\n\nWe have skewness problem in the dataset."
  },
  {
    "objectID": "Credit Default Risk.html#target-and-numeric-variables",
    "href": "Credit Default Risk.html#target-and-numeric-variables",
    "title": "Introduction",
    "section": "Target And Numeric Variables",
    "text": "Target And Numeric Variables\n\nplt.figure(figsize=(15, 10))\nplt.style.use('seaborn-deep')\nsns.kdeplot(app_train.loc[app_train['TARGET'] == 1, 'AMT_CREDIT'], label = 'Target = 1')\nsns.kdeplot(app_train.loc[app_train['TARGET'] == 0, 'AMT_CREDIT'], label = 'Target = 0')\nplt.title('Distribution of Amount Credit according to Target')\nplt.xlabel('Amount Credit', fontsize = 20)\nplt.show()\n\n\n\n\n\n\n\n\n\nplt.figure(figsize=(15, 10))\n\nsns.kdeplot(abs(app_train.loc[app_train['TARGET'] == 1, 'DAYS_BIRTH'] / 365), label = 'Target = 1')\nsns.kdeplot(abs(app_train.loc[app_train['TARGET'] == 0, 'DAYS_BIRTH'] / 365), label = 'Target = 0')\nplt.title('Distribution of Age according to Target')\nplt.xlabel('Days Birth', fontsize = 20)\nplt.show()\n\n\n\n\n\n\n\n\nAs the people get older, they tend to pay their loans according to this graph. We will explore their relation in a while.\n\nplt.figure(figsize = (15, 15))\n\n# iterate through the sources\nfor i, source in enumerate(['EXT_SOURCE_1', 'EXT_SOURCE_2', 'EXT_SOURCE_3']):\n    \n    plt.subplot(3, 1, i + 1)\n    \n    sns.kdeplot(app_train.loc[app_train['TARGET'] == 0, source], label = 'target == 0')\n    \n    sns.kdeplot(app_train.loc[app_train['TARGET'] == 1, source], label = 'target == 1')\n    \n    # Label the plots\n    plt.title('Distribution of %s by Target Value' % source)\n    plt.xlabel('%s' % source); plt.ylabel('Density');\nplt.tight_layout(h_pad = 2.5)\n\n\n\n\n\n\n\n\nWe can see alot of differences in the behavior of EXT_SOURCE variables according to their target status. These variables will be useful in our model\n\nplt.figure(figsize = (15, 15))\n\n# iterate through the sources\nfor i, source in enumerate(['DAYS_REGISTRATION', 'DAYS_ID_PUBLISH', 'DAYS_EMPLOYED']):\n    \n    plt.subplot(3, 1, i + 1)\n    \n    sns.kdeplot(app_train.loc[app_train['TARGET'] == 0, source], label = 'target == 0')\n    \n    sns.kdeplot(app_train.loc[app_train['TARGET'] == 1, source], label = 'target == 1')\n    \n    # Label the plots\n    plt.title('Distribution of %s by Target Value' % source)\n    plt.xlabel('%s' % source); plt.ylabel('Density');\nplt.tight_layout(h_pad = 2.5)\n\n\n\n\n\n\n\n\nWhy data related to days are in negative? Lets fix this with the help of abs function that will convert the signs\n\nplt.figure(figsize = (15, 15))\n\n# iterate through the sources\nfor i, source in enumerate(['DAYS_REGISTRATION', 'DAYS_ID_PUBLISH', 'DAYS_EMPLOYED',\n                           'DAYS_BIRTH']):\n    \n    plt.subplot(4, 1, i + 1)\n    \n    sns.kdeplot(abs(app_train.loc[app_train['TARGET'] == 0, source]), label = 'target == 0')\n    \n    sns.kdeplot(abs(app_train.loc[app_train['TARGET'] == 1, source]), label = 'target == 1')\n    \n    # Label the plots\n    plt.title('Distribution of %s by Target Value' % source)\n    plt.xlabel('%s' % source);\n    plt.ylabel('Density');\nplt.tight_layout(h_pad=2)\n\n\n\n\n\n\n\n\nNow it makes more sense. But we still have the issue. We will simply impute Nas where days are in negative\n\nPractice Data preparation\n\nprint(app_train.shape)\nprint(app_test.shape)\n\n(307511, 122)\n(48744, 121)\n\n\n\n\ny = app_train['TARGET']\n\nntrain = app_train.shape[0]\nntest = app_test.shape[0]\n\ntrain = app_train.drop(['TARGET'], axis=1)\ntest = app_test.copy()\n\napplication_data = pd.concat((train, test)).reset_index(drop=True)\napplication_data.head()\n\n\n\n\n\n\n\n\nSK_ID_CURR\nNAME_CONTRACT_TYPE\nCODE_GENDER\nFLAG_OWN_CAR\nFLAG_OWN_REALTY\nCNT_CHILDREN\nAMT_INCOME_TOTAL\nAMT_CREDIT\nAMT_ANNUITY\nAMT_GOODS_PRICE\nNAME_TYPE_SUITE\nNAME_INCOME_TYPE\nNAME_EDUCATION_TYPE\nNAME_FAMILY_STATUS\nNAME_HOUSING_TYPE\nREGION_POPULATION_RELATIVE\nDAYS_BIRTH\nDAYS_EMPLOYED\nDAYS_REGISTRATION\nDAYS_ID_PUBLISH\nOWN_CAR_AGE\nFLAG_MOBIL\nFLAG_EMP_PHONE\nFLAG_WORK_PHONE\nFLAG_CONT_MOBILE\nFLAG_PHONE\nFLAG_EMAIL\nOCCUPATION_TYPE\nCNT_FAM_MEMBERS\nREGION_RATING_CLIENT\nREGION_RATING_CLIENT_W_CITY\nWEEKDAY_APPR_PROCESS_START\nHOUR_APPR_PROCESS_START\nREG_REGION_NOT_LIVE_REGION\nREG_REGION_NOT_WORK_REGION\nLIVE_REGION_NOT_WORK_REGION\nREG_CITY_NOT_LIVE_CITY\nREG_CITY_NOT_WORK_CITY\nLIVE_CITY_NOT_WORK_CITY\nORGANIZATION_TYPE\nEXT_SOURCE_1\nEXT_SOURCE_2\nEXT_SOURCE_3\nAPARTMENTS_AVG\nBASEMENTAREA_AVG\nYEARS_BEGINEXPLUATATION_AVG\nYEARS_BUILD_AVG\nCOMMONAREA_AVG\nELEVATORS_AVG\nENTRANCES_AVG\nFLOORSMAX_AVG\nFLOORSMIN_AVG\nLANDAREA_AVG\nLIVINGAPARTMENTS_AVG\nLIVINGAREA_AVG\nNONLIVINGAPARTMENTS_AVG\nNONLIVINGAREA_AVG\nAPARTMENTS_MODE\nBASEMENTAREA_MODE\nYEARS_BEGINEXPLUATATION_MODE\nYEARS_BUILD_MODE\nCOMMONAREA_MODE\nELEVATORS_MODE\nENTRANCES_MODE\nFLOORSMAX_MODE\nFLOORSMIN_MODE\nLANDAREA_MODE\nLIVINGAPARTMENTS_MODE\nLIVINGAREA_MODE\nNONLIVINGAPARTMENTS_MODE\nNONLIVINGAREA_MODE\nAPARTMENTS_MEDI\nBASEMENTAREA_MEDI\nYEARS_BEGINEXPLUATATION_MEDI\nYEARS_BUILD_MEDI\nCOMMONAREA_MEDI\nELEVATORS_MEDI\nENTRANCES_MEDI\nFLOORSMAX_MEDI\nFLOORSMIN_MEDI\nLANDAREA_MEDI\nLIVINGAPARTMENTS_MEDI\nLIVINGAREA_MEDI\nNONLIVINGAPARTMENTS_MEDI\nNONLIVINGAREA_MEDI\nFONDKAPREMONT_MODE\nHOUSETYPE_MODE\nTOTALAREA_MODE\nWALLSMATERIAL_MODE\nEMERGENCYSTATE_MODE\nOBS_30_CNT_SOCIAL_CIRCLE\nDEF_30_CNT_SOCIAL_CIRCLE\nOBS_60_CNT_SOCIAL_CIRCLE\nDEF_60_CNT_SOCIAL_CIRCLE\nDAYS_LAST_PHONE_CHANGE\nFLAG_DOCUMENT_2\nFLAG_DOCUMENT_3\nFLAG_DOCUMENT_4\nFLAG_DOCUMENT_5\nFLAG_DOCUMENT_6\nFLAG_DOCUMENT_7\nFLAG_DOCUMENT_8\nFLAG_DOCUMENT_9\nFLAG_DOCUMENT_10\nFLAG_DOCUMENT_11\nFLAG_DOCUMENT_12\nFLAG_DOCUMENT_13\nFLAG_DOCUMENT_14\nFLAG_DOCUMENT_15\nFLAG_DOCUMENT_16\nFLAG_DOCUMENT_17\nFLAG_DOCUMENT_18\nFLAG_DOCUMENT_19\nFLAG_DOCUMENT_20\nFLAG_DOCUMENT_21\nAMT_REQ_CREDIT_BUREAU_HOUR\nAMT_REQ_CREDIT_BUREAU_DAY\nAMT_REQ_CREDIT_BUREAU_WEEK\nAMT_REQ_CREDIT_BUREAU_MON\nAMT_REQ_CREDIT_BUREAU_QRT\nAMT_REQ_CREDIT_BUREAU_YEAR\n\n\n\n\n0\n100002\nCash loans\nM\nN\nY\n0\n202500.0\n406597.5\n24700.5\n351000.0\nUnaccompanied\nWorking\nSecondary / secondary special\nSingle / not married\nHouse / apartment\n0.018801\n-9461\n-637\n-3648.0\n-2120\nNaN\n1\n1\n0\n1\n1\n0\nLaborers\n1.0\n2\n2\nWEDNESDAY\n10\n0\n0\n0\n0\n0\n0\nBusiness Entity Type 3\n0.083037\n0.262949\n0.139376\n0.0247\n0.0369\n0.9722\n0.6192\n0.0143\n0.00\n0.0690\n0.0833\n0.1250\n0.0369\n0.0202\n0.0190\n0.0000\n0.0000\n0.0252\n0.0383\n0.9722\n0.6341\n0.0144\n0.0000\n0.0690\n0.0833\n0.1250\n0.0377\n0.022\n0.0198\n0.0\n0.0\n0.0250\n0.0369\n0.9722\n0.6243\n0.0144\n0.00\n0.0690\n0.0833\n0.1250\n0.0375\n0.0205\n0.0193\n0.0000\n0.00\nreg oper account\nblock of flats\n0.0149\nStone, brick\nNo\n2.0\n2.0\n2.0\n2.0\n-1134.0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n1.0\n\n\n1\n100003\nCash loans\nF\nN\nN\n0\n270000.0\n1293502.5\n35698.5\n1129500.0\nFamily\nState servant\nHigher education\nMarried\nHouse / apartment\n0.003541\n-16765\n-1188\n-1186.0\n-291\nNaN\n1\n1\n0\n1\n1\n0\nCore staff\n2.0\n1\n1\nMONDAY\n11\n0\n0\n0\n0\n0\n0\nSchool\n0.311267\n0.622246\nNaN\n0.0959\n0.0529\n0.9851\n0.7960\n0.0605\n0.08\n0.0345\n0.2917\n0.3333\n0.0130\n0.0773\n0.0549\n0.0039\n0.0098\n0.0924\n0.0538\n0.9851\n0.8040\n0.0497\n0.0806\n0.0345\n0.2917\n0.3333\n0.0128\n0.079\n0.0554\n0.0\n0.0\n0.0968\n0.0529\n0.9851\n0.7987\n0.0608\n0.08\n0.0345\n0.2917\n0.3333\n0.0132\n0.0787\n0.0558\n0.0039\n0.01\nreg oper account\nblock of flats\n0.0714\nBlock\nNo\n1.0\n0.0\n1.0\n0.0\n-828.0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n\n\n2\n100004\nRevolving loans\nM\nY\nY\n0\n67500.0\n135000.0\n6750.0\n135000.0\nUnaccompanied\nWorking\nSecondary / secondary special\nSingle / not married\nHouse / apartment\n0.010032\n-19046\n-225\n-4260.0\n-2531\n26.0\n1\n1\n1\n1\n1\n0\nLaborers\n1.0\n2\n2\nMONDAY\n9\n0\n0\n0\n0\n0\n0\nGovernment\nNaN\n0.555912\n0.729567\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n-815.0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n\n\n3\n100006\nCash loans\nF\nN\nY\n0\n135000.0\n312682.5\n29686.5\n297000.0\nUnaccompanied\nWorking\nSecondary / secondary special\nCivil marriage\nHouse / apartment\n0.008019\n-19005\n-3039\n-9833.0\n-2437\nNaN\n1\n1\n0\n1\n0\n0\nLaborers\n2.0\n2\n2\nWEDNESDAY\n17\n0\n0\n0\n0\n0\n0\nBusiness Entity Type 3\nNaN\n0.650442\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n2.0\n0.0\n2.0\n0.0\n-617.0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4\n100007\nCash loans\nM\nN\nY\n0\n121500.0\n513000.0\n21865.5\n513000.0\nUnaccompanied\nWorking\nSecondary / secondary special\nSingle / not married\nHouse / apartment\n0.028663\n-19932\n-3038\n-4311.0\n-3458\nNaN\n1\n1\n0\n1\n0\n0\nCore staff\n1.0\n2\n2\nTHURSDAY\n11\n0\n0\n0\n0\n1\n1\nReligion\nNaN\n0.322738\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n-1106.0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n\n\n\n\n\n\n\n\nFixing issues\n\ncols = ['DAYS_REGISTRATION', 'DAYS_ID_PUBLISH', 'DAYS_EMPLOYED','DAYS_BIRTH',\n        'DAYS_LAST_PHONE_CHANGE']\nfor c in cols:\n    application_data[c] = abs(application_data[c])\n    \napplication_data[cols].describe()\n\n\n\n\n\n\n\n\nDAYS_REGISTRATION\nDAYS_ID_PUBLISH\nDAYS_EMPLOYED\nDAYS_BIRTH\nDAYS_LAST_PHONE_CHANGE\n\n\n\n\ncount\n356255.000000\n356255.000000\n356255.000000\n356255.000000\n356254.000000\n\n\nmean\n4983.593527\n3002.071163\n68240.792834\n16041.248841\n978.580852\n\n\nstd\n3526.968986\n1517.901735\n139858.346025\n4358.803980\n835.063902\n\n\nmin\n0.000000\n0.000000\n0.000000\n7338.000000\n0.000000\n\n\n25%\n1995.000000\n1717.000000\n949.000000\n12425.000000\n286.000000\n\n\n50%\n4502.000000\n3252.000000\n2243.000000\n15755.000000\n771.000000\n\n\n75%\n7477.000000\n4318.000000\n5773.000000\n19676.000000\n1592.000000\n\n\nmax\n24672.000000\n7197.000000\n365243.000000\n25229.000000\n4361.000000\n\n\n\n\n\n\n\n\ncols = ['DAYS_REGISTRATION', 'DAYS_ID_PUBLISH', 'DAYS_EMPLOYED','DAYS_BIRTH',\n        'DAYS_LAST_PHONE_CHANGE']\nfor c in cols:\n    application_data[c] = application_data[c]/365\n\napplication_data[cols].describe()\n\n\n\n\n\n\n\n\nDAYS_REGISTRATION\nDAYS_ID_PUBLISH\nDAYS_EMPLOYED\nDAYS_BIRTH\nDAYS_LAST_PHONE_CHANGE\n\n\n\n\ncount\n356255.000000\n356255.000000\n356255.000000\n356255.000000\n356254.000000\n\n\nmean\n13.653681\n8.224853\n186.961076\n43.948627\n2.681043\n\n\nstd\n9.662929\n4.158635\n383.173551\n11.941929\n2.287846\n\n\nmin\n0.000000\n0.000000\n0.000000\n20.104110\n0.000000\n\n\n25%\n5.465753\n4.704110\n2.600000\n34.041096\n0.783562\n\n\n50%\n12.334247\n8.909589\n6.145205\n43.164384\n2.112329\n\n\n75%\n20.484932\n11.830137\n15.816438\n53.906849\n4.361644\n\n\nmax\n67.594521\n19.717808\n1000.665753\n69.120548\n11.947945\n\n\n\n\n\n\n\n\napplication_data['DAYS_EMPLOYED'] = np.where(application_data['DAYS_EMPLOYED'] &gt; 800, np.nan,\n                                            application_data['DAYS_EMPLOYED'])\napplication_data['DAYS_EMPLOYED'].describe()\n\ncount    291607.000000\nmean          6.566298\nstd           6.395836\nmin           0.000000\n25%           2.136986\n50%           4.556164\n75%           8.767123\nmax          49.073973\nName: DAYS_EMPLOYED, dtype: float64\n\n\n\napplication_data['FLAG_OWN_CAR'] = np.where(application_data['FLAG_OWN_CAR'] ==\"Y\", 1, 0)\napplication_data['FLAG_OWN_REALTY'] = np.where(application_data['FLAG_OWN_REALTY'] ==\"Y\", 1, 0)\ncols = ['FLAG_OWN_CAR', 'FLAG_OWN_REALTY']\napplication_data[cols].describe()\n\n\n\n\n\n\n\n\nFLAG_OWN_CAR\nFLAG_OWN_REALTY\n\n\n\n\ncount\n356255.000000\n356255.000000\n\n\nmean\n0.339700\n0.693239\n\n\nstd\n0.473608\n0.461150\n\n\nmin\n0.000000\n0.000000\n\n\n25%\n0.000000\n0.000000\n\n\n50%\n0.000000\n1.000000\n\n\n75%\n1.000000\n1.000000\n\n\nmax\n1.000000\n1.000000\n\n\n\n\n\n\n\n\napplication_data['ORGANIZATION_TYPE'] = application_data.drop('ORGANIZATION_TYPE', axis=1)\n\n\nlbl = LabelEncoder()\ncat = application_data.select_dtypes(include=['object'])\ncols = cat.columns.values.tolist()\n\nfor c in cols:\n    lbl.fit(list(application_data[c].values))\n    application_data[c] = lbl.transform(list(application_data[c].values))"
  },
  {
    "objectID": "Credit Default Risk.html#data-joining-and-aggregation",
    "href": "Credit Default Risk.html#data-joining-and-aggregation",
    "title": "Introduction",
    "section": "Data Joining And Aggregation",
    "text": "Data Joining And Aggregation\n\n## Create your function to clean the data and return aggregated result\n\ndef aggregate(data, by):\n    ## Get categorical column names\n    cat = data.select_dtypes(include=['object'])\n    cols = cat.columns.values.tolist()\n    \n    ## loop through cat columns for label encoding\n    \n    for i in cols:\n        lbl = LabelEncoder() \n        lbl.fit(list(data[i].values)) \n        data[i] = lbl.transform(list(data[i].values))   \n    new_data = data.groupby(by).agg([sum, np.mean, np.std, min, max]) \n    # add _ in column names followed by the function applied\n    new_data.columns = [\"_\".join(x) for x in new_data.columns.ravel()]\n    new_data = new_data.reset_index()\n    return(new_data)"
  },
  {
    "objectID": "Credit Default Risk.html#bureau-dataset",
    "href": "Credit Default Risk.html#bureau-dataset",
    "title": "Introduction",
    "section": "Bureau dataset",
    "text": "Bureau dataset\n\nnas = bureau_bal.isna().sum()\nnas\n\nSK_ID_BUREAU      0\nMONTHS_BALANCE    0\nSTATUS            0\ndtype: int64\n\n\n\nsum_bureau_bal = aggregate(bureau_bal, by='SK_ID_BUREAU')\nprint(sum_bureau_bal.shape)\nsum_bureau_bal.head()\n\n(817395, 11)\n\n\n\n\n\n\n\n\n\nSK_ID_BUREAU\nMONTHS_BALANCE_sum\nMONTHS_BALANCE_mean\nMONTHS_BALANCE_std\nMONTHS_BALANCE_min\nMONTHS_BALANCE_max\nSTATUS_sum\nSTATUS_mean\nSTATUS_std\nSTATUS_min\nSTATUS_max\n\n\n\n\n0\n5001709\n-4656\n-48.0\n28.145456\n-96\n0\n593\n6.113402\n0.318731\n6\n7\n\n\n1\n5001710\n-3403\n-41.0\n24.103942\n-82\n0\n498\n6.000000\n1.600305\n0\n7\n\n\n2\n5001711\n-6\n-1.5\n1.290994\n-3\n0\n7\n1.750000\n3.500000\n0\n7\n\n\n3\n5001712\n-171\n-9.0\n5.627314\n-18\n0\n54\n2.842105\n3.077935\n0\n6\n\n\n4\n5001713\n-231\n-10.5\n6.493587\n-21\n0\n154\n7.000000\n0.000000\n7\n7\n\n\n\n\n\n\n\n\nbureau.head()\n\n\n\n\n\n\n\n\nSK_ID_CURR\nSK_ID_BUREAU\nCREDIT_ACTIVE\nCREDIT_CURRENCY\nDAYS_CREDIT\nCREDIT_DAY_OVERDUE\nDAYS_CREDIT_ENDDATE\nDAYS_ENDDATE_FACT\nAMT_CREDIT_MAX_OVERDUE\nCNT_CREDIT_PROLONG\nAMT_CREDIT_SUM\nAMT_CREDIT_SUM_DEBT\nAMT_CREDIT_SUM_LIMIT\nAMT_CREDIT_SUM_OVERDUE\nCREDIT_TYPE\nDAYS_CREDIT_UPDATE\nAMT_ANNUITY\n\n\n\n\n0\n215354\n5714462\nClosed\ncurrency 1\n-497\n0\n-153.0\n-153.0\nNaN\n0\n91323.0\n0.0\nNaN\n0.0\nConsumer credit\n-131\nNaN\n\n\n1\n215354\n5714463\nActive\ncurrency 1\n-208\n0\n1075.0\nNaN\nNaN\n0\n225000.0\n171342.0\nNaN\n0.0\nCredit card\n-20\nNaN\n\n\n2\n215354\n5714464\nActive\ncurrency 1\n-203\n0\n528.0\nNaN\nNaN\n0\n464323.5\nNaN\nNaN\n0.0\nConsumer credit\n-16\nNaN\n\n\n3\n215354\n5714465\nActive\ncurrency 1\n-203\n0\nNaN\nNaN\nNaN\n0\n90000.0\nNaN\nNaN\n0.0\nCredit card\n-16\nNaN\n\n\n4\n215354\n5714466\nActive\ncurrency 1\n-629\n0\n1197.0\nNaN\n77674.5\n0\n2700000.0\nNaN\nNaN\n0.0\nConsumer credit\n-21\nNaN\n\n\n\n\n\n\n\n\nbureau_data = pd.merge(bureau, sum_bureau_bal, on= 'SK_ID_BUREAU', how = 'left')\nprint(bureau_data.shape)\nbureau_data.head()\n\n(1716428, 27)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nSK_ID_BUREAU\nCREDIT_ACTIVE\nCREDIT_CURRENCY\nDAYS_CREDIT\nCREDIT_DAY_OVERDUE\nDAYS_CREDIT_ENDDATE\nDAYS_ENDDATE_FACT\nAMT_CREDIT_MAX_OVERDUE\nCNT_CREDIT_PROLONG\nAMT_CREDIT_SUM\nAMT_CREDIT_SUM_DEBT\nAMT_CREDIT_SUM_LIMIT\nAMT_CREDIT_SUM_OVERDUE\nCREDIT_TYPE\nDAYS_CREDIT_UPDATE\nAMT_ANNUITY\nMONTHS_BALANCE_sum\nMONTHS_BALANCE_mean\nMONTHS_BALANCE_std\nMONTHS_BALANCE_min\nMONTHS_BALANCE_max\nSTATUS_sum\nSTATUS_mean\nSTATUS_std\nSTATUS_min\nSTATUS_max\n\n\n\n\n0\n215354\n5714462\nClosed\ncurrency 1\n-497\n0\n-153.0\n-153.0\nNaN\n0\n91323.0\n0.0\nNaN\n0.0\nConsumer credit\n-131\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1\n215354\n5714463\nActive\ncurrency 1\n-208\n0\n1075.0\nNaN\nNaN\n0\n225000.0\n171342.0\nNaN\n0.0\nCredit card\n-20\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n2\n215354\n5714464\nActive\ncurrency 1\n-203\n0\n528.0\nNaN\nNaN\n0\n464323.5\nNaN\nNaN\n0.0\nConsumer credit\n-16\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n3\n215354\n5714465\nActive\ncurrency 1\n-203\n0\nNaN\nNaN\nNaN\n0\n90000.0\nNaN\nNaN\n0.0\nCredit card\n-16\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4\n215354\n5714466\nActive\ncurrency 1\n-629\n0\n1197.0\nNaN\n77674.5\n0\n2700000.0\nNaN\nNaN\n0.0\nConsumer credit\n-21\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n\n\n\n\nbureau_data.drop('SK_ID_BUREAU', axis=True, inplace=True)\naverage_bureau_data = aggregate(bureau_data, by='SK_ID_CURR')\n\nprint(average_bureau_data.shape)\naverage_bureau_data.head()\n\n(305811, 126)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nCREDIT_ACTIVE_sum\nCREDIT_ACTIVE_mean\nCREDIT_ACTIVE_std\nCREDIT_ACTIVE_min\nCREDIT_ACTIVE_max\nCREDIT_CURRENCY_sum\nCREDIT_CURRENCY_mean\nCREDIT_CURRENCY_std\nCREDIT_CURRENCY_min\nCREDIT_CURRENCY_max\nDAYS_CREDIT_sum\nDAYS_CREDIT_mean\nDAYS_CREDIT_std\nDAYS_CREDIT_min\nDAYS_CREDIT_max\nCREDIT_DAY_OVERDUE_sum\nCREDIT_DAY_OVERDUE_mean\nCREDIT_DAY_OVERDUE_std\nCREDIT_DAY_OVERDUE_min\nCREDIT_DAY_OVERDUE_max\nDAYS_CREDIT_ENDDATE_sum\nDAYS_CREDIT_ENDDATE_mean\nDAYS_CREDIT_ENDDATE_std\nDAYS_CREDIT_ENDDATE_min\nDAYS_CREDIT_ENDDATE_max\nDAYS_ENDDATE_FACT_sum\nDAYS_ENDDATE_FACT_mean\nDAYS_ENDDATE_FACT_std\nDAYS_ENDDATE_FACT_min\nDAYS_ENDDATE_FACT_max\nAMT_CREDIT_MAX_OVERDUE_sum\nAMT_CREDIT_MAX_OVERDUE_mean\nAMT_CREDIT_MAX_OVERDUE_std\nAMT_CREDIT_MAX_OVERDUE_min\nAMT_CREDIT_MAX_OVERDUE_max\nCNT_CREDIT_PROLONG_sum\nCNT_CREDIT_PROLONG_mean\nCNT_CREDIT_PROLONG_std\nCNT_CREDIT_PROLONG_min\nCNT_CREDIT_PROLONG_max\nAMT_CREDIT_SUM_sum\nAMT_CREDIT_SUM_mean\nAMT_CREDIT_SUM_std\nAMT_CREDIT_SUM_min\nAMT_CREDIT_SUM_max\nAMT_CREDIT_SUM_DEBT_sum\nAMT_CREDIT_SUM_DEBT_mean\nAMT_CREDIT_SUM_DEBT_std\nAMT_CREDIT_SUM_DEBT_min\nAMT_CREDIT_SUM_DEBT_max\nAMT_CREDIT_SUM_LIMIT_sum\nAMT_CREDIT_SUM_LIMIT_mean\nAMT_CREDIT_SUM_LIMIT_std\nAMT_CREDIT_SUM_LIMIT_min\nAMT_CREDIT_SUM_LIMIT_max\nAMT_CREDIT_SUM_OVERDUE_sum\nAMT_CREDIT_SUM_OVERDUE_mean\nAMT_CREDIT_SUM_OVERDUE_std\nAMT_CREDIT_SUM_OVERDUE_min\nAMT_CREDIT_SUM_OVERDUE_max\nCREDIT_TYPE_sum\nCREDIT_TYPE_mean\nCREDIT_TYPE_std\nCREDIT_TYPE_min\nCREDIT_TYPE_max\nDAYS_CREDIT_UPDATE_sum\nDAYS_CREDIT_UPDATE_mean\nDAYS_CREDIT_UPDATE_std\nDAYS_CREDIT_UPDATE_min\nDAYS_CREDIT_UPDATE_max\nAMT_ANNUITY_sum\nAMT_ANNUITY_mean\nAMT_ANNUITY_std\nAMT_ANNUITY_min\nAMT_ANNUITY_max\nMONTHS_BALANCE_sum_sum\nMONTHS_BALANCE_sum_mean\nMONTHS_BALANCE_sum_std\nMONTHS_BALANCE_sum_min\nMONTHS_BALANCE_sum_max\nMONTHS_BALANCE_mean_sum\nMONTHS_BALANCE_mean_mean\nMONTHS_BALANCE_mean_std\nMONTHS_BALANCE_mean_min\nMONTHS_BALANCE_mean_max\nMONTHS_BALANCE_std_sum\nMONTHS_BALANCE_std_mean\nMONTHS_BALANCE_std_std\nMONTHS_BALANCE_std_min\nMONTHS_BALANCE_std_max\nMONTHS_BALANCE_min_sum\nMONTHS_BALANCE_min_mean\nMONTHS_BALANCE_min_std\nMONTHS_BALANCE_min_min\nMONTHS_BALANCE_min_max\nMONTHS_BALANCE_max_sum\nMONTHS_BALANCE_max_mean\nMONTHS_BALANCE_max_std\nMONTHS_BALANCE_max_min\nMONTHS_BALANCE_max_max\nSTATUS_sum_sum\nSTATUS_sum_mean\nSTATUS_sum_std\nSTATUS_sum_min\nSTATUS_sum_max\nSTATUS_mean_sum\nSTATUS_mean_mean\nSTATUS_mean_std\nSTATUS_mean_min\nSTATUS_mean_max\nSTATUS_std_sum\nSTATUS_std_mean\nSTATUS_std_std\nSTATUS_std_min\nSTATUS_std_max\nSTATUS_min_sum\nSTATUS_min_mean\nSTATUS_min_std\nSTATUS_min_min\nSTATUS_min_max\nSTATUS_max_sum\nSTATUS_max_mean\nSTATUS_max_std\nSTATUS_max_min\nSTATUS_max_max\n\n\n\n\n0\n100001\n8\n1.142857\n1.069045\n0\n2\n0\n0.0\n0.0\n0\n0\n-5145\n-735.000000\n489.942514\n-1572\n-49\n0\n0.0\n0.0\n0\n0\n577.0\n82.428571\n1032.859277\n-1329.0\n1778.0\n-3302.0\n-825.500000\n369.078582\n-1328.0\n-544.0\n0.000\nNaN\nNaN\nNaN\nNaN\n0\n0.0\n0.0\n0\n0\n1453365.000\n207623.571429\n122544.544510\n85500.0\n378000.0\n596686.5\n85240.928571\n137485.631124\n0.0\n373239.0\n0.000\n0.00000\n0.0000\n0.0\n0.000\n0.0\n0.0\n0.0\n0.0\n0.0\n21\n3.000000\n0.000000\n3\n3\n-652\n-93.142857\n77.204120\n-155\n-6\n24817.5\n3545.357143\n4800.607529\n0.0\n10822.5\n-2800.0\n-400.000000\n445.241507\n-1326.0\n-1.0\n-82.5\n-11.785714\n8.025258\n-25.5\n-0.5\n50.638598\n7.234085\n4.636978\n0.707107\n15.154757\n-165.0\n-23.571429\n16.050515\n-51.0\n-1.0\n0.0\n0.0\n0.000000\n0.0\n0.0\n871.0\n124.428571\n113.707017\n0.0\n313.0\n29.099630\n4.157090\n2.332192\n0.0\n6.019231\n13.964274\n1.994896\n1.658706\n0.00000\n4.949747\n0.0\n0.0\n0.0\n0.0\n0.0\n41.0\n5.857143\n2.609506\n0.0\n7.0\n\n\n1\n100002\n12\n1.500000\n0.925820\n0\n2\n0\n0.0\n0.0\n0\n0\n-6992\n-874.000000\n431.451040\n-1437\n-103\n0\n0.0\n0.0\n0\n0\n-2094.0\n-349.000000\n767.490977\n-1072.0\n780.0\n-4185.0\n-697.500000\n515.992539\n-1185.0\n-36.0\n8405.145\n1681.029\n2363.2469\n0.0\n5043.645\n0\n0.0\n0.0\n0\n0\n865055.565\n108131.945625\n146075.557435\n0.0\n450000.0\n245781.0\n49156.200000\n109916.604716\n0.0\n245781.0\n31988.565\n7997.14125\n15994.2825\n0.0\n31988.565\n0.0\n0.0\n0.0\n0.0\n0.0\n28\n3.500000\n0.534522\n3\n4\n-3999\n-499.875000\n518.522472\n-1185\n-7\n0.0\n0.000000\n0.000000\n0.0\n0.0\n-2701.0\n-337.625000\n236.107686\n-632.0\n-6.0\n-175.0\n-21.875000\n12.176529\n-39.5\n-1.5\n32.880337\n4.110042\n1.839789\n1.290994\n6.493587\n-226.0\n-28.250000\n14.159802\n-47.0\n-3.0\n-124.0\n-15.5\n10.783585\n-32.0\n0.0\n270.0\n33.750000\n22.852008\n2.0\n78.0\n19.534091\n2.441761\n1.371137\n0.5\n4.875000\n21.033778\n2.629222\n0.986184\n0.57735\n4.041452\n0.0\n0.0\n0.0\n0.0\n0.0\n49.0\n6.125000\n2.100170\n1.0\n7.0\n\n\n2\n100003\n6\n1.500000\n1.000000\n0\n2\n0\n0.0\n0.0\n0\n0\n-5603\n-1400.750000\n909.826128\n-2586\n-606\n0\n0.0\n0.0\n0\n0\n-2178.0\n-544.500000\n1492.770467\n-2434.0\n1216.0\n-3292.0\n-1097.333333\n896.097279\n-2131.0\n-540.0\n0.000\n0.000\n0.0000\n0.0\n0.000\n0\n0.0\n0.0\n0\n0\n1017400.500\n254350.125000\n372269.465535\n22248.0\n810000.0\n0.0\n0.000000\n0.000000\n0.0\n0.0\n810000.000\n202500.00000\n405000.0000\n0.0\n810000.000\n0.0\n0.0\n0.0\n0.0\n0.0\n14\n3.500000\n0.577350\n3\n4\n-3264\n-816.000000\n908.053963\n-2131\n-43\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n\n\n3\n100004\n4\n2.000000\n0.000000\n2\n2\n0\n0.0\n0.0\n0\n0\n-1734\n-867.000000\n649.124025\n-1326\n-408\n0\n0.0\n0.0\n0\n0\n-977.0\n-488.500000\n150.613744\n-595.0\n-382.0\n-1065.0\n-532.500000\n212.839141\n-683.0\n-382.0\n0.000\n0.000\nNaN\n0.0\n0.000\n0\n0.0\n0.0\n0\n0\n189037.800\n94518.900000\n26.728636\n94500.0\n94537.8\n0.0\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.00000\n0.0000\n0.0\n0.000\n0.0\n0.0\n0.0\n0.0\n0.0\n6\n3.000000\n0.000000\n3\n3\n-1064\n-532.000000\n212.132034\n-682\n-382\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n\n\n4\n100005\n2\n0.666667\n1.154701\n0\n2\n0\n0.0\n0.0\n0\n0\n-572\n-190.666667\n162.297053\n-373\n-62\n0\n0.0\n0.0\n0\n0\n1318.0\n439.333333\n776.274007\n-128.0\n1324.0\n-123.0\n-123.000000\nNaN\n-123.0\n-123.0\n0.000\n0.000\nNaN\n0.0\n0.000\n0\n0.0\n0.0\n0\n0\n657126.000\n219042.000000\n303238.426806\n29826.0\n568800.0\n568408.5\n189469.500000\n306503.339003\n0.0\n543087.0\n0.000\n0.00000\n0.0000\n0.0\n0.000\n0.0\n0.0\n0.0\n0.0\n0.0\n10\n3.333333\n0.577350\n3\n4\n-163\n-54.333333\n58.594653\n-121\n-11\n4261.5\n1420.500000\n2460.378172\n0.0\n4261.5\n-91.0\n-30.333333\n41.428654\n-78.0\n-3.0\n-9.0\n-3.000000\n2.645751\n-6.0\n-1.0\n6.475579\n2.158526\n1.531169\n1.000000\n3.894440\n-18.0\n-6.000000\n5.291503\n-12.0\n-2.0\n0.0\n0.0\n0.000000\n0.0\n0.0\n44.0\n14.666667\n19.655364\n0.0\n37.0\n5.179487\n1.726496\n1.517016\n0.0\n2.846154\n7.252011\n2.417337\n2.134300\n0.00000\n4.041452\n0.0\n0.0\n0.0\n0.0\n0.0\n14.0\n4.666667\n4.041452\n0.0\n7.0"
  },
  {
    "objectID": "Credit Default Risk.html#cash-dataset",
    "href": "Credit Default Risk.html#cash-dataset",
    "title": "Introduction",
    "section": "Cash Dataset",
    "text": "Cash Dataset\n\nprint(cash_bal.shape)\ncash_bal.head()\n\n(10001358, 8)\n\n\n\n\n\n\n\n\n\nSK_ID_PREV\nSK_ID_CURR\nMONTHS_BALANCE\nCNT_INSTALMENT\nCNT_INSTALMENT_FUTURE\nNAME_CONTRACT_STATUS\nSK_DPD\nSK_DPD_DEF\n\n\n\n\n0\n1803195\n182943\n-31\n48.0\n45.0\nActive\n0\n0\n\n\n1\n1715348\n367990\n-33\n36.0\n35.0\nActive\n0\n0\n\n\n2\n1784872\n397406\n-32\n12.0\n9.0\nActive\n0\n0\n\n\n3\n1903291\n269225\n-35\n48.0\n42.0\nActive\n0\n0\n\n\n4\n2341044\n334279\n-35\n36.0\n35.0\nActive\n0\n0\n\n\n\n\n\n\n\n\ncash_bal = cash_bal.drop(['SK_ID_PREV'], axis=1)\nagg_cash_bal = aggregate(cash_bal, by='SK_ID_CURR')\nprint(agg_cash_bal.shape)\nagg_cash_bal.head()\n\n(337252, 31)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nMONTHS_BALANCE_sum\nMONTHS_BALANCE_mean\nMONTHS_BALANCE_std\nMONTHS_BALANCE_min\nMONTHS_BALANCE_max\nCNT_INSTALMENT_sum\nCNT_INSTALMENT_mean\nCNT_INSTALMENT_std\nCNT_INSTALMENT_min\nCNT_INSTALMENT_max\nCNT_INSTALMENT_FUTURE_sum\nCNT_INSTALMENT_FUTURE_mean\nCNT_INSTALMENT_FUTURE_std\nCNT_INSTALMENT_FUTURE_min\nCNT_INSTALMENT_FUTURE_max\nNAME_CONTRACT_STATUS_sum\nNAME_CONTRACT_STATUS_mean\nNAME_CONTRACT_STATUS_std\nNAME_CONTRACT_STATUS_min\nNAME_CONTRACT_STATUS_max\nSK_DPD_sum\nSK_DPD_mean\nSK_DPD_std\nSK_DPD_min\nSK_DPD_max\nSK_DPD_DEF_sum\nSK_DPD_DEF_mean\nSK_DPD_DEF_std\nSK_DPD_DEF_min\nSK_DPD_DEF_max\n\n\n\n\n0\n100001\n-653\n-72.555556\n20.863312\n-96\n-53\n36.0\n4.000000\n0.000000\n4.0\n4.0\n13.0\n1.444444\n1.424001\n0.0\n4.0\n8\n0.888889\n1.763834\n0\n4\n7\n0.777778\n2.333333\n0\n7\n7\n0.777778\n2.333333\n0\n7\n\n\n1\n100002\n-190\n-10.000000\n5.627314\n-19\n-1\n456.0\n24.000000\n0.000000\n24.0\n24.0\n285.0\n15.000000\n5.627314\n6.0\n24.0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n2\n100003\n-1226\n-43.785714\n24.640162\n-77\n-18\n283.0\n10.107143\n2.806597\n6.0\n12.0\n162.0\n5.785714\n3.842811\n0.0\n12.0\n8\n0.285714\n1.049061\n0\n4\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n3\n100004\n-102\n-25.500000\n1.290994\n-27\n-24\n15.0\n3.750000\n0.500000\n3.0\n4.0\n9.0\n2.250000\n1.707825\n0.0\n4.0\n4\n1.000000\n2.000000\n0\n4\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n4\n100005\n-220\n-20.000000\n3.316625\n-25\n-15\n117.0\n11.700000\n0.948683\n9.0\n12.0\n72.0\n7.200000\n3.614784\n0.0\n12.0\n11\n1.000000\n2.323790\n0\n7\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0"
  },
  {
    "objectID": "Credit Default Risk.html#previous-application-dataset",
    "href": "Credit Default Risk.html#previous-application-dataset",
    "title": "Introduction",
    "section": "Previous Application Dataset",
    "text": "Previous Application Dataset\n\nprint(prev_application.shape)\nprev_application.head()\n\n(1670214, 37)\n\n\n\n\n\n\n\n\n\nSK_ID_PREV\nSK_ID_CURR\nNAME_CONTRACT_TYPE\nAMT_ANNUITY\nAMT_APPLICATION\nAMT_CREDIT\nAMT_DOWN_PAYMENT\nAMT_GOODS_PRICE\nWEEKDAY_APPR_PROCESS_START\nHOUR_APPR_PROCESS_START\nFLAG_LAST_APPL_PER_CONTRACT\nNFLAG_LAST_APPL_IN_DAY\nRATE_DOWN_PAYMENT\nRATE_INTEREST_PRIMARY\nRATE_INTEREST_PRIVILEGED\nNAME_CASH_LOAN_PURPOSE\nNAME_CONTRACT_STATUS\nDAYS_DECISION\nNAME_PAYMENT_TYPE\nCODE_REJECT_REASON\nNAME_TYPE_SUITE\nNAME_CLIENT_TYPE\nNAME_GOODS_CATEGORY\nNAME_PORTFOLIO\nNAME_PRODUCT_TYPE\nCHANNEL_TYPE\nSELLERPLACE_AREA\nNAME_SELLER_INDUSTRY\nCNT_PAYMENT\nNAME_YIELD_GROUP\nPRODUCT_COMBINATION\nDAYS_FIRST_DRAWING\nDAYS_FIRST_DUE\nDAYS_LAST_DUE_1ST_VERSION\nDAYS_LAST_DUE\nDAYS_TERMINATION\nNFLAG_INSURED_ON_APPROVAL\n\n\n\n\n0\n2030495\n271877\nConsumer loans\n1730.430\n17145.0\n17145.0\n0.0\n17145.0\nSATURDAY\n15\nY\n1\n0.0\n0.182832\n0.867336\nXAP\nApproved\n-73\nCash through the bank\nXAP\nNaN\nRepeater\nMobile\nPOS\nXNA\nCountry-wide\n35\nConnectivity\n12.0\nmiddle\nPOS mobile with interest\n365243.0\n-42.0\n300.0\n-42.0\n-37.0\n0.0\n\n\n1\n2802425\n108129\nCash loans\n25188.615\n607500.0\n679671.0\nNaN\n607500.0\nTHURSDAY\n11\nY\n1\nNaN\nNaN\nNaN\nXNA\nApproved\n-164\nXNA\nXAP\nUnaccompanied\nRepeater\nXNA\nCash\nx-sell\nContact center\n-1\nXNA\n36.0\nlow_action\nCash X-Sell: low\n365243.0\n-134.0\n916.0\n365243.0\n365243.0\n1.0\n\n\n2\n2523466\n122040\nCash loans\n15060.735\n112500.0\n136444.5\nNaN\n112500.0\nTUESDAY\n11\nY\n1\nNaN\nNaN\nNaN\nXNA\nApproved\n-301\nCash through the bank\nXAP\nSpouse, partner\nRepeater\nXNA\nCash\nx-sell\nCredit and cash offices\n-1\nXNA\n12.0\nhigh\nCash X-Sell: high\n365243.0\n-271.0\n59.0\n365243.0\n365243.0\n1.0\n\n\n3\n2819243\n176158\nCash loans\n47041.335\n450000.0\n470790.0\nNaN\n450000.0\nMONDAY\n7\nY\n1\nNaN\nNaN\nNaN\nXNA\nApproved\n-512\nCash through the bank\nXAP\nNaN\nRepeater\nXNA\nCash\nx-sell\nCredit and cash offices\n-1\nXNA\n12.0\nmiddle\nCash X-Sell: middle\n365243.0\n-482.0\n-152.0\n-182.0\n-177.0\n1.0\n\n\n4\n1784265\n202054\nCash loans\n31924.395\n337500.0\n404055.0\nNaN\n337500.0\nTHURSDAY\n9\nY\n1\nNaN\nNaN\nNaN\nRepairs\nRefused\n-781\nCash through the bank\nHC\nNaN\nRepeater\nXNA\nCash\nwalk-in\nCredit and cash offices\n-1\nXNA\n24.0\nhigh\nCash Street: high\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n\n\n\n\nprev_application = prev_application.drop(['SK_ID_PREV'], axis=1)\nagg_prev_app = aggregate(prev_application, by='SK_ID_CURR')\nprint(agg_prev_app.shape)\nagg_prev_app.head()\n\n(338857, 176)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nNAME_CONTRACT_TYPE_sum\nNAME_CONTRACT_TYPE_mean\nNAME_CONTRACT_TYPE_std\nNAME_CONTRACT_TYPE_min\nNAME_CONTRACT_TYPE_max\nAMT_ANNUITY_sum\nAMT_ANNUITY_mean\nAMT_ANNUITY_std\nAMT_ANNUITY_min\nAMT_ANNUITY_max\nAMT_APPLICATION_sum\nAMT_APPLICATION_mean\nAMT_APPLICATION_std\nAMT_APPLICATION_min\nAMT_APPLICATION_max\nAMT_CREDIT_sum\nAMT_CREDIT_mean\nAMT_CREDIT_std\nAMT_CREDIT_min\nAMT_CREDIT_max\nAMT_DOWN_PAYMENT_sum\nAMT_DOWN_PAYMENT_mean\nAMT_DOWN_PAYMENT_std\nAMT_DOWN_PAYMENT_min\nAMT_DOWN_PAYMENT_max\nAMT_GOODS_PRICE_sum\nAMT_GOODS_PRICE_mean\nAMT_GOODS_PRICE_std\nAMT_GOODS_PRICE_min\nAMT_GOODS_PRICE_max\nWEEKDAY_APPR_PROCESS_START_sum\nWEEKDAY_APPR_PROCESS_START_mean\nWEEKDAY_APPR_PROCESS_START_std\nWEEKDAY_APPR_PROCESS_START_min\nWEEKDAY_APPR_PROCESS_START_max\nHOUR_APPR_PROCESS_START_sum\nHOUR_APPR_PROCESS_START_mean\nHOUR_APPR_PROCESS_START_std\nHOUR_APPR_PROCESS_START_min\nHOUR_APPR_PROCESS_START_max\nFLAG_LAST_APPL_PER_CONTRACT_sum\nFLAG_LAST_APPL_PER_CONTRACT_mean\nFLAG_LAST_APPL_PER_CONTRACT_std\nFLAG_LAST_APPL_PER_CONTRACT_min\nFLAG_LAST_APPL_PER_CONTRACT_max\nNFLAG_LAST_APPL_IN_DAY_sum\nNFLAG_LAST_APPL_IN_DAY_mean\nNFLAG_LAST_APPL_IN_DAY_std\nNFLAG_LAST_APPL_IN_DAY_min\nNFLAG_LAST_APPL_IN_DAY_max\nRATE_DOWN_PAYMENT_sum\nRATE_DOWN_PAYMENT_mean\nRATE_DOWN_PAYMENT_std\nRATE_DOWN_PAYMENT_min\nRATE_DOWN_PAYMENT_max\nRATE_INTEREST_PRIMARY_sum\nRATE_INTEREST_PRIMARY_mean\nRATE_INTEREST_PRIMARY_std\nRATE_INTEREST_PRIMARY_min\nRATE_INTEREST_PRIMARY_max\nRATE_INTEREST_PRIVILEGED_sum\nRATE_INTEREST_PRIVILEGED_mean\nRATE_INTEREST_PRIVILEGED_std\nRATE_INTEREST_PRIVILEGED_min\nRATE_INTEREST_PRIVILEGED_max\nNAME_CASH_LOAN_PURPOSE_sum\nNAME_CASH_LOAN_PURPOSE_mean\nNAME_CASH_LOAN_PURPOSE_std\nNAME_CASH_LOAN_PURPOSE_min\nNAME_CASH_LOAN_PURPOSE_max\nNAME_CONTRACT_STATUS_sum\nNAME_CONTRACT_STATUS_mean\nNAME_CONTRACT_STATUS_std\nNAME_CONTRACT_STATUS_min\nNAME_CONTRACT_STATUS_max\nDAYS_DECISION_sum\nDAYS_DECISION_mean\nDAYS_DECISION_std\nDAYS_DECISION_min\nDAYS_DECISION_max\nNAME_PAYMENT_TYPE_sum\nNAME_PAYMENT_TYPE_mean\nNAME_PAYMENT_TYPE_std\nNAME_PAYMENT_TYPE_min\nNAME_PAYMENT_TYPE_max\nCODE_REJECT_REASON_sum\nCODE_REJECT_REASON_mean\nCODE_REJECT_REASON_std\nCODE_REJECT_REASON_min\nCODE_REJECT_REASON_max\nNAME_TYPE_SUITE_sum\nNAME_TYPE_SUITE_mean\nNAME_TYPE_SUITE_std\nNAME_TYPE_SUITE_min\nNAME_TYPE_SUITE_max\nNAME_CLIENT_TYPE_sum\nNAME_CLIENT_TYPE_mean\nNAME_CLIENT_TYPE_std\nNAME_CLIENT_TYPE_min\nNAME_CLIENT_TYPE_max\nNAME_GOODS_CATEGORY_sum\nNAME_GOODS_CATEGORY_mean\nNAME_GOODS_CATEGORY_std\nNAME_GOODS_CATEGORY_min\nNAME_GOODS_CATEGORY_max\nNAME_PORTFOLIO_sum\nNAME_PORTFOLIO_mean\nNAME_PORTFOLIO_std\nNAME_PORTFOLIO_min\nNAME_PORTFOLIO_max\nNAME_PRODUCT_TYPE_sum\nNAME_PRODUCT_TYPE_mean\nNAME_PRODUCT_TYPE_std\nNAME_PRODUCT_TYPE_min\nNAME_PRODUCT_TYPE_max\nCHANNEL_TYPE_sum\nCHANNEL_TYPE_mean\nCHANNEL_TYPE_std\nCHANNEL_TYPE_min\nCHANNEL_TYPE_max\nSELLERPLACE_AREA_sum\nSELLERPLACE_AREA_mean\nSELLERPLACE_AREA_std\nSELLERPLACE_AREA_min\nSELLERPLACE_AREA_max\nNAME_SELLER_INDUSTRY_sum\nNAME_SELLER_INDUSTRY_mean\nNAME_SELLER_INDUSTRY_std\nNAME_SELLER_INDUSTRY_min\nNAME_SELLER_INDUSTRY_max\nCNT_PAYMENT_sum\nCNT_PAYMENT_mean\nCNT_PAYMENT_std\nCNT_PAYMENT_min\nCNT_PAYMENT_max\nNAME_YIELD_GROUP_sum\nNAME_YIELD_GROUP_mean\nNAME_YIELD_GROUP_std\nNAME_YIELD_GROUP_min\nNAME_YIELD_GROUP_max\nPRODUCT_COMBINATION_sum\nPRODUCT_COMBINATION_mean\nPRODUCT_COMBINATION_std\nPRODUCT_COMBINATION_min\nPRODUCT_COMBINATION_max\nDAYS_FIRST_DRAWING_sum\nDAYS_FIRST_DRAWING_mean\nDAYS_FIRST_DRAWING_std\nDAYS_FIRST_DRAWING_min\nDAYS_FIRST_DRAWING_max\nDAYS_FIRST_DUE_sum\nDAYS_FIRST_DUE_mean\nDAYS_FIRST_DUE_std\nDAYS_FIRST_DUE_min\nDAYS_FIRST_DUE_max\nDAYS_LAST_DUE_1ST_VERSION_sum\nDAYS_LAST_DUE_1ST_VERSION_mean\nDAYS_LAST_DUE_1ST_VERSION_std\nDAYS_LAST_DUE_1ST_VERSION_min\nDAYS_LAST_DUE_1ST_VERSION_max\nDAYS_LAST_DUE_sum\nDAYS_LAST_DUE_mean\nDAYS_LAST_DUE_std\nDAYS_LAST_DUE_min\nDAYS_LAST_DUE_max\nDAYS_TERMINATION_sum\nDAYS_TERMINATION_mean\nDAYS_TERMINATION_std\nDAYS_TERMINATION_min\nDAYS_TERMINATION_max\nNFLAG_INSURED_ON_APPROVAL_sum\nNFLAG_INSURED_ON_APPROVAL_mean\nNFLAG_INSURED_ON_APPROVAL_std\nNFLAG_INSURED_ON_APPROVAL_min\nNFLAG_INSURED_ON_APPROVAL_max\n\n\n\n\n0\n100001\n1\n1.000000\nNaN\n1\n1\n3951.000\n3951.000\nNaN\n3951.000\n3951.000\n24835.5\n24835.50\nNaN\n24835.5\n24835.5\n23787.0\n23787.00\nNaN\n23787.0\n23787.0\n2520.0\n2520.0\nNaN\n2520.0\n2520.0\n24835.5\n24835.5\nNaN\n24835.5\n24835.5\n0\n0.000000\nNaN\n0\n0\n13\n13.000000\nNaN\n13\n13\n1\n1.0\nNaN\n1\n1\n1\n1.0\nNaN\n1\n1\n0.104326\n0.104326\nNaN\n0.104326\n0.104326\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n23\n23.000000\nNaN\n23\n23\n0\n0.0\nNaN\n0\n0\n-1740\n-1740.0\nNaN\n-1740\n-1740\n0\n0.0\nNaN\n0\n0\n7\n7.0\nNaN\n7\n7\n1\n1.000000\nNaN\n1\n1\n1\n1.000000\nNaN\n1\n1\n19\n19.0\nNaN\n19\n19\n3\n3.000000\nNaN\n3\n3\n0\n0.000000\nNaN\n0\n0\n4\n4.000000\nNaN\n4\n4\n23\n23.0\nNaN\n23\n23\n2\n2.000000\nNaN\n2\n2\n8.0\n8.0\nNaN\n8.0\n8.0\n1\n1.000000\nNaN\n1\n1\n13\n13.0\nNaN\n13\n13\n365243.0\n365243.0\nNaN\n365243.0\n365243.0\n-1709.0\n-1709.000000\nNaN\n-1709.0\n-1709.0\n-1499.0\n-1499.000000\nNaN\n-1499.0\n-1499.0\n-1619.0\n-1619.000000\nNaN\n-1619.0\n-1619.0\n-1612.0\n-1612.000000\nNaN\n-1612.0\n-1612.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n\n\n1\n100002\n1\n1.000000\nNaN\n1\n1\n9251.775\n9251.775\nNaN\n9251.775\n9251.775\n179055.0\n179055.00\nNaN\n179055.0\n179055.0\n179055.0\n179055.00\nNaN\n179055.0\n179055.0\n0.0\n0.0\nNaN\n0.0\n0.0\n179055.0\n179055.0\nNaN\n179055.0\n179055.0\n2\n2.000000\nNaN\n2\n2\n9\n9.000000\nNaN\n9\n9\n1\n1.0\nNaN\n1\n1\n1\n1.0\nNaN\n1\n1\n0.000000\n0.000000\nNaN\n0.000000\n0.000000\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n23\n23.000000\nNaN\n23\n23\n0\n0.0\nNaN\n0\n0\n-606\n-606.0\nNaN\n-606\n-606\n3\n3.0\nNaN\n3\n3\n7\n7.0\nNaN\n7\n7\n7\n7.000000\nNaN\n7\n7\n0\n0.000000\nNaN\n0\n0\n25\n25.0\nNaN\n25\n25\n3\n3.000000\nNaN\n3\n3\n0\n0.000000\nNaN\n0\n0\n7\n7.000000\nNaN\n7\n7\n500\n500.0\nNaN\n500\n500\n0\n0.000000\nNaN\n0\n0\n24.0\n24.0\nNaN\n24.0\n24.0\n3\n3.000000\nNaN\n3\n3\n15\n15.0\nNaN\n15\n15\n365243.0\n365243.0\nNaN\n365243.0\n365243.0\n-565.0\n-565.000000\nNaN\n-565.0\n-565.0\n125.0\n125.000000\nNaN\n125.0\n125.0\n-25.0\n-25.000000\nNaN\n-25.0\n-25.0\n-17.0\n-17.000000\nNaN\n-17.0\n-17.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n\n\n2\n100003\n2\n0.666667\n0.577350\n0\n1\n169661.970\n56553.990\n46332.557777\n6737.310\n98356.995\n1306309.5\n435436.50\n424161.620549\n68809.5\n900000.0\n1452573.0\n484191.00\n497949.861808\n68053.5\n1035882.0\n6885.0\n3442.5\n4868.430188\n0.0\n6885.0\n1306309.5\n435436.5\n424161.620549\n68809.5\n900000.0\n5\n1.666667\n1.527525\n0\n3\n44\n14.666667\n2.516611\n12\n17\n3\n1.0\n0.0\n1\n1\n3\n1.0\n0.0\n1\n1\n0.100061\n0.050030\n0.070754\n0.000000\n0.100061\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n70\n23.333333\n0.577350\n23\n24\n0\n0.0\n0.000000\n0\n0\n-3915\n-1305.0\n898.138631\n-2341\n-746\n3\n1.0\n1.732051\n0\n3\n21\n7.0\n0.0\n7\n7\n8\n2.666667\n2.886751\n1\n6\n4\n1.333333\n0.577350\n1\n2\n45\n15.0\n10.583005\n7\n27\n8\n2.666667\n0.577350\n2\n3\n2\n0.666667\n1.154701\n0\n2\n16\n5.333333\n1.527525\n4\n7\n1599\n533.0\n757.540098\n-1\n1400\n19\n6.333333\n3.214550\n4\n10\n30.0\n10.0\n3.464102\n6.0\n12.0\n11\n3.666667\n0.577350\n3\n4\n27\n9.0\n2.000000\n7\n11\n1095729.0\n365243.0\n0.0\n365243.0\n365243.0\n-3823.0\n-1274.333333\n897.827563\n-2310.0\n-716.0\n-3013.0\n-1004.333333\n854.97037\n-1980.0\n-386.0\n-3163.0\n-1054.333333\n803.569744\n-1980.0\n-536.0\n-3142.0\n-1047.333333\n806.196213\n-1976.0\n-527.0\n2.0\n0.666667\n0.57735\n0.0\n1.0\n\n\n3\n100004\n1\n1.000000\nNaN\n1\n1\n5357.250\n5357.250\nNaN\n5357.250\n5357.250\n24282.0\n24282.00\nNaN\n24282.0\n24282.0\n20106.0\n20106.00\nNaN\n20106.0\n20106.0\n4860.0\n4860.0\nNaN\n4860.0\n4860.0\n24282.0\n24282.0\nNaN\n24282.0\n24282.0\n0\n0.000000\nNaN\n0\n0\n5\n5.000000\nNaN\n5\n5\n1\n1.0\nNaN\n1\n1\n1\n1.0\nNaN\n1\n1\n0.212008\n0.212008\nNaN\n0.212008\n0.212008\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n23\n23.000000\nNaN\n23\n23\n0\n0.0\nNaN\n0\n0\n-815\n-815.0\nNaN\n-815\n-815\n0\n0.0\nNaN\n0\n0\n7\n7.0\nNaN\n7\n7\n6\n6.000000\nNaN\n6\n6\n0\n0.000000\nNaN\n0\n0\n19\n19.0\nNaN\n19\n19\n3\n3.000000\nNaN\n3\n3\n0\n0.000000\nNaN\n0\n0\n6\n6.000000\nNaN\n6\n6\n30\n30.0\nNaN\n30\n30\n2\n2.000000\nNaN\n2\n2\n4.0\n4.0\nNaN\n4.0\n4.0\n4\n4.000000\nNaN\n4\n4\n14\n14.0\nNaN\n14\n14\n365243.0\n365243.0\nNaN\n365243.0\n365243.0\n-784.0\n-784.000000\nNaN\n-784.0\n-784.0\n-694.0\n-694.000000\nNaN\n-694.0\n-694.0\n-724.0\n-724.000000\nNaN\n-724.0\n-724.0\n-714.0\n-714.000000\nNaN\n-714.0\n-714.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n\n\n4\n100005\n1\n0.500000\n0.707107\n0\n1\n4813.200\n4813.200\nNaN\n4813.200\n4813.200\n44617.5\n22308.75\n31549.336810\n0.0\n44617.5\n40153.5\n20076.75\n28392.812138\n0.0\n40153.5\n4464.0\n4464.0\nNaN\n4464.0\n4464.0\n44617.5\n44617.5\nNaN\n44617.5\n44617.5\n4\n2.000000\n2.828427\n0\n4\n21\n10.500000\n0.707107\n10\n11\n2\n1.0\n0.0\n1\n1\n2\n1.0\n0.0\n1\n1\n0.108964\n0.108964\nNaN\n0.108964\n0.108964\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n47\n23.500000\n0.707107\n23\n24\n1\n0.5\n0.707107\n0\n1\n-1072\n-536.0\n312.541197\n-757\n-315\n3\n1.5\n2.121320\n0\n3\n14\n7.0\n0.0\n7\n7\n14\n7.000000\n0.000000\n7\n7\n2\n1.000000\n1.414214\n0\n2\n46\n23.0\n5.656854\n19\n27\n7\n3.500000\n0.707107\n3\n4\n0\n0.000000\n0.000000\n0\n0\n9\n4.500000\n0.707107\n4\n5\n36\n18.0\n26.870058\n-1\n37\n12\n6.000000\n5.656854\n2\n10\n12.0\n12.0\nNaN\n12.0\n12.0\n1\n0.500000\n0.707107\n0\n1\n15\n7.5\n7.778175\n2\n13\n365243.0\n365243.0\nNaN\n365243.0\n365243.0\n-706.0\n-706.000000\nNaN\n-706.0\n-706.0\n-376.0\n-376.000000\nNaN\n-376.0\n-376.0\n-466.0\n-466.000000\nNaN\n-466.0\n-466.0\n-460.0\n-460.000000\nNaN\n-460.0\n-460.0\n0.0\n0.000000\nNaN\n0.0\n0.0"
  },
  {
    "objectID": "Credit Default Risk.html#installment-payments-dataset",
    "href": "Credit Default Risk.html#installment-payments-dataset",
    "title": "Introduction",
    "section": "Installment Payments Dataset",
    "text": "Installment Payments Dataset\n\nprint(installment_payment.shape)\ninstallment_payment.head()\n\n(13605401, 8)\n\n\n\n\n\n\n\n\n\nSK_ID_PREV\nSK_ID_CURR\nNUM_INSTALMENT_VERSION\nNUM_INSTALMENT_NUMBER\nDAYS_INSTALMENT\nDAYS_ENTRY_PAYMENT\nAMT_INSTALMENT\nAMT_PAYMENT\n\n\n\n\n0\n1054186\n161674\n1.0\n6\n-1180.0\n-1187.0\n6948.360\n6948.360\n\n\n1\n1330831\n151639\n0.0\n34\n-2156.0\n-2156.0\n1716.525\n1716.525\n\n\n2\n2085231\n193053\n2.0\n1\n-63.0\n-63.0\n25425.000\n25425.000\n\n\n3\n2452527\n199697\n1.0\n3\n-2418.0\n-2426.0\n24350.130\n24350.130\n\n\n4\n2714724\n167756\n1.0\n2\n-1383.0\n-1366.0\n2165.040\n2160.585\n\n\n\n\n\n\n\n\ninstallment_payment = installment_payment.drop(['SK_ID_PREV'], axis=1)\nagg_ins_pay = aggregate(installment_payment, by='SK_ID_CURR')\nprint(agg_ins_pay.shape)\nagg_ins_pay.head()\n\n(339587, 31)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nNUM_INSTALMENT_VERSION_sum\nNUM_INSTALMENT_VERSION_mean\nNUM_INSTALMENT_VERSION_std\nNUM_INSTALMENT_VERSION_min\nNUM_INSTALMENT_VERSION_max\nNUM_INSTALMENT_NUMBER_sum\nNUM_INSTALMENT_NUMBER_mean\nNUM_INSTALMENT_NUMBER_std\nNUM_INSTALMENT_NUMBER_min\nNUM_INSTALMENT_NUMBER_max\nDAYS_INSTALMENT_sum\nDAYS_INSTALMENT_mean\nDAYS_INSTALMENT_std\nDAYS_INSTALMENT_min\nDAYS_INSTALMENT_max\nDAYS_ENTRY_PAYMENT_sum\nDAYS_ENTRY_PAYMENT_mean\nDAYS_ENTRY_PAYMENT_std\nDAYS_ENTRY_PAYMENT_min\nDAYS_ENTRY_PAYMENT_max\nAMT_INSTALMENT_sum\nAMT_INSTALMENT_mean\nAMT_INSTALMENT_std\nAMT_INSTALMENT_min\nAMT_INSTALMENT_max\nAMT_PAYMENT_sum\nAMT_PAYMENT_mean\nAMT_PAYMENT_std\nAMT_PAYMENT_min\nAMT_PAYMENT_max\n\n\n\n\n0\n100001\n8.0\n1.142857\n0.377964\n1.0\n2.0\n19\n2.714286\n1.112697\n1\n4\n-15314.0\n-2187.714286\n653.989733\n-2916.0\n-1619.0\n-15365.0\n-2195.000000\n643.904237\n-2916.0\n-1628.0\n41195.925\n5885.132143\n5076.676624\n3951.000\n17397.900\n41195.925\n5885.132143\n5076.676624\n3951.000\n17397.900\n\n\n1\n100002\n20.0\n1.052632\n0.229416\n1.0\n2.0\n190\n10.000000\n5.627314\n1\n19\n-5605.0\n-295.000000\n168.819430\n-565.0\n-25.0\n-5993.0\n-315.421053\n172.058877\n-587.0\n-49.0\n219625.695\n11559.247105\n10058.037722\n9251.775\n53093.745\n219625.695\n11559.247105\n10058.037722\n9251.775\n53093.745\n\n\n2\n100003\n26.0\n1.040000\n0.200000\n1.0\n2.0\n127\n5.080000\n3.134751\n1\n12\n-34454.0\n-1378.160000\n757.453556\n-2310.0\n-536.0\n-34633.0\n-1385.320000\n757.325432\n-2324.0\n-544.0\n1618864.650\n64754.586000\n110542.592300\n6662.970\n560835.360\n1618864.650\n64754.586000\n110542.592300\n6662.970\n560835.360\n\n\n3\n100004\n4.0\n1.333333\n0.577350\n1.0\n2.0\n6\n2.000000\n1.000000\n1\n3\n-2262.0\n-754.000000\n30.000000\n-784.0\n-724.0\n-2285.0\n-761.666667\n34.019602\n-795.0\n-727.0\n21288.465\n7096.155000\n3011.871810\n5357.250\n10573.965\n21288.465\n7096.155000\n3011.871810\n5357.250\n10573.965\n\n\n4\n100005\n10.0\n1.111111\n0.333333\n1.0\n2.0\n45\n5.000000\n2.738613\n1\n9\n-5274.0\n-586.000000\n82.158384\n-706.0\n-466.0\n-5486.0\n-609.555556\n90.554005\n-736.0\n-470.0\n56161.845\n6240.205000\n4281.015000\n4813.200\n17656.245\n56161.845\n6240.205000\n4281.015000\n4813.200\n17656.245"
  },
  {
    "objectID": "Credit Default Risk.html#credit-balance-data",
    "href": "Credit Default Risk.html#credit-balance-data",
    "title": "Introduction",
    "section": "Credit Balance Data",
    "text": "Credit Balance Data\n\ncredit_bal.head()\n\n\n\n\n\n\n\n\nSK_ID_PREV\nSK_ID_CURR\nMONTHS_BALANCE\nAMT_BALANCE\nAMT_CREDIT_LIMIT_ACTUAL\nAMT_DRAWINGS_ATM_CURRENT\nAMT_DRAWINGS_CURRENT\nAMT_DRAWINGS_OTHER_CURRENT\nAMT_DRAWINGS_POS_CURRENT\nAMT_INST_MIN_REGULARITY\nAMT_PAYMENT_CURRENT\nAMT_PAYMENT_TOTAL_CURRENT\nAMT_RECEIVABLE_PRINCIPAL\nAMT_RECIVABLE\nAMT_TOTAL_RECEIVABLE\nCNT_DRAWINGS_ATM_CURRENT\nCNT_DRAWINGS_CURRENT\nCNT_DRAWINGS_OTHER_CURRENT\nCNT_DRAWINGS_POS_CURRENT\nCNT_INSTALMENT_MATURE_CUM\nNAME_CONTRACT_STATUS\nSK_DPD\nSK_DPD_DEF\n\n\n\n\n0\n2562384\n378907\n-6\n56.970\n135000\n0.0\n877.5\n0.0\n877.5\n1700.325\n1800.0\n1800.0\n0.000\n0.000\n0.000\n0.0\n1\n0.0\n1.0\n35.0\nActive\n0\n0\n\n\n1\n2582071\n363914\n-1\n63975.555\n45000\n2250.0\n2250.0\n0.0\n0.0\n2250.000\n2250.0\n2250.0\n60175.080\n64875.555\n64875.555\n1.0\n1\n0.0\n0.0\n69.0\nActive\n0\n0\n\n\n2\n1740877\n371185\n-7\n31815.225\n450000\n0.0\n0.0\n0.0\n0.0\n2250.000\n2250.0\n2250.0\n26926.425\n31460.085\n31460.085\n0.0\n0\n0.0\n0.0\n30.0\nActive\n0\n0\n\n\n3\n1389973\n337855\n-4\n236572.110\n225000\n2250.0\n2250.0\n0.0\n0.0\n11795.760\n11925.0\n11925.0\n224949.285\n233048.970\n233048.970\n1.0\n1\n0.0\n0.0\n10.0\nActive\n0\n0\n\n\n4\n1891521\n126868\n-1\n453919.455\n450000\n0.0\n11547.0\n0.0\n11547.0\n22924.890\n27000.0\n27000.0\n443044.395\n453919.455\n453919.455\n0.0\n1\n0.0\n1.0\n101.0\nActive\n0\n0\n\n\n\n\n\n\n\n\ncredit_bal.drop('SK_ID_PREV', axis=1, inplace=True)\nagg_credit_bal = aggregate(credit_bal, by= 'SK_ID_CURR')\nprint(agg_credit_bal.shape)\nagg_credit_bal.head()\n\n(103558, 106)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nMONTHS_BALANCE_sum\nMONTHS_BALANCE_mean\nMONTHS_BALANCE_std\nMONTHS_BALANCE_min\nMONTHS_BALANCE_max\nAMT_BALANCE_sum\nAMT_BALANCE_mean\nAMT_BALANCE_std\nAMT_BALANCE_min\nAMT_BALANCE_max\nAMT_CREDIT_LIMIT_ACTUAL_sum\nAMT_CREDIT_LIMIT_ACTUAL_mean\nAMT_CREDIT_LIMIT_ACTUAL_std\nAMT_CREDIT_LIMIT_ACTUAL_min\nAMT_CREDIT_LIMIT_ACTUAL_max\nAMT_DRAWINGS_ATM_CURRENT_sum\nAMT_DRAWINGS_ATM_CURRENT_mean\nAMT_DRAWINGS_ATM_CURRENT_std\nAMT_DRAWINGS_ATM_CURRENT_min\nAMT_DRAWINGS_ATM_CURRENT_max\nAMT_DRAWINGS_CURRENT_sum\nAMT_DRAWINGS_CURRENT_mean\nAMT_DRAWINGS_CURRENT_std\nAMT_DRAWINGS_CURRENT_min\nAMT_DRAWINGS_CURRENT_max\nAMT_DRAWINGS_OTHER_CURRENT_sum\nAMT_DRAWINGS_OTHER_CURRENT_mean\nAMT_DRAWINGS_OTHER_CURRENT_std\nAMT_DRAWINGS_OTHER_CURRENT_min\nAMT_DRAWINGS_OTHER_CURRENT_max\nAMT_DRAWINGS_POS_CURRENT_sum\nAMT_DRAWINGS_POS_CURRENT_mean\nAMT_DRAWINGS_POS_CURRENT_std\nAMT_DRAWINGS_POS_CURRENT_min\nAMT_DRAWINGS_POS_CURRENT_max\nAMT_INST_MIN_REGULARITY_sum\nAMT_INST_MIN_REGULARITY_mean\nAMT_INST_MIN_REGULARITY_std\nAMT_INST_MIN_REGULARITY_min\nAMT_INST_MIN_REGULARITY_max\nAMT_PAYMENT_CURRENT_sum\nAMT_PAYMENT_CURRENT_mean\nAMT_PAYMENT_CURRENT_std\nAMT_PAYMENT_CURRENT_min\nAMT_PAYMENT_CURRENT_max\nAMT_PAYMENT_TOTAL_CURRENT_sum\nAMT_PAYMENT_TOTAL_CURRENT_mean\nAMT_PAYMENT_TOTAL_CURRENT_std\nAMT_PAYMENT_TOTAL_CURRENT_min\nAMT_PAYMENT_TOTAL_CURRENT_max\nAMT_RECEIVABLE_PRINCIPAL_sum\nAMT_RECEIVABLE_PRINCIPAL_mean\nAMT_RECEIVABLE_PRINCIPAL_std\nAMT_RECEIVABLE_PRINCIPAL_min\nAMT_RECEIVABLE_PRINCIPAL_max\nAMT_RECIVABLE_sum\nAMT_RECIVABLE_mean\nAMT_RECIVABLE_std\nAMT_RECIVABLE_min\nAMT_RECIVABLE_max\nAMT_TOTAL_RECEIVABLE_sum\nAMT_TOTAL_RECEIVABLE_mean\nAMT_TOTAL_RECEIVABLE_std\nAMT_TOTAL_RECEIVABLE_min\nAMT_TOTAL_RECEIVABLE_max\nCNT_DRAWINGS_ATM_CURRENT_sum\nCNT_DRAWINGS_ATM_CURRENT_mean\nCNT_DRAWINGS_ATM_CURRENT_std\nCNT_DRAWINGS_ATM_CURRENT_min\nCNT_DRAWINGS_ATM_CURRENT_max\nCNT_DRAWINGS_CURRENT_sum\nCNT_DRAWINGS_CURRENT_mean\nCNT_DRAWINGS_CURRENT_std\nCNT_DRAWINGS_CURRENT_min\nCNT_DRAWINGS_CURRENT_max\nCNT_DRAWINGS_OTHER_CURRENT_sum\nCNT_DRAWINGS_OTHER_CURRENT_mean\nCNT_DRAWINGS_OTHER_CURRENT_std\nCNT_DRAWINGS_OTHER_CURRENT_min\nCNT_DRAWINGS_OTHER_CURRENT_max\nCNT_DRAWINGS_POS_CURRENT_sum\nCNT_DRAWINGS_POS_CURRENT_mean\nCNT_DRAWINGS_POS_CURRENT_std\nCNT_DRAWINGS_POS_CURRENT_min\nCNT_DRAWINGS_POS_CURRENT_max\nCNT_INSTALMENT_MATURE_CUM_sum\nCNT_INSTALMENT_MATURE_CUM_mean\nCNT_INSTALMENT_MATURE_CUM_std\nCNT_INSTALMENT_MATURE_CUM_min\nCNT_INSTALMENT_MATURE_CUM_max\nNAME_CONTRACT_STATUS_sum\nNAME_CONTRACT_STATUS_mean\nNAME_CONTRACT_STATUS_std\nNAME_CONTRACT_STATUS_min\nNAME_CONTRACT_STATUS_max\nSK_DPD_sum\nSK_DPD_mean\nSK_DPD_std\nSK_DPD_min\nSK_DPD_max\nSK_DPD_DEF_sum\nSK_DPD_DEF_mean\nSK_DPD_DEF_std\nSK_DPD_DEF_min\nSK_DPD_DEF_max\n\n\n\n\n0\n100006\n-21\n-3.5\n1.870829\n-6\n-1\n0.000\n0.000000\n0.000000\n0.0\n0.00\n1620000\n270000.000000\n0.000000\n270000\n270000\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.000000\n0.000000\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.00\nNaN\nNaN\nNaN\nNaN\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.000000\n0.000000\n0.000\n0.00\n0.000\n0.000000\n0.000000\n0.000\n0.00\n0.0\nNaN\nNaN\nNaN\nNaN\n0\n0.000000\n0.000000\n0\n0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.000000\n0.000000\n0.0\n0.0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n1\n100011\n-2849\n-38.5\n21.505813\n-75\n-2\n4031676.225\n54482.111149\n68127.238270\n0.0\n189000.00\n12150000\n164189.189189\n34482.743620\n90000\n180000\n180000.0\n2432.432432\n20924.574974\n0.0\n180000.0\n180000.0\n2432.432432\n20924.574974\n0.0\n180000.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n288804.195\n3956.221849\n4487.750710\n0.0\n9000.0\n358386.75\n4843.064189\n7279.601955\n0.0\n55485.0\n334485.000\n4520.067568\n7473.872687\n0.0\n55485.0\n3877754.580\n52402.088919\n65758.823328\n0.0\n180000.0\n4028055.255\n54433.179122\n68166.970922\n-563.355\n189000.00\n4028055.255\n54433.179122\n68166.970922\n-563.355\n189000.00\n4.0\n0.054054\n0.464991\n0.0\n4.0\n4\n0.054054\n0.464991\n0\n4\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n1881.0\n25.767123\n10.288236\n1.0\n33.0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n2\n100013\n-4656\n-48.5\n27.856777\n-96\n-1\n1743352.245\n18159.919219\n43237.406997\n0.0\n161420.22\n12645000\n131718.750000\n47531.585759\n45000\n157500\n571500.0\n6350.000000\n28722.270457\n0.0\n157500.0\n571500.0\n5953.125000\n27843.366225\n0.0\n157500.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n129454.020\n1454.539551\n3028.409304\n0.0\n7875.0\n688161.24\n7168.346250\n21626.144325\n0.0\n153675.0\n654448.545\n6817.172344\n21730.655260\n0.0\n153675.0\n1656533.745\n17255.559844\n41279.745434\n0.0\n157500.0\n1737703.665\n18101.079844\n43262.026330\n-274.320\n161420.22\n1737703.665\n18101.079844\n43262.026330\n-274.320\n161420.22\n23.0\n0.255556\n1.185693\n0.0\n7.0\n23\n0.239583\n1.149323\n0\n7\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n1666.0\n18.719101\n5.852328\n1.0\n22.0\n0\n0.000000\n0.000000\n0\n0\n1\n0.010417\n0.102062\n0\n1\n1\n0.010417\n0.102062\n0\n1\n\n\n3\n100021\n-170\n-10.0\n5.049752\n-18\n-2\n0.000\n0.000000\n0.000000\n0.0\n0.00\n11475000\n675000.000000\n0.000000\n675000\n675000\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.000000\n0.000000\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.00\nNaN\nNaN\nNaN\nNaN\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.000000\n0.000000\n0.000\n0.00\n0.000\n0.000000\n0.000000\n0.000\n0.00\n0.0\nNaN\nNaN\nNaN\nNaN\n0\n0.000000\n0.000000\n0\n0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.000000\n0.000000\n0.0\n0.0\n20\n1.176471\n1.014599\n0\n2\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n4\n100023\n-60\n-7.5\n2.449490\n-11\n-4\n0.000\n0.000000\n0.000000\n0.0\n0.00\n1080000\n135000.000000\n96214.047088\n45000\n225000\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.000000\n0.000000\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.00\nNaN\nNaN\nNaN\nNaN\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.000000\n0.000000\n0.0\n0.0\n0.000\n0.000000\n0.000000\n0.000\n0.00\n0.000\n0.000000\n0.000000\n0.000\n0.00\n0.0\nNaN\nNaN\nNaN\nNaN\n0\n0.000000\n0.000000\n0\n0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.000000\n0.000000\n0.0\n0.0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n0\n0.000000\n0.000000\n0\n0\n\n\n\n\n\n\n\n\nfinal_data = pd.merge(application_data, average_bureau_data, on = 'SK_ID_CURR', how = 'left')\nfinal_data = pd.merge(final_data, agg_cash_bal, on = 'SK_ID_CURR', how = 'left')\nfinal_data = pd.merge(final_data, agg_prev_app, on = 'SK_ID_CURR', how = 'left')\nfinal_data = pd.merge(final_data, agg_ins_pay, on = 'SK_ID_CURR', how = 'left')\nfinal_data = pd.merge(final_data, agg_credit_bal,on = 'SK_ID_CURR', how = 'left')\nprint(final_data.shape)\nfinal_data.head()\n\n(356255, 586)\n\n\n\n\n\n\n\n\n\nSK_ID_CURR\nNAME_CONTRACT_TYPE\nCODE_GENDER\nFLAG_OWN_CAR\nFLAG_OWN_REALTY\nCNT_CHILDREN\nAMT_INCOME_TOTAL\nAMT_CREDIT\nAMT_ANNUITY\nAMT_GOODS_PRICE\nNAME_TYPE_SUITE\nNAME_INCOME_TYPE\nNAME_EDUCATION_TYPE\nNAME_FAMILY_STATUS\nNAME_HOUSING_TYPE\nREGION_POPULATION_RELATIVE\nDAYS_BIRTH\nDAYS_EMPLOYED\nDAYS_REGISTRATION\nDAYS_ID_PUBLISH\nOWN_CAR_AGE\nFLAG_MOBIL\nFLAG_EMP_PHONE\nFLAG_WORK_PHONE\nFLAG_CONT_MOBILE\nFLAG_PHONE\nFLAG_EMAIL\nOCCUPATION_TYPE\nCNT_FAM_MEMBERS\nREGION_RATING_CLIENT\nREGION_RATING_CLIENT_W_CITY\nWEEKDAY_APPR_PROCESS_START\nHOUR_APPR_PROCESS_START\nREG_REGION_NOT_LIVE_REGION\nREG_REGION_NOT_WORK_REGION\nLIVE_REGION_NOT_WORK_REGION\nREG_CITY_NOT_LIVE_CITY\nREG_CITY_NOT_WORK_CITY\nLIVE_CITY_NOT_WORK_CITY\nORGANIZATION_TYPE\nEXT_SOURCE_1\nEXT_SOURCE_2\nEXT_SOURCE_3\nAPARTMENTS_AVG\nBASEMENTAREA_AVG\nYEARS_BEGINEXPLUATATION_AVG\nYEARS_BUILD_AVG\nCOMMONAREA_AVG\nELEVATORS_AVG\nENTRANCES_AVG\nFLOORSMAX_AVG\nFLOORSMIN_AVG\nLANDAREA_AVG\nLIVINGAPARTMENTS_AVG\nLIVINGAREA_AVG\nNONLIVINGAPARTMENTS_AVG\nNONLIVINGAREA_AVG\nAPARTMENTS_MODE\nBASEMENTAREA_MODE\nYEARS_BEGINEXPLUATATION_MODE\nYEARS_BUILD_MODE\nCOMMONAREA_MODE\nELEVATORS_MODE\nENTRANCES_MODE\nFLOORSMAX_MODE\nFLOORSMIN_MODE\nLANDAREA_MODE\nLIVINGAPARTMENTS_MODE\nLIVINGAREA_MODE\nNONLIVINGAPARTMENTS_MODE\nNONLIVINGAREA_MODE\nAPARTMENTS_MEDI\nBASEMENTAREA_MEDI\nYEARS_BEGINEXPLUATATION_MEDI\nYEARS_BUILD_MEDI\nCOMMONAREA_MEDI\nELEVATORS_MEDI\nENTRANCES_MEDI\nFLOORSMAX_MEDI\nFLOORSMIN_MEDI\nLANDAREA_MEDI\nLIVINGAPARTMENTS_MEDI\nLIVINGAREA_MEDI\nNONLIVINGAPARTMENTS_MEDI\nNONLIVINGAREA_MEDI\nFONDKAPREMONT_MODE\nHOUSETYPE_MODE\nTOTALAREA_MODE\nWALLSMATERIAL_MODE\nEMERGENCYSTATE_MODE\nOBS_30_CNT_SOCIAL_CIRCLE\nDEF_30_CNT_SOCIAL_CIRCLE\nOBS_60_CNT_SOCIAL_CIRCLE\nDEF_60_CNT_SOCIAL_CIRCLE\nDAYS_LAST_PHONE_CHANGE\nFLAG_DOCUMENT_2\nFLAG_DOCUMENT_3\nFLAG_DOCUMENT_4\nFLAG_DOCUMENT_5\nFLAG_DOCUMENT_6\nFLAG_DOCUMENT_7\nFLAG_DOCUMENT_8\nFLAG_DOCUMENT_9\nFLAG_DOCUMENT_10\nFLAG_DOCUMENT_11\nFLAG_DOCUMENT_12\nFLAG_DOCUMENT_13\nFLAG_DOCUMENT_14\nFLAG_DOCUMENT_15\nFLAG_DOCUMENT_16\nFLAG_DOCUMENT_17\nFLAG_DOCUMENT_18\nFLAG_DOCUMENT_19\nFLAG_DOCUMENT_20\nFLAG_DOCUMENT_21\nAMT_REQ_CREDIT_BUREAU_HOUR\nAMT_REQ_CREDIT_BUREAU_DAY\nAMT_REQ_CREDIT_BUREAU_WEEK\nAMT_REQ_CREDIT_BUREAU_MON\nAMT_REQ_CREDIT_BUREAU_QRT\nAMT_REQ_CREDIT_BUREAU_YEAR\nCREDIT_ACTIVE_sum\nCREDIT_ACTIVE_mean\nCREDIT_ACTIVE_std\nCREDIT_ACTIVE_min\nCREDIT_ACTIVE_max\nCREDIT_CURRENCY_sum\nCREDIT_CURRENCY_mean\nCREDIT_CURRENCY_std\nCREDIT_CURRENCY_min\nCREDIT_CURRENCY_max\nDAYS_CREDIT_sum\nDAYS_CREDIT_mean\nDAYS_CREDIT_std\nDAYS_CREDIT_min\nDAYS_CREDIT_max\nCREDIT_DAY_OVERDUE_sum\nCREDIT_DAY_OVERDUE_mean\nCREDIT_DAY_OVERDUE_std\nCREDIT_DAY_OVERDUE_min\nCREDIT_DAY_OVERDUE_max\nDAYS_CREDIT_ENDDATE_sum\nDAYS_CREDIT_ENDDATE_mean\nDAYS_CREDIT_ENDDATE_std\nDAYS_CREDIT_ENDDATE_min\nDAYS_CREDIT_ENDDATE_max\nDAYS_ENDDATE_FACT_sum\nDAYS_ENDDATE_FACT_mean\nDAYS_ENDDATE_FACT_std\nDAYS_ENDDATE_FACT_min\nDAYS_ENDDATE_FACT_max\nAMT_CREDIT_MAX_OVERDUE_sum\nAMT_CREDIT_MAX_OVERDUE_mean\nAMT_CREDIT_MAX_OVERDUE_std\nAMT_CREDIT_MAX_OVERDUE_min\nAMT_CREDIT_MAX_OVERDUE_max\nCNT_CREDIT_PROLONG_sum\nCNT_CREDIT_PROLONG_mean\nCNT_CREDIT_PROLONG_std\nCNT_CREDIT_PROLONG_min\nCNT_CREDIT_PROLONG_max\nAMT_CREDIT_SUM_sum\nAMT_CREDIT_SUM_mean\nAMT_CREDIT_SUM_std\nAMT_CREDIT_SUM_min\nAMT_CREDIT_SUM_max\nAMT_CREDIT_SUM_DEBT_sum\nAMT_CREDIT_SUM_DEBT_mean\nAMT_CREDIT_SUM_DEBT_std\nAMT_CREDIT_SUM_DEBT_min\nAMT_CREDIT_SUM_DEBT_max\nAMT_CREDIT_SUM_LIMIT_sum\nAMT_CREDIT_SUM_LIMIT_mean\nAMT_CREDIT_SUM_LIMIT_std\nAMT_CREDIT_SUM_LIMIT_min\nAMT_CREDIT_SUM_LIMIT_max\nAMT_CREDIT_SUM_OVERDUE_sum\nAMT_CREDIT_SUM_OVERDUE_mean\nAMT_CREDIT_SUM_OVERDUE_std\nAMT_CREDIT_SUM_OVERDUE_min\nAMT_CREDIT_SUM_OVERDUE_max\nCREDIT_TYPE_sum\nCREDIT_TYPE_mean\nCREDIT_TYPE_std\nCREDIT_TYPE_min\nCREDIT_TYPE_max\nDAYS_CREDIT_UPDATE_sum\nDAYS_CREDIT_UPDATE_mean\nDAYS_CREDIT_UPDATE_std\nDAYS_CREDIT_UPDATE_min\nDAYS_CREDIT_UPDATE_max\nAMT_ANNUITY_sum_x\nAMT_ANNUITY_mean_x\nAMT_ANNUITY_std_x\nAMT_ANNUITY_min_x\nAMT_ANNUITY_max_x\nMONTHS_BALANCE_sum_sum\nMONTHS_BALANCE_sum_mean\nMONTHS_BALANCE_sum_std\nMONTHS_BALANCE_sum_min\nMONTHS_BALANCE_sum_max\nMONTHS_BALANCE_mean_sum\nMONTHS_BALANCE_mean_mean\nMONTHS_BALANCE_mean_std\nMONTHS_BALANCE_mean_min\nMONTHS_BALANCE_mean_max\nMONTHS_BALANCE_std_sum\nMONTHS_BALANCE_std_mean\nMONTHS_BALANCE_std_std\nMONTHS_BALANCE_std_min\nMONTHS_BALANCE_std_max\nMONTHS_BALANCE_min_sum\nMONTHS_BALANCE_min_mean\nMONTHS_BALANCE_min_std\nMONTHS_BALANCE_min_min\nMONTHS_BALANCE_min_max\nMONTHS_BALANCE_max_sum\nMONTHS_BALANCE_max_mean\nMONTHS_BALANCE_max_std\nMONTHS_BALANCE_max_min\nMONTHS_BALANCE_max_max\nSTATUS_sum_sum\nSTATUS_sum_mean\nSTATUS_sum_std\nSTATUS_sum_min\nSTATUS_sum_max\nSTATUS_mean_sum\nSTATUS_mean_mean\nSTATUS_mean_std\nSTATUS_mean_min\nSTATUS_mean_max\nSTATUS_std_sum\nSTATUS_std_mean\nSTATUS_std_std\nSTATUS_std_min\nSTATUS_std_max\nSTATUS_min_sum\nSTATUS_min_mean\nSTATUS_min_std\nSTATUS_min_min\nSTATUS_min_max\nSTATUS_max_sum\nSTATUS_max_mean\nSTATUS_max_std\nSTATUS_max_min\nSTATUS_max_max\nMONTHS_BALANCE_sum_x\nMONTHS_BALANCE_mean_x\nMONTHS_BALANCE_std_x\nMONTHS_BALANCE_min_x\n...\nRATE_INTEREST_PRIVILEGED_sum\nRATE_INTEREST_PRIVILEGED_mean\nRATE_INTEREST_PRIVILEGED_std\nRATE_INTEREST_PRIVILEGED_min\nRATE_INTEREST_PRIVILEGED_max\nNAME_CASH_LOAN_PURPOSE_sum\nNAME_CASH_LOAN_PURPOSE_mean\nNAME_CASH_LOAN_PURPOSE_std\nNAME_CASH_LOAN_PURPOSE_min\nNAME_CASH_LOAN_PURPOSE_max\nNAME_CONTRACT_STATUS_sum_y\nNAME_CONTRACT_STATUS_mean_y\nNAME_CONTRACT_STATUS_std_y\nNAME_CONTRACT_STATUS_min_y\nNAME_CONTRACT_STATUS_max_y\nDAYS_DECISION_sum\nDAYS_DECISION_mean\nDAYS_DECISION_std\nDAYS_DECISION_min\nDAYS_DECISION_max\nNAME_PAYMENT_TYPE_sum\nNAME_PAYMENT_TYPE_mean\nNAME_PAYMENT_TYPE_std\nNAME_PAYMENT_TYPE_min\nNAME_PAYMENT_TYPE_max\nCODE_REJECT_REASON_sum\nCODE_REJECT_REASON_mean\nCODE_REJECT_REASON_std\nCODE_REJECT_REASON_min\nCODE_REJECT_REASON_max\nNAME_TYPE_SUITE_sum\nNAME_TYPE_SUITE_mean\nNAME_TYPE_SUITE_std\nNAME_TYPE_SUITE_min\nNAME_TYPE_SUITE_max\nNAME_CLIENT_TYPE_sum\nNAME_CLIENT_TYPE_mean\nNAME_CLIENT_TYPE_std\nNAME_CLIENT_TYPE_min\nNAME_CLIENT_TYPE_max\nNAME_GOODS_CATEGORY_sum\nNAME_GOODS_CATEGORY_mean\nNAME_GOODS_CATEGORY_std\nNAME_GOODS_CATEGORY_min\nNAME_GOODS_CATEGORY_max\nNAME_PORTFOLIO_sum\nNAME_PORTFOLIO_mean\nNAME_PORTFOLIO_std\nNAME_PORTFOLIO_min\nNAME_PORTFOLIO_max\nNAME_PRODUCT_TYPE_sum\nNAME_PRODUCT_TYPE_mean\nNAME_PRODUCT_TYPE_std\nNAME_PRODUCT_TYPE_min\nNAME_PRODUCT_TYPE_max\nCHANNEL_TYPE_sum\nCHANNEL_TYPE_mean\nCHANNEL_TYPE_std\nCHANNEL_TYPE_min\nCHANNEL_TYPE_max\nSELLERPLACE_AREA_sum\nSELLERPLACE_AREA_mean\nSELLERPLACE_AREA_std\nSELLERPLACE_AREA_min\nSELLERPLACE_AREA_max\nNAME_SELLER_INDUSTRY_sum\nNAME_SELLER_INDUSTRY_mean\nNAME_SELLER_INDUSTRY_std\nNAME_SELLER_INDUSTRY_min\nNAME_SELLER_INDUSTRY_max\nCNT_PAYMENT_sum\nCNT_PAYMENT_mean\nCNT_PAYMENT_std\nCNT_PAYMENT_min\nCNT_PAYMENT_max\nNAME_YIELD_GROUP_sum\nNAME_YIELD_GROUP_mean\nNAME_YIELD_GROUP_std\nNAME_YIELD_GROUP_min\nNAME_YIELD_GROUP_max\nPRODUCT_COMBINATION_sum\nPRODUCT_COMBINATION_mean\nPRODUCT_COMBINATION_std\nPRODUCT_COMBINATION_min\nPRODUCT_COMBINATION_max\nDAYS_FIRST_DRAWING_sum\nDAYS_FIRST_DRAWING_mean\nDAYS_FIRST_DRAWING_std\nDAYS_FIRST_DRAWING_min\nDAYS_FIRST_DRAWING_max\nDAYS_FIRST_DUE_sum\nDAYS_FIRST_DUE_mean\nDAYS_FIRST_DUE_std\nDAYS_FIRST_DUE_min\nDAYS_FIRST_DUE_max\nDAYS_LAST_DUE_1ST_VERSION_sum\nDAYS_LAST_DUE_1ST_VERSION_mean\nDAYS_LAST_DUE_1ST_VERSION_std\nDAYS_LAST_DUE_1ST_VERSION_min\nDAYS_LAST_DUE_1ST_VERSION_max\nDAYS_LAST_DUE_sum\nDAYS_LAST_DUE_mean\nDAYS_LAST_DUE_std\nDAYS_LAST_DUE_min\nDAYS_LAST_DUE_max\nDAYS_TERMINATION_sum\nDAYS_TERMINATION_mean\nDAYS_TERMINATION_std\nDAYS_TERMINATION_min\nDAYS_TERMINATION_max\nNFLAG_INSURED_ON_APPROVAL_sum\nNFLAG_INSURED_ON_APPROVAL_mean\nNFLAG_INSURED_ON_APPROVAL_std\nNFLAG_INSURED_ON_APPROVAL_min\nNFLAG_INSURED_ON_APPROVAL_max\nNUM_INSTALMENT_VERSION_sum\nNUM_INSTALMENT_VERSION_mean\nNUM_INSTALMENT_VERSION_std\nNUM_INSTALMENT_VERSION_min\nNUM_INSTALMENT_VERSION_max\nNUM_INSTALMENT_NUMBER_sum\nNUM_INSTALMENT_NUMBER_mean\nNUM_INSTALMENT_NUMBER_std\nNUM_INSTALMENT_NUMBER_min\nNUM_INSTALMENT_NUMBER_max\nDAYS_INSTALMENT_sum\nDAYS_INSTALMENT_mean\nDAYS_INSTALMENT_std\nDAYS_INSTALMENT_min\nDAYS_INSTALMENT_max\nDAYS_ENTRY_PAYMENT_sum\nDAYS_ENTRY_PAYMENT_mean\nDAYS_ENTRY_PAYMENT_std\nDAYS_ENTRY_PAYMENT_min\nDAYS_ENTRY_PAYMENT_max\nAMT_INSTALMENT_sum\nAMT_INSTALMENT_mean\nAMT_INSTALMENT_std\nAMT_INSTALMENT_min\nAMT_INSTALMENT_max\nAMT_PAYMENT_sum\nAMT_PAYMENT_mean\nAMT_PAYMENT_std\nAMT_PAYMENT_min\nAMT_PAYMENT_max\nMONTHS_BALANCE_sum_y\nMONTHS_BALANCE_mean_y\nMONTHS_BALANCE_std_y\nMONTHS_BALANCE_min_y\nMONTHS_BALANCE_max_y\nAMT_BALANCE_sum\nAMT_BALANCE_mean\nAMT_BALANCE_std\nAMT_BALANCE_min\nAMT_BALANCE_max\nAMT_CREDIT_LIMIT_ACTUAL_sum\nAMT_CREDIT_LIMIT_ACTUAL_mean\nAMT_CREDIT_LIMIT_ACTUAL_std\nAMT_CREDIT_LIMIT_ACTUAL_min\nAMT_CREDIT_LIMIT_ACTUAL_max\nAMT_DRAWINGS_ATM_CURRENT_sum\nAMT_DRAWINGS_ATM_CURRENT_mean\nAMT_DRAWINGS_ATM_CURRENT_std\nAMT_DRAWINGS_ATM_CURRENT_min\nAMT_DRAWINGS_ATM_CURRENT_max\nAMT_DRAWINGS_CURRENT_sum\nAMT_DRAWINGS_CURRENT_mean\nAMT_DRAWINGS_CURRENT_std\nAMT_DRAWINGS_CURRENT_min\nAMT_DRAWINGS_CURRENT_max\nAMT_DRAWINGS_OTHER_CURRENT_sum\nAMT_DRAWINGS_OTHER_CURRENT_mean\nAMT_DRAWINGS_OTHER_CURRENT_std\nAMT_DRAWINGS_OTHER_CURRENT_min\nAMT_DRAWINGS_OTHER_CURRENT_max\nAMT_DRAWINGS_POS_CURRENT_sum\nAMT_DRAWINGS_POS_CURRENT_mean\nAMT_DRAWINGS_POS_CURRENT_std\nAMT_DRAWINGS_POS_CURRENT_min\nAMT_DRAWINGS_POS_CURRENT_max\nAMT_INST_MIN_REGULARITY_sum\nAMT_INST_MIN_REGULARITY_mean\nAMT_INST_MIN_REGULARITY_std\nAMT_INST_MIN_REGULARITY_min\nAMT_INST_MIN_REGULARITY_max\nAMT_PAYMENT_CURRENT_sum\nAMT_PAYMENT_CURRENT_mean\nAMT_PAYMENT_CURRENT_std\nAMT_PAYMENT_CURRENT_min\nAMT_PAYMENT_CURRENT_max\nAMT_PAYMENT_TOTAL_CURRENT_sum\nAMT_PAYMENT_TOTAL_CURRENT_mean\nAMT_PAYMENT_TOTAL_CURRENT_std\nAMT_PAYMENT_TOTAL_CURRENT_min\nAMT_PAYMENT_TOTAL_CURRENT_max\nAMT_RECEIVABLE_PRINCIPAL_sum\nAMT_RECEIVABLE_PRINCIPAL_mean\nAMT_RECEIVABLE_PRINCIPAL_std\nAMT_RECEIVABLE_PRINCIPAL_min\nAMT_RECEIVABLE_PRINCIPAL_max\nAMT_RECIVABLE_sum\nAMT_RECIVABLE_mean\nAMT_RECIVABLE_std\nAMT_RECIVABLE_min\nAMT_RECIVABLE_max\nAMT_TOTAL_RECEIVABLE_sum\nAMT_TOTAL_RECEIVABLE_mean\nAMT_TOTAL_RECEIVABLE_std\nAMT_TOTAL_RECEIVABLE_min\nAMT_TOTAL_RECEIVABLE_max\nCNT_DRAWINGS_ATM_CURRENT_sum\nCNT_DRAWINGS_ATM_CURRENT_mean\nCNT_DRAWINGS_ATM_CURRENT_std\nCNT_DRAWINGS_ATM_CURRENT_min\nCNT_DRAWINGS_ATM_CURRENT_max\nCNT_DRAWINGS_CURRENT_sum\nCNT_DRAWINGS_CURRENT_mean\nCNT_DRAWINGS_CURRENT_std\nCNT_DRAWINGS_CURRENT_min\nCNT_DRAWINGS_CURRENT_max\nCNT_DRAWINGS_OTHER_CURRENT_sum\nCNT_DRAWINGS_OTHER_CURRENT_mean\nCNT_DRAWINGS_OTHER_CURRENT_std\nCNT_DRAWINGS_OTHER_CURRENT_min\nCNT_DRAWINGS_OTHER_CURRENT_max\nCNT_DRAWINGS_POS_CURRENT_sum\nCNT_DRAWINGS_POS_CURRENT_mean\nCNT_DRAWINGS_POS_CURRENT_std\nCNT_DRAWINGS_POS_CURRENT_min\nCNT_DRAWINGS_POS_CURRENT_max\nCNT_INSTALMENT_MATURE_CUM_sum\nCNT_INSTALMENT_MATURE_CUM_mean\nCNT_INSTALMENT_MATURE_CUM_std\nCNT_INSTALMENT_MATURE_CUM_min\nCNT_INSTALMENT_MATURE_CUM_max\nNAME_CONTRACT_STATUS_sum\nNAME_CONTRACT_STATUS_mean\nNAME_CONTRACT_STATUS_std\nNAME_CONTRACT_STATUS_min\nNAME_CONTRACT_STATUS_max\nSK_DPD_sum_y\nSK_DPD_mean_y\nSK_DPD_std_y\nSK_DPD_min_y\nSK_DPD_max_y\nSK_DPD_DEF_sum_y\nSK_DPD_DEF_mean_y\nSK_DPD_DEF_std_y\nSK_DPD_DEF_min_y\nSK_DPD_DEF_max_y\n\n\n\n\n0\n100002\n0\n1\n0\n1\n0\n202500.0\n406597.5\n24700.5\n351000.0\n6\n7\n4\n3\n1\n0.018801\n25.920548\n1.745205\n9.994521\n5.808219\nNaN\n1\n1\n0\n1\n1\n0\n8\n1.0\n2\n2\n6\n10\n0\n0\n0\n0\n0\n0\n1\n0.083037\n0.262949\n0.139376\n0.0247\n0.0369\n0.9722\n0.6192\n0.0143\n0.00\n0.0690\n0.0833\n0.1250\n0.0369\n0.0202\n0.0190\n0.0000\n0.0000\n0.0252\n0.0383\n0.9722\n0.6341\n0.0144\n0.0000\n0.0690\n0.0833\n0.1250\n0.0377\n0.022\n0.0198\n0.0\n0.0\n0.0250\n0.0369\n0.9722\n0.6243\n0.0144\n0.00\n0.0690\n0.0833\n0.1250\n0.0375\n0.0205\n0.0193\n0.0000\n0.00\n3\n0\n0.0149\n5\n0\n2.0\n2.0\n2.0\n2.0\n3.106849\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n1.0\n12.0\n1.5\n0.92582\n0.0\n2.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-6992.0\n-874.00\n431.451040\n-1437.0\n-103.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-2094.0\n-349.0\n767.490977\n-1072.0\n780.0\n-4185.0\n-697.500000\n515.992539\n-1185.0\n-36.0\n8405.145\n1681.029\n2363.2469\n0.0\n5043.645\n0.0\n0.0\n0.0\n0.0\n0.0\n865055.565\n108131.945625\n146075.557435\n0.0\n450000.0\n245781.0\n49156.2\n109916.604716\n0.0\n245781.0\n31988.565\n7997.14125\n15994.2825\n0.0\n31988.565\n0.0\n0.0\n0.0\n0.0\n0.0\n28.0\n3.5\n0.534522\n3.0\n4.0\n-3999.0\n-499.875\n518.522472\n-1185.0\n-7.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-2701.0\n-337.625\n236.107686\n-632.0\n-6.0\n-175.0\n-21.875\n12.176529\n-39.5\n-1.5\n32.880337\n4.110042\n1.839789\n1.290994\n6.493587\n-226.0\n-28.25\n14.159802\n-47.0\n-3.0\n-124.0\n-15.5\n10.783585\n-32.0\n0.0\n270.0\n33.75\n22.852008\n2.0\n78.0\n19.534091\n2.441761\n1.371137\n0.5\n4.875\n21.033778\n2.629222\n0.986184\n0.57735\n4.041452\n0.0\n0.0\n0.0\n0.0\n0.0\n49.0\n6.125\n2.10017\n1.0\n7.0\n-190.0\n-10.000000\n5.627314\n-19.0\n...\n0.0\nNaN\nNaN\nNaN\nNaN\n23.0\n23.000000\nNaN\n23.0\n23.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n-606.0\n-606.000000\nNaN\n-606.0\n-606.0\n3.0\n3.000000\nNaN\n3.0\n3.0\n7.0\n7.000000\nNaN\n7.0\n7.0\n7.0\n7.000000\nNaN\n7.0\n7.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n25.0\n25.000000\nNaN\n25.0\n25.0\n3.0\n3.000000\nNaN\n3.0\n3.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n7.0\n7.000000\nNaN\n7.0\n7.0\n500.0\n500.000000\nNaN\n500.0\n500.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n24.0\n24.000000\nNaN\n24.0\n24.0\n3.0\n3.000000\nNaN\n3.0\n3.0\n15.0\n15.000000\nNaN\n15.0\n15.0\n365243.0\n365243.0\nNaN\n365243.0\n365243.0\n-565.0\n-565.000000\nNaN\n-565.0\n-565.0\n125.0\n125.000000\nNaN\n125.0\n125.0\n-25.0\n-25.000000\nNaN\n-25.0\n-25.0\n-17.0\n-17.000000\nNaN\n-17.0\n-17.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n20.0\n1.052632\n0.229416\n1.0\n2.0\n190.0\n10.000000\n5.627314\n1.0\n19.0\n-5605.0\n-295.000000\n168.819430\n-565.0\n-25.0\n-5993.0\n-315.421053\n172.058877\n-587.0\n-49.0\n219625.695\n11559.247105\n10058.037722\n9251.775\n53093.745\n219625.695\n11559.247105\n10058.037722\n9251.775\n53093.745\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1\n100003\n0\n0\n0\n0\n0\n270000.0\n1293502.5\n35698.5\n1129500.0\n1\n4\n1\n1\n1\n0.003541\n45.931507\n3.254795\n3.249315\n0.797260\nNaN\n1\n1\n0\n1\n1\n0\n3\n2.0\n1\n1\n1\n11\n0\n0\n0\n0\n0\n0\n2\n0.311267\n0.622246\nNaN\n0.0959\n0.0529\n0.9851\n0.7960\n0.0605\n0.08\n0.0345\n0.2917\n0.3333\n0.0130\n0.0773\n0.0549\n0.0039\n0.0098\n0.0924\n0.0538\n0.9851\n0.8040\n0.0497\n0.0806\n0.0345\n0.2917\n0.3333\n0.0128\n0.079\n0.0554\n0.0\n0.0\n0.0968\n0.0529\n0.9851\n0.7987\n0.0608\n0.08\n0.0345\n0.2917\n0.3333\n0.0132\n0.0787\n0.0558\n0.0039\n0.01\n3\n0\n0.0714\n0\n0\n1.0\n0.0\n1.0\n0.0\n2.268493\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n6.0\n1.5\n1.00000\n0.0\n2.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-5603.0\n-1400.75\n909.826128\n-2586.0\n-606.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-2178.0\n-544.5\n1492.770467\n-2434.0\n1216.0\n-3292.0\n-1097.333333\n896.097279\n-2131.0\n-540.0\n0.000\n0.000\n0.0000\n0.0\n0.000\n0.0\n0.0\n0.0\n0.0\n0.0\n1017400.500\n254350.125000\n372269.465535\n22248.0\n810000.0\n0.0\n0.0\n0.000000\n0.0\n0.0\n810000.000\n202500.00000\n405000.0000\n0.0\n810000.000\n0.0\n0.0\n0.0\n0.0\n0.0\n14.0\n3.5\n0.577350\n3.0\n4.0\n-3264.0\n-816.000\n908.053963\n-2131.0\n-43.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n-1226.0\n-43.785714\n24.640162\n-77.0\n...\n0.0\nNaN\nNaN\nNaN\nNaN\n70.0\n23.333333\n0.577350\n23.0\n24.0\n0.0\n0.000000\n0.000000\n0.0\n0.0\n-3915.0\n-1305.000000\n898.138631\n-2341.0\n-746.0\n3.0\n1.000000\n1.732051\n0.0\n3.0\n21.0\n7.000000\n0.000000\n7.0\n7.0\n8.0\n2.666667\n2.886751\n1.0\n6.0\n4.0\n1.333333\n0.577350\n1.0\n2.0\n45.0\n15.000000\n10.583005\n7.0\n27.0\n8.0\n2.666667\n0.577350\n2.0\n3.0\n2.0\n0.666667\n1.154701\n0.0\n2.0\n16.0\n5.333333\n1.527525\n4.0\n7.0\n1599.0\n533.000000\n757.540098\n-1.0\n1400.0\n19.0\n6.333333\n3.214550\n4.0\n10.0\n30.0\n10.000000\n3.464102\n6.0\n12.0\n11.0\n3.666667\n0.577350\n3.0\n4.0\n27.0\n9.000000\n2.000000\n7.0\n11.0\n1095729.0\n365243.0\n0.0\n365243.0\n365243.0\n-3823.0\n-1274.333333\n897.827563\n-2310.0\n-716.0\n-3013.0\n-1004.333333\n854.970370\n-1980.0\n-386.0\n-3163.0\n-1054.333333\n803.569744\n-1980.0\n-536.0\n-3142.0\n-1047.333333\n806.196213\n-1976.0\n-527.0\n2.0\n0.666667\n0.577350\n0.0\n1.0\n26.0\n1.040000\n0.200000\n1.0\n2.0\n127.0\n5.080000\n3.134751\n1.0\n12.0\n-34454.0\n-1378.160000\n757.453556\n-2310.0\n-536.0\n-34633.0\n-1385.320000\n757.325432\n-2324.0\n-544.0\n1618864.650\n64754.586000\n110542.592300\n6662.970\n560835.360\n1618864.650\n64754.586000\n110542.592300\n6662.970\n560835.360\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n2\n100004\n1\n1\n1\n1\n0\n67500.0\n135000.0\n6750.0\n135000.0\n6\n7\n4\n3\n1\n0.010032\n52.180822\n0.616438\n11.671233\n6.934247\n26.0\n1\n1\n1\n1\n1\n0\n8\n1.0\n2\n2\n1\n9\n0\n0\n0\n0\n0\n0\n3\nNaN\n0.555912\n0.729567\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n0\n1\nNaN\n7\n2\n0.0\n0.0\n0.0\n0.0\n2.232877\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n4.0\n2.0\n0.00000\n2.0\n2.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-1734.0\n-867.00\n649.124025\n-1326.0\n-408.0\n0.0\n0.0\n0.0\n0.0\n0.0\n-977.0\n-488.5\n150.613744\n-595.0\n-382.0\n-1065.0\n-532.500000\n212.839141\n-683.0\n-382.0\n0.000\n0.000\nNaN\n0.0\n0.000\n0.0\n0.0\n0.0\n0.0\n0.0\n189037.800\n94518.900000\n26.728636\n94500.0\n94537.8\n0.0\n0.0\n0.000000\n0.0\n0.0\n0.000\n0.00000\n0.0000\n0.0\n0.000\n0.0\n0.0\n0.0\n0.0\n0.0\n6.0\n3.0\n0.000000\n3.0\n3.0\n-1064.0\n-532.000\n212.132034\n-682.0\n-382.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n-102.0\n-25.500000\n1.290994\n-27.0\n...\n0.0\nNaN\nNaN\nNaN\nNaN\n23.0\n23.000000\nNaN\n23.0\n23.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n-815.0\n-815.000000\nNaN\n-815.0\n-815.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n7.0\n7.000000\nNaN\n7.0\n7.0\n6.0\n6.000000\nNaN\n6.0\n6.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n19.0\n19.000000\nNaN\n19.0\n19.0\n3.0\n3.000000\nNaN\n3.0\n3.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n6.0\n6.000000\nNaN\n6.0\n6.0\n30.0\n30.000000\nNaN\n30.0\n30.0\n2.0\n2.000000\nNaN\n2.0\n2.0\n4.0\n4.000000\nNaN\n4.0\n4.0\n4.0\n4.000000\nNaN\n4.0\n4.0\n14.0\n14.000000\nNaN\n14.0\n14.0\n365243.0\n365243.0\nNaN\n365243.0\n365243.0\n-784.0\n-784.000000\nNaN\n-784.0\n-784.0\n-694.0\n-694.000000\nNaN\n-694.0\n-694.0\n-724.0\n-724.000000\nNaN\n-724.0\n-724.0\n-714.0\n-714.000000\nNaN\n-714.0\n-714.0\n0.0\n0.000000\nNaN\n0.0\n0.0\n4.0\n1.333333\n0.577350\n1.0\n2.0\n6.0\n2.000000\n1.000000\n1.0\n3.0\n-2262.0\n-754.000000\n30.000000\n-784.0\n-724.0\n-2285.0\n-761.666667\n34.019602\n-795.0\n-727.0\n21288.465\n7096.155000\n3011.871810\n5357.250\n10573.965\n21288.465\n7096.155000\n3011.871810\n5357.250\n10573.965\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n3\n100006\n0\n0\n0\n1\n0\n135000.0\n312682.5\n29686.5\n297000.0\n6\n7\n4\n0\n1\n0.008019\n52.068493\n8.326027\n26.939726\n6.676712\nNaN\n1\n1\n0\n1\n0\n0\n8\n2.0\n2\n2\n6\n17\n0\n0\n0\n0\n0\n0\n5\nNaN\n0.650442\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n0\n1\nNaN\n7\n2\n2.0\n0.0\n2.0\n0.0\n1.690411\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n-202.0\n-9.619048\n6.078455\n-20.0\n...\n0.0\nNaN\nNaN\nNaN\nNaN\n212.0\n23.555556\n0.527046\n23.0\n24.0\n5.0\n0.555556\n0.726483\n0.0\n2.0\n-2452.0\n-272.444444\n157.236375\n-617.0\n-181.0\n15.0\n1.666667\n1.581139\n0.0\n3.0\n58.0\n6.444444\n1.666667\n2.0\n7.0\n54.0\n6.000000\n1.936492\n1.0\n7.0\n16.0\n1.777778\n0.666667\n0.0\n2.0\n197.0\n21.888889\n10.191227\n2.0\n27.0\n24.0\n2.666667\n1.322876\n0.0\n4.0\n8.0\n0.888889\n1.054093\n0.0\n2.0\n46.0\n5.111111\n0.781736\n4.0\n7.0\n8048.0\n894.222222\n2674.061320\n-1.0\n8025.0\n77.0\n8.555556\n2.877113\n3.0\n10.0\n138.0\n23.000000\n20.228692\n0.0\n48.0\n12.0\n1.333333\n1.581139\n0.0\n4.0\n45.0\n5.000000\n3.872983\n0.0\n11.0\n1460972.0\n365243.0\n0.0\n365243.0\n365243.0\n364266.0\n91066.500000\n182784.406836\n-545.0\n365243.0\n366336.0\n91584.000000\n182440.462007\n-215.0\n365243.0\n729910.0\n182477.500000\n211039.450892\n-425.0\n365243.0\n729927.0\n182481.750000\n211034.543200\n-416.0\n365243.0\n0.0\n0.000000\n0.000000\n0.0\n0.0\n18.0\n1.125000\n0.341565\n1.0\n2.0\n71.0\n4.437500\n2.897556\n1.0\n10.0\n-4036.0\n-252.250000\n178.373204\n-545.0\n-11.0\n-4346.0\n-271.625000\n198.045744\n-575.0\n-12.0\n1007153.415\n62947.088438\n168097.624347\n2482.920\n691786.890\n1007153.415\n62947.088438\n168097.624347\n2482.920\n691786.890\n-21.0\n-3.5\n1.870829\n-6.0\n-1.0\n0.0\n0.0\n0.0\n0.0\n0.0\n1620000.0\n270000.0\n0.0\n270000.0\n270000.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n\n\n4\n100007\n0\n1\n0\n1\n0\n121500.0\n513000.0\n21865.5\n513000.0\n6\n7\n4\n3\n1\n0.028663\n54.608219\n8.323288\n11.810959\n9.473973\nNaN\n1\n1\n0\n1\n0\n0\n3\n1.0\n2\n2\n4\n11\n0\n0\n0\n0\n1\n1\n6\nNaN\n0.322738\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n0\n1\nNaN\n7\n2\n0.0\n0.0\n0.0\n0.0\n3.030137\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0.0\n0.0\n0.0\n0.0\n0.0\n0.0\n2.0\n2.0\nNaN\n2.0\n2.0\n0.0\n0.0\nNaN\n0.0\n0.0\n-1149.0\n-1149.00\nNaN\n-1149.0\n-1149.0\n0.0\n0.0\nNaN\n0.0\n0.0\n-783.0\n-783.0\nNaN\n-783.0\n-783.0\n-783.0\n-783.000000\nNaN\n-783.0\n-783.0\n0.000\n0.000\nNaN\n0.0\n0.000\n0.0\n0.0\nNaN\n0.0\n0.0\n146250.000\n146250.000000\nNaN\n146250.0\n146250.0\n0.0\n0.0\nNaN\n0.0\n0.0\n0.000\n0.00000\nNaN\n0.0\n0.000\n0.0\n0.0\nNaN\n0.0\n0.0\n3.0\n3.0\nNaN\n3.0\n3.0\n-783.0\n-783.000\nNaN\n-783.0\n-783.0\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.000000\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n0.0\nNaN\nNaN\nNaN\nNaN\n-2220.0\n-33.636364\n22.589062\n-77.0\n...\n0.0\nNaN\nNaN\nNaN\nNaN\n142.0\n23.666667\n0.516398\n23.0\n24.0\n0.0\n0.000000\n0.000000\n0.0\n0.0\n-7337.0\n-1222.833333\n717.268546\n-2357.0\n-374.0\n3.0\n0.500000\n1.224745\n0.0\n3.0\n42.0\n7.000000\n0.000000\n7.0\n7.0\n28.0\n4.666667\n2.875181\n1.0\n7.0\n10.0\n1.666667\n0.816497\n0.0\n2.0\n112.0\n18.666667\n12.909944\n2.0\n27.0\n14.0\n2.333333\n0.516398\n2.0\n3.0\n7.0\n1.166667\n0.983192\n0.0\n2.0\n23.0\n3.833333\n2.041241\n0.0\n6.0\n2455.0\n409.166667\n612.914812\n-1.0\n1200.0\n34.0\n5.666667\n3.444803\n2.0\n10.0\n124.0\n20.666667\n14.348054\n10.0\n48.0\n15.0\n2.500000\n1.643168\n1.0\n4.0\n49.0\n8.166667\n3.188521\n3.0\n13.0\n1826215.0\n365243.0\n0.0\n365243.0\n365243.0\n-6316.0\n-1263.200000\n777.378415\n-2326.0\n-344.0\n-4186.0\n-837.200000\n932.826458\n-2056.0\n346.0\n360681.0\n72136.200000\n163852.966178\n-2056.0\n365243.0\n360719.0\n72143.800000\n163848.705729\n-2041.0\n365243.0\n3.0\n0.600000\n0.547723\n0.0\n1.0\n77.0\n1.166667\n0.375534\n1.0\n2.0\n465.0\n7.045455\n4.092890\n1.0\n17.0\n-67888.0\n-1028.606061\n682.127529\n-2326.0\n-14.0\n-68128.0\n-1032.242424\n679.657245\n-2318.0\n-14.0\n835985.340\n12666.444545\n7852.910669\n1821.780\n22678.785\n806127.975\n12214.060227\n8048.060877\n0.180\n22678.785\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n5 rows × 586 columns\n\n\n\n\nmissing_values = final_data.isnull().sum()/len(final_data)\n## filter columns with zero missing values\nmissing_values = missing_values[missing_values &gt; 0.65]\nmissing_data = pd.DataFrame({'value': missing_values})\nmissing_data = missing_data['value'].sort_values(ascending = False)\nprint(len(missing_data))\n\n143\n\n\n\ncols = missing_data.index.tolist()\ncols\n\ndata = final_data.drop(cols, axis=1)\nall_data = data.drop('SK_ID_CURR', axis = 1)\n\n\nX_train = all_data[:ntrain]\nX_train.columns = [\"\".join (c if c.isalnum() else \"_\" for c in str(x)) for x in X_train.columns]\nX_test = all_data[ntrain:]\nX_test.columns = [\"\".join (c if c.isalnum() else \"_\" for c in str(x)) for x in X_test.columns]\nprint('Shape of train :', X_train.shape)\nprint('Shape of test :', X_test.shape)\n\nShape of train : (307511, 442)\nShape of test : (48744, 442)"
  },
  {
    "objectID": "index.html#core-skills",
    "href": "index.html#core-skills",
    "title": "UZAYR A",
    "section": "CORE SKILLS",
    "text": "CORE SKILLS\n\n\n\nExpert\n\n SQL\n Python\n Power BI\n Azure DataBricks\n IBM Cognos\n\n\n\n\nIntermediate\n\n Azure Data Factory\n Alteryx\n Tableau\n R Programming\n\n\n\n\nBeginner\n\n PySpark\n Dbt\n SAP\n Workday"
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "UZAYR A",
    "section": "EDUCATION",
    "text": "EDUCATION\n\n\nMSc Financial Economics Otto-Von-Guericke University | Magdeburg, Germany\n\n\nOct 2024 – Present\n\n\n\n\n\nMSc Business Analysis & Consulting University of Strathclyde | Glasgow, United Kingdom\n\n\nSept 2021 – Sept 2022\n\n\n\n\n\nBachelor of Business Administration SZABIST | Dubai, United Arab Emirates\n\n\nAug 2015 – Jan 2021"
  },
  {
    "objectID": "index.html#experience",
    "href": "index.html#experience",
    "title": "UZAYR A",
    "section": "EXPERIENCE",
    "text": "EXPERIENCE\n\n\nData Science Analyst ASDA | Leeds, United Kingdom Revenue: 20+ Billion GBP Employees: 130,000+\n\n\nNov 2022 – Dec 2024\n\n\n\n\n\nPowerBI Content Creator Intern (Remote) TrainAnalytics | Melbourne, Australia Non-Profit Organisation\n\n\nMay 2020 – Oct 2020"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#section",
    "href": "Data Cleaning/slideshow.html#section",
    "title": "Bringing boring data to life",
    "section": "",
    "text": "Data Cleaning\n\n\nData cleaning is a crucial process that involves identifying and correcting errors, inconsistencies, and inaccuracies in datasets. Its importance stems from the significant impact it has on the reliability and effectiveness of data-driven decision-making"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#section-1",
    "href": "Data Cleaning/slideshow.html#section-1",
    "title": "Bringing boring data to life",
    "section": "",
    "text": "Pros of clean data\n\n\n\nImproves Accuracy and Reliability of Analysis\nDecisions based on clean, high-quality data are more likely to be effective and aligned with business goals\nAccurate data allows for a clearer understanding of trends, customer behavior, and market dynamics, enabling organizations to identify opportunities and mitigate risks effectively\nClean data ensures that reports and analyses are trustworthy, leading to greater confidence among stakeholders\nClean data facilitates smoother data integration and processing across different systems and applications\nPoor data quality can lead to mistakes like overstocking inventory, misinterpreting customer behavior, and inefficient marketing campaigns, all of which can result in significant financial losses"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#section-2",
    "href": "Data Cleaning/slideshow.html#section-2",
    "title": "Bringing boring data to life",
    "section": "",
    "text": "What to watch out for\n\n\n\nGarbage in, garbage out\nAvoids costly errors\nStorage costs\nRegulatory requirements\nSecurity risks"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#data-process-1",
    "href": "Data Cleaning/slideshow.html#data-process-1",
    "title": "Bringing boring data to life",
    "section": "Data Process",
    "text": "Data Process"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#data-investigation",
    "href": "Data Cleaning/slideshow.html#data-investigation",
    "title": "Bringing boring data to life",
    "section": "Data Investigation",
    "text": "Data Investigation\n\n\n\n\nprint(f\"Rows: {df.shape[0]}\")\nprint(f\"Columns: {df.shape[1]}\")\n\n\nRows: 1460\nColumns: 81"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#data-investigation-1",
    "href": "Data Cleaning/slideshow.html#data-investigation-1",
    "title": "Bringing boring data to life",
    "section": "Data Investigation",
    "text": "Data Investigation\n\n\n\n\n\n\n\n\n\nId\nMSSubClass\nMSZoning\nLotFrontage\nLotArea\nStreet\nAlley\nLotShape\nLandContour\nUtilities\nLotConfig\nLandSlope\nNeighborhood\nCondition1\nCondition2\nBldgType\nHouseStyle\nOverallQual\nOverallCond\nYearBuilt\nYearRemodAdd\nRoofStyle\nRoofMatl\nExterior1st\nExterior2nd\nMasVnrType\nMasVnrArea\nExterQual\nExterCond\nFoundation\nBsmtQual\nBsmtCond\nBsmtExposure\nBsmtFinType1\nBsmtFinSF1\nBsmtFinType2\nBsmtFinSF2\nBsmtUnfSF\nTotalBsmtSF\nHeating\nHeatingQC\nCentralAir\nElectrical\n1stFlrSF\n2ndFlrSF\nLowQualFinSF\nGrLivArea\nBsmtFullBath\nBsmtHalfBath\nFullBath\nHalfBath\nBedroomAbvGr\nKitchenAbvGr\nKitchenQual\nTotRmsAbvGrd\nFunctional\nFireplaces\nFireplaceQu\nGarageType\nGarageYrBlt\nGarageFinish\nGarageCars\nGarageArea\nGarageQual\nGarageCond\nPavedDrive\nWoodDeckSF\nOpenPorchSF\nEnclosedPorch\n3SsnPorch\nScreenPorch\nPoolArea\nPoolQC\nFence\nMiscFeature\nMiscVal\nMoSold\nYrSold\nSaleType\nSaleCondition\nSalePrice\n\n\n\n\n0\n1\n60\nRL\n65.0\n8450\nPave\nNaN\nReg\nLvl\nAllPub\nInside\nGtl\nCollgCr\nNorm\nNorm\n1Fam\n2Story\n7\n5\n2003\n2003\nGable\nCompShg\nVinylSd\nVinylSd\nBrkFace\n196.0\nGd\nTA\nPConc\nGd\nTA\nNo\nGLQ\n706\nUnf\n0\n150\n856\nGasA\nEx\nY\nSBrkr\n856\n854\n0\n1710\n1\n0\n2\n1\n3\n1\nGd\n8\nTyp\n0\nNaN\nAttchd\n2003.0\nRFn\n2\n548\nTA\nTA\nY\n0\n61\n0\n0\n0\n0\nNaN\nNaN\nNaN\n0\n2\n2008\nWD\nNormal\n208500\n\n\n1\n2\n20\nRL\n80.0\n9600\nPave\nNaN\nReg\nLvl\nAllPub\nFR2\nGtl\nVeenker\nFeedr\nNorm\n1Fam\n1Story\n6\n8\n1976\n1976\nGable\nCompShg\nMetalSd\nMetalSd\nNaN\n0.0\nTA\nTA\nCBlock\nGd\nTA\nGd\nALQ\n978\nUnf\n0\n284\n1262\nGasA\nEx\nY\nSBrkr\n1262\n0\n0\n1262\n0\n1\n2\n0\n3\n1\nTA\n6\nTyp\n1\nTA\nAttchd\n1976.0\nRFn\n2\n460\nTA\nTA\nY\n298\n0\n0\n0\n0\n0\nNaN\nNaN\nNaN\n0\n5\n2007\nWD\nNormal\n181500\n\n\n2\n3\n60\nRL\n68.0\n11250\nPave\nNaN\nIR1\nLvl\nAllPub\nInside\nGtl\nCollgCr\nNorm\nNorm\n1Fam\n2Story\n7\n5\n2001\n2002\nGable\nCompShg\nVinylSd\nVinylSd\nBrkFace\n162.0\nGd\nTA\nPConc\nGd\nTA\nMn\nGLQ\n486\nUnf\n0\n434\n920\nGasA\nEx\nY\nSBrkr\n920\n866\n0\n1786\n1\n0\n2\n1\n3\n1\nGd\n6\nTyp\n1\nTA\nAttchd\n2001.0\nRFn\n2\n608\nTA\nTA\nY\n0\n42\n0\n0\n0\n0\nNaN\nNaN\nNaN\n0\n9\n2008\nWD\nNormal\n223500\n\n\n3\n4\n70\nRL\n60.0\n9550\nPave\nNaN\nIR1\nLvl\nAllPub\nCorner\nGtl\nCrawfor\nNorm\nNorm\n1Fam\n2Story\n7\n5\n1915\n1970\nGable\nCompShg\nWd Sdng\nWd Shng\nNaN\n0.0\nTA\nTA\nBrkTil\nTA\nGd\nNo\nALQ\n216\nUnf\n0\n540\n756\nGasA\nGd\nY\nSBrkr\n961\n756\n0\n1717\n1\n0\n1\n0\n3\n1\nGd\n7\nTyp\n1\nGd\nDetchd\n1998.0\nUnf\n3\n642\nTA\nTA\nY\n0\n35\n272\n0\n0\n0\nNaN\nNaN\nNaN\n0\n2\n2006\nWD\nAbnorml\n140000\n\n\n4\n5\n60\nRL\n84.0\n14260\nPave\nNaN\nIR1\nLvl\nAllPub\nFR2\nGtl\nNoRidge\nNorm\nNorm\n1Fam\n2Story\n8\n5\n2000\n2000\nGable\nCompShg\nVinylSd\nVinylSd\nBrkFace\n350.0\nGd\nTA\nPConc\nGd\nTA\nAv\nGLQ\n655\nUnf\n0\n490\n1145\nGasA\nEx\nY\nSBrkr\n1145\n1053\n0\n2198\n1\n0\n2\n1\n4\n1\nGd\n9\nTyp\n1\nTA\nAttchd\n2000.0\nRFn\n3\n836\nTA\nTA\nY\n192\n84\n0\n0\n0\n0\nNaN\nNaN\nNaN\n0\n12\n2008\nWD\nNormal\n250000"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#missing-values..",
    "href": "Data Cleaning/slideshow.html#missing-values..",
    "title": "Bringing boring data to life",
    "section": "Missing Values…..",
    "text": "Missing Values…..\n\n\nmissing=(df.isnull().sum() / len(df)) * 100\n\n## Missing percentage &gt; 0\nmissing=missing[missing &gt; 0] \n\n## Convert to dataframe and sort values\nmissing_df=pd.DataFrame({'Missing Values' : missing})\nmissing_df=missing_df['Missing Values'].sort_values(ascending = False)\n\nf, ax = plt.subplots(figsize=(6,6))\nsns.barplot(x=missing_df.index, y=missing_df.values, ax=ax)\nplt.title('Columns with missing Values', fontsize = 14)\nplt.xlabel('', fontsize = 10)\nplt.ylabel('%', fontsize = 10)\nplt.xticks(rotation = 'vertical')\nplt.show()"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#remove-columns",
    "href": "Data Cleaning/slideshow.html#remove-columns",
    "title": "Bringing boring data to life",
    "section": "Remove Columns",
    "text": "Remove Columns\n\n\ncols_to_drop = missing[missing &gt; 60].index\ndf_cleaned = df.drop(columns=cols_to_drop)\n\n# Compare the number of columns\ncompare_data={\n'Data': ['Raw', 'Cleaned Data'],\n'Columns': [df.shape[1], df_cleaned.shape[1]]\n}\n\nprint(pd.DataFrame(compare_data))\n\n\n           Data  Columns\n0           Raw       81\n1  Cleaned Data       77"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#missing-value-imputation",
    "href": "Data Cleaning/slideshow.html#missing-value-imputation",
    "title": "Bringing boring data to life",
    "section": "Missing value imputation",
    "text": "Missing value imputation\nFilling with None\n\n\ncols=['FireplaceQu',\n'GarageType', \n'GarageFinish',\n'GarageQual', \n'GarageCond', \n'BsmtQual', \n'BsmtCond',\n'BsmtExposure',\n'BsmtFinType1', \n'BsmtFinType2',\n'MasVnrType', \n'MSSubClass']\nfor col in cols:\n    df_cleaned[col] = df_cleaned[col].fillna('None')\n\ndf_cleaned['FireplaceQu'].value_counts()\n\n\nFireplaceQu\nNone    690\nGd      380\nTA      313\nFa       33\nEx       24\nPo       20\nName: count, dtype: int64"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#missing-value-imputation-1",
    "href": "Data Cleaning/slideshow.html#missing-value-imputation-1",
    "title": "Bringing boring data to life",
    "section": "Missing value imputation",
    "text": "Missing value imputation\nFilling with 0\n\n\ncolumns = ['BsmtFinSF1', \n'BsmtFinSF2', \n'BsmtUnfSF',\n'TotalBsmtSF',\n'BsmtFullBath', \n'BsmtHalfBath',\n'MasVnrArea', \n'GarageYrBlt', \n'GarageArea', \n'GarageCars']\nfor col in columns:\n    df_cleaned[col] = df_cleaned[col].fillna(0)\n\nprint(df_cleaned[cols].isnull().sum())\n\n\nFireplaceQu     0\nGarageType      0\nGarageFinish    0\nGarageQual      0\nGarageCond      0\nBsmtQual        0\nBsmtCond        0\nBsmtExposure    0\nBsmtFinType1    0\nBsmtFinType2    0\nMasVnrType      0\nMSSubClass      0\ndtype: int64"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#missing-value-imputation-2",
    "href": "Data Cleaning/slideshow.html#missing-value-imputation-2",
    "title": "Bringing boring data to life",
    "section": "Missing value imputation",
    "text": "Missing value imputation\nFilling with Median\n\ndf_cleaned[\"LotFrontage\"] = df_cleaned.groupby(\"Neighborhood\")[\"LotFrontage\"].transform(\n    lambda x: x.fillna(x.median()))\nlot_front = df_cleaned[\"LotFrontage\"].isnull().sum()\nprint(f\"Neighborhoods with remaining missing LotFrontage: {lot_front}\")\n\n\n\nNeighborhoods with remaining missing LotFrontage: 0"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#remove-columns-with-near-zero-variance",
    "href": "Data Cleaning/slideshow.html#remove-columns-with-near-zero-variance",
    "title": "Bringing boring data to life",
    "section": "Remove columns with near zero variance",
    "text": "Remove columns with near zero variance\nIdentify Near Zero variance\n\nnear_zero_variance_cols = []\nfor col in df_cleaned.select_dtypes(include='object').columns:\n    value_counts = df[col].value_counts(normalize=True)\n    if len(value_counts) &gt; 0 and value_counts.iloc[0] &gt;= 0.8:\n        near_zero_variance_cols.append(col)\nprint(near_zero_variance_cols)\n\n\n\n['Street', 'LandContour', 'Utilities', 'LandSlope', 'Condition1', 'Condition2', 'BldgType', 'RoofMatl', 'ExterCond', 'BsmtCond', 'BsmtFinType2', 'Heating', 'CentralAir', 'Electrical', 'Functional', 'GarageQual', 'GarageCond', 'PavedDrive', 'SaleType', 'SaleCondition']"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#remove-columns-with-near-zero-variance-1",
    "href": "Data Cleaning/slideshow.html#remove-columns-with-near-zero-variance-1",
    "title": "Bringing boring data to life",
    "section": "Remove columns with near zero variance",
    "text": "Remove columns with near zero variance\nDrop the near zero variance\n\ndf_cleaned = df_cleaned.drop(columns=near_zero_variance_cols)\ncompare_data = {\n    'Dataset': ['Raw Data', 'Cleaned Data'],\n    'Number of Columns': [df.shape[1], df_cleaned.shape[1]]\n}\nprint(pd.DataFrame(compare_data).to_string(index=False))\n\n\n\n     Dataset  Number of Columns\n    Raw Data                 81\nCleaned Data                 57"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#so-how-does-the-cleaned-data-look-like",
    "href": "Data Cleaning/slideshow.html#so-how-does-the-cleaned-data-look-like",
    "title": "Bringing boring data to life",
    "section": "So, How does the cleaned data look like?",
    "text": "So, How does the cleaned data look like?\nTake a Peak\n\nprint(df_cleaned.isnull().sum())\n\n\n\nId               0\nMSSubClass       0\nMSZoning         0\nLotFrontage      0\nLotArea          0\nLotShape         0\nLotConfig        0\nNeighborhood     0\nHouseStyle       0\nOverallQual      0\nOverallCond      0\nYearBuilt        0\nYearRemodAdd     0\nRoofStyle        0\nExterior1st      0\nExterior2nd      0\nMasVnrType       0\nMasVnrArea       0\nExterQual        0\nFoundation       0\nBsmtQual         0\nBsmtExposure     0\nBsmtFinType1     0\nBsmtFinSF1       0\nBsmtFinSF2       0\nBsmtUnfSF        0\nTotalBsmtSF      0\nHeatingQC        0\n1stFlrSF         0\n2ndFlrSF         0\nLowQualFinSF     0\nGrLivArea        0\nBsmtFullBath     0\nBsmtHalfBath     0\nFullBath         0\nHalfBath         0\nBedroomAbvGr     0\nKitchenAbvGr     0\nKitchenQual      0\nTotRmsAbvGrd     0\nFireplaces       0\nFireplaceQu      0\nGarageType       0\nGarageYrBlt      0\nGarageFinish     0\nGarageCars       0\nGarageArea       0\nWoodDeckSF       0\nOpenPorchSF      0\nEnclosedPorch    0\n3SsnPorch        0\nScreenPorch      0\nPoolArea         0\nMiscVal          0\nMoSold           0\nYrSold           0\nSalePrice        0\ndtype: int64"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#and-what-about-the-column-types",
    "href": "Data Cleaning/slideshow.html#and-what-about-the-column-types",
    "title": "Bringing boring data to life",
    "section": "And what about the column types?",
    "text": "And what about the column types?\n\nprint(df_cleaned.dtypes)\n\n\n\nId                 int64\nMSSubClass         int64\nMSZoning          object\nLotFrontage      float64\nLotArea            int64\nLotShape          object\nLotConfig         object\nNeighborhood      object\nHouseStyle        object\nOverallQual        int64\nOverallCond        int64\nYearBuilt          int64\nYearRemodAdd       int64\nRoofStyle         object\nExterior1st       object\nExterior2nd       object\nMasVnrType        object\nMasVnrArea       float64\nExterQual         object\nFoundation        object\nBsmtQual          object\nBsmtExposure      object\nBsmtFinType1      object\nBsmtFinSF1         int64\nBsmtFinSF2         int64\nBsmtUnfSF          int64\nTotalBsmtSF        int64\nHeatingQC         object\n1stFlrSF           int64\n2ndFlrSF           int64\nLowQualFinSF       int64\nGrLivArea          int64\nBsmtFullBath       int64\nBsmtHalfBath       int64\nFullBath           int64\nHalfBath           int64\nBedroomAbvGr       int64\nKitchenAbvGr       int64\nKitchenQual       object\nTotRmsAbvGrd       int64\nFireplaces         int64\nFireplaceQu       object\nGarageType        object\nGarageYrBlt      float64\nGarageFinish      object\nGarageCars         int64\nGarageArea         int64\nWoodDeckSF         int64\nOpenPorchSF        int64\nEnclosedPorch      int64\n3SsnPorch          int64\nScreenPorch        int64\nPoolArea           int64\nMiscVal            int64\nMoSold             int64\nYrSold             int64\nSalePrice          int64\ndtype: object"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#section-3",
    "href": "Data Cleaning/slideshow.html#section-3",
    "title": "Bringing boring data to life",
    "section": "",
    "text": "Numeric to Categorical\n\n\ncols = [\"MSSubClass\", \n\"OverallCond\", \n\"YrSold\", \n\"MoSold\"]\nfor col in cols:\n    df_cleaned[col]=df_cleaned[col].astype(str)\n\nprint(df_cleaned[cols].dtypes)\n\n\nMSSubClass     object\nOverallCond    object\nYrSold         object\nMoSold         object\ndtype: object"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#total-area",
    "href": "Data Cleaning/slideshow.html#total-area",
    "title": "Bringing boring data to life",
    "section": "Total Area",
    "text": "Total Area\n\ndf_cleaned['TotalArea'] = df_cleaned['TotalBsmtSF'] + df_cleaned['1stFlrSF'] + df_cleaned['2ndFlrSF']\ndf_cleaned[['TotalBsmtSF', '1stFlrSF', '2ndFlrSF', 'TotalArea']].head()\n\n\n\n\n\n\n\n\n\n\nTotalBsmtSF\n1stFlrSF\n2ndFlrSF\nTotalArea\n\n\n\n\n0\n856\n856\n854\n2566\n\n\n1\n1262\n1262\n0\n2524\n\n\n2\n920\n920\n866\n2706\n\n\n3\n756\n961\n756\n2473\n\n\n4\n1145\n1145\n1053\n3343"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#label-encoding",
    "href": "Data Cleaning/slideshow.html#label-encoding",
    "title": "Bringing boring data to life",
    "section": "Label Encoding",
    "text": "Label Encoding\n\nclean_variables = {\"LotShape\": {\"IR3\": 0, \"IR2\": 1, \"IR1\": 2, \"Reg\": 3},\n                   \"ExterQual\": {\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                   \"ExterCond\": {\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                   \"BsmtQual\": {\"None\": 0,\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                  \"BsmtCond\": {\"None\": 0,\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                  \"BsmtExposure\": {\"None\": 0, \"No\": 1, \"Mn\": 2, \"Av\": 3, \"Gd\": 4},\n                  \"BsmtFinType1\": {\"None\": 0, \"Unf\": 1, \"LwQ\": 2, \"Rec\": 3, \"BLQ\": 4, \"ALQ\": 5, \"GLQ\": 6},\n                  \"BsmtFinType2\": {\"None\": 0, \"Unf\": 1, \"LwQ\": 2, \"Rec\": 3, \"BLQ\": 4, \"ALQ\": 5, \"GLQ\": 6},\n                  \"HeatingQC\": {\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                  \"KitchenQual\": {\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                   \"FireplaceQu\": {\"None\": 0,\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                  \"GarageFinish\": {\"None\": 0, \"Unf\": 1, \"RFn\": 2, \"Fin\": 3},\n                  \"GarageQual\": {\"None\": 0,\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                  \"GarageCond\": {\"None\": 0,\"Po\": 1, \"Fa\": 2, \"TA\": 3, \"Gd\": 4, \"Ex\": 5},\n                  \"Fence\": {\"None\": 0, \"MnWw\": 1, \"GdWw\": 2, \"MnPrv\": 3, \"GdPrv\": 4}}\n\ndf_cleaned.replace(clean_variables, inplace=True)"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#price-vs-living-area",
    "href": "Data Cleaning/slideshow.html#price-vs-living-area",
    "title": "Bringing boring data to life",
    "section": "Price vs Living Area",
    "text": "Price vs Living Area\nWith Outlier\n\nplt.scatter(df_cleaned['GrLivArea'], df_cleaned['SalePrice'])\nplt.xlabel('Living Area')\nplt.ylabel('Sale Price')\nplt.show()"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#price-vs-total-area",
    "href": "Data Cleaning/slideshow.html#price-vs-total-area",
    "title": "Bringing boring data to life",
    "section": "Price vs Total Area",
    "text": "Price vs Total Area\nWithout Outlier\n\ndf_cleaned = df_cleaned.drop(df_cleaned[(df_cleaned['GrLivArea'] &gt; 4000) & (df_cleaned['SalePrice'] &lt; 300000)].index)\nplt.scatter(df_cleaned['TotalArea'], df_cleaned['SalePrice'])\nplt.title('')\nplt.xlabel('Total Area')\nplt.ylabel('Sale Price')\nplt.show()"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#price-vs-overall-quality",
    "href": "Data Cleaning/slideshow.html#price-vs-overall-quality",
    "title": "Bringing boring data to life",
    "section": "Price vs Overall Quality",
    "text": "Price vs Overall Quality\n\nsns.boxplot(x = df_cleaned['OverallQual'],\n            y = df_cleaned['SalePrice'])\nplt.show()"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#price-vs-overall-quality-1",
    "href": "Data Cleaning/slideshow.html#price-vs-overall-quality-1",
    "title": "Bringing boring data to life",
    "section": "Price vs Overall Quality",
    "text": "Price vs Overall Quality\n\nplt.figure(figsize=(12, 5))\nsns.boxplot(x = df_cleaned['Neighborhood'],\n            y = df_cleaned['SalePrice'])\nplt.title('Sales Price And Neighbourhood')\nplt.xticks(rotation = 90)\nplt.show()"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#price-vs-house-style",
    "href": "Data Cleaning/slideshow.html#price-vs-house-style",
    "title": "Bringing boring data to life",
    "section": "Price vs House Style",
    "text": "Price vs House Style\n\nplt.figure(figsize=(12, 5))\nsns.boxplot(x = df_cleaned['HouseStyle'],\n            y = df_cleaned['SalePrice'])\nplt.xticks(rotation = 90)\nplt.show()"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#statistics",
    "href": "Data Cleaning/slideshow.html#statistics",
    "title": "Bringing boring data to life",
    "section": "Statistics",
    "text": "Statistics\n\nhouses_sold_per_neighborhood = df_cleaned.groupby('Neighborhood').size().reset_index(name='Number of Houses Sold')\n\naverage_price_per_neighborhood = df_cleaned.groupby('Neighborhood')['SalePrice'].mean().reset_index(name='Average Sale Price')\n\nneighborhood_sales_summary = pd.merge(houses_sold_per_neighborhood, average_price_per_neighborhood, on='Neighborhood')\n\nshow(neighborhood_sales_summary, scrollY=\"300px\", scrollCollapse=True, paging=False, buttons=[\"copyHtml5\", \"csvHtml5\", \"excelHtml5\"], classes=\"display nowrap table_with_monospace_font\", searching=False)"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#statistics-output",
    "href": "Data Cleaning/slideshow.html#statistics-output",
    "title": "Bringing boring data to life",
    "section": "Statistics",
    "text": "Statistics\n\n\n\n    \n      \n      Neighborhood\n      Number of Houses Sold\n      Average Sale Price\n    \n  \n\n\n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n   \n    \n      \n  \n        \n    \n    \n  \n        \n    \n    \n  \n        \n    \n      \n  \n        \n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n        \n    \n\n\nLoading ITables v2.3.0 from the internet...\n(need help?)"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#most-expensive",
    "href": "Data Cleaning/slideshow.html#most-expensive",
    "title": "Bringing boring data to life",
    "section": "Most Expensive",
    "text": "Most Expensive\n\ndf_exp = df_cleaned.sort_values(by='SalePrice', ascending=False)\n\ntop_10_exp = df_exp.head(10)\ntop_10_exp = top_10_exp.reset_index(drop=True)\n# Display the top 10 most expensive houses using itables\nshow(top_10_exp,\n     scrollY=\"300px\",\n     scrollCollapse=True,\n     paging=False,\n     classes=\"display compact cell-border\",\n     caption=\"Top 10 Most Expensive Houses\",\n     index=False,\n     buttons=[\"copyHtml5\", \"csvHtml5\", \"excelHtml5\"])"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#most-expensive-output",
    "href": "Data Cleaning/slideshow.html#most-expensive-output",
    "title": "Bringing boring data to life",
    "section": "Most Expensive",
    "text": "Most Expensive\n\n\nTop 10 Most Expensive Houses\n    \n      \n      Id\n      MSSubClass\n      MSZoning\n      LotFrontage\n      LotArea\n      LotShape\n      LotConfig\n      Neighborhood\n      HouseStyle\n      OverallQual\n      OverallCond\n      YearBuilt\n      YearRemodAdd\n      RoofStyle\n      Exterior1st\n      Exterior2nd\n      MasVnrType\n      MasVnrArea\n      ExterQual\n      Foundation\n      BsmtQual\n      BsmtExposure\n      BsmtFinType1\n      BsmtFinSF1\n      BsmtFinSF2\n      BsmtUnfSF\n      TotalBsmtSF\n      HeatingQC\n      1stFlrSF\n      2ndFlrSF\n      LowQualFinSF\n      GrLivArea\n      BsmtFullBath\n      BsmtHalfBath\n      FullBath\n      HalfBath\n      BedroomAbvGr\n      KitchenAbvGr\n      KitchenQual\n      TotRmsAbvGrd\n      Fireplaces\n      FireplaceQu\n      GarageType\n      GarageYrBlt\n      GarageFinish\n      GarageCars\n      GarageArea\n      WoodDeckSF\n      OpenPorchSF\n      EnclosedPorch\n      3SsnPorch\n      ScreenPorch\n      PoolArea\n      MiscVal\n      MoSold\n      YrSold\n      SalePrice\n      TotalArea\n    \n  \n\n\n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n   \n    \n      \n  \n        \n    \n    \n  \n        \n    \n    \n  \n        \n    \n      \n  \n        \n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n        \n    \n\n\nLoading ITables v2.3.0 from the internet...\n(need help?)"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#conclusion-1",
    "href": "Data Cleaning/slideshow.html#conclusion-1",
    "title": "Bringing boring data to life",
    "section": "Conclusion",
    "text": "Conclusion\n\nData cleaning and processing are not merely preliminary tasks; they are integral to unlocking the true potential of data\nInvesting time and resources in these stages yields significant returns in the form of enhanced accuracy, improved efficiency, reduced costs, and more confident, data-driven strategies"
  },
  {
    "objectID": "Data Cleaning/slideshow.html#conclusion-2",
    "href": "Data Cleaning/slideshow.html#conclusion-2",
    "title": "Bringing boring data to life",
    "section": "Conclusion",
    "text": "Conclusion\n\nRawCleaned\n\n\n\n\n\n\n    \n      \n      Id\n      MSSubClass\n      MSZoning\n      LotFrontage\n      LotArea\n      Street\n      Alley\n      LotShape\n      LandContour\n      Utilities\n      LotConfig\n      LandSlope\n      Neighborhood\n      Condition1\n      Condition2\n      BldgType\n      HouseStyle\n      OverallQual\n      OverallCond\n      YearBuilt\n      YearRemodAdd\n      RoofStyle\n      RoofMatl\n      Exterior1st\n      Exterior2nd\n      MasVnrType\n      MasVnrArea\n      ExterQual\n      ExterCond\n      Foundation\n      BsmtQual\n      BsmtCond\n      BsmtExposure\n      BsmtFinType1\n      BsmtFinSF1\n      BsmtFinType2\n      BsmtFinSF2\n      BsmtUnfSF\n      TotalBsmtSF\n      Heating\n      HeatingQC\n      CentralAir\n      Electrical\n      1stFlrSF\n      2ndFlrSF\n      LowQualFinSF\n      GrLivArea\n      BsmtFullBath\n      BsmtHalfBath\n      FullBath\n      HalfBath\n      BedroomAbvGr\n      KitchenAbvGr\n      KitchenQual\n      TotRmsAbvGrd\n      Functional\n      Fireplaces\n      FireplaceQu\n      GarageType\n      GarageYrBlt\n      GarageFinish\n      GarageCars\n      GarageArea\n      GarageQual\n      GarageCond\n      PavedDrive\n      WoodDeckSF\n      OpenPorchSF\n      EnclosedPorch\n      3SsnPorch\n      ScreenPorch\n      PoolArea\n      PoolQC\n      Fence\n      MiscFeature\n      MiscVal\n      MoSold\n      YrSold\n      SaleType\n      SaleCondition\n      SalePrice\n    \n  \n\n\n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n   \n    \n      \n  \n        \n    \n    \n  \n        \n    \n    \n  \n        \n    \n      \n  \n        \n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n        \n    \n\n\nLoading ITables v2.3.0 from the internet...\n(need help?)\n\n\n\n\n\n\n\n\n\n\n\nView of cleaned data\n    \n      \n      Id\n      MSSubClass\n      MSZoning\n      LotFrontage\n      LotArea\n      LotShape\n      LotConfig\n      Neighborhood\n      HouseStyle\n      OverallQual\n      OverallCond\n      YearBuilt\n      YearRemodAdd\n      RoofStyle\n      Exterior1st\n      Exterior2nd\n      MasVnrType\n      MasVnrArea\n      ExterQual\n      Foundation\n      BsmtQual\n      BsmtExposure\n      BsmtFinType1\n      BsmtFinSF1\n      BsmtFinSF2\n      BsmtUnfSF\n      TotalBsmtSF\n      HeatingQC\n      1stFlrSF\n      2ndFlrSF\n      LowQualFinSF\n      GrLivArea\n      BsmtFullBath\n      BsmtHalfBath\n      FullBath\n      HalfBath\n      BedroomAbvGr\n      KitchenAbvGr\n      KitchenQual\n      TotRmsAbvGrd\n      Fireplaces\n      FireplaceQu\n      GarageType\n      GarageYrBlt\n      GarageFinish\n      GarageCars\n      GarageArea\n      WoodDeckSF\n      OpenPorchSF\n      EnclosedPorch\n      3SsnPorch\n      ScreenPorch\n      PoolArea\n      MiscVal\n      MoSold\n      YrSold\n      SalePrice\n      TotalArea\n    \n  \n\n\n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n   \n    \n      \n  \n        \n    \n    \n  \n        \n    \n    \n  \n        \n    \n      \n  \n        \n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n        \n    \n\n\nLoading ITables v2.3.0 from the internet...\n(need help?)"
  },
  {
    "objectID": "project.html",
    "href": "project.html",
    "title": "Personal Projects",
    "section": "",
    "text": "This initiative involved the creation of an in-depth presentation on data cleaning and transformation methodologies, built using the Quarto publishing system. The guide emphasizes practical application using the Pandas library for data manipulation and Plotly for generating insightful and interactive visualizations. The primary goal was to produce a clear and concise resource for individuals looking to effectively clean, transform, and present data.\nView project"
  },
  {
    "objectID": "project.html#data-cleaning-and-transformation-guide",
    "href": "project.html#data-cleaning-and-transformation-guide",
    "title": "Personal Projects",
    "section": "",
    "text": "This initiative involved the creation of an in-depth presentation on data cleaning and transformation methodologies, built using the Quarto publishing system. The guide emphasizes practical application using the Pandas library for data manipulation and Plotly for generating insightful and interactive visualizations. The primary goal was to produce a clear and concise resource for individuals looking to effectively clean, transform, and present data.\nView project"
  },
  {
    "objectID": "project.html#financial-analysis",
    "href": "project.html#financial-analysis",
    "title": "Personal Projects",
    "section": "2. Financial Analysis",
    "text": "2. Financial Analysis\n\n\nThis project involved developing a visual dashboard to facilitate the analysis of company financial performance and the determination of stock intrinsic value. The dashboard aims to provide actionable insights for investment decisions by presenting key financial ratios and valuation outputs in a clear and interactive format. This approach mirrors the structure used for analyzing a range of companies and their respective stocks.\n\n\n\n\n\n\nNote\n\n\n\nPlease note that this is a sample dashboard to showcase the automation of the analysis I do for stocks\n\n\nView Dashboard"
  },
  {
    "objectID": "project.html#face-mask-detection",
    "href": "project.html#face-mask-detection",
    "title": "Personal Projects",
    "section": "3. Face Mask Detection",
    "text": "3. Face Mask Detection\n\n\n\n\nThis project addressed the critical need for face mask detection during the COVID-19 pandemic by developing a robust CNN model. This technology has potential applications in various settings to automatically monitor mask usage and promote safer environments.\nView Project"
  },
  {
    "objectID": "project.html#restaurant-revenue-prediction",
    "href": "project.html#restaurant-revenue-prediction",
    "title": "Personal Projects",
    "section": "4. Restaurant Revenue Prediction",
    "text": "4. Restaurant Revenue Prediction\n\n\nThis project focused on building a robust revenue prediction model for restaurant branches using the XGBoost algorithm. By analyzing historical sales data and potentially other relevant factors (e.g., location, seasonality, promotions), the model aims to provide accurate forecasts to support inventory management, staffing decisions, and overall business strategy for the restaurant chain.\nView Project"
  },
  {
    "objectID": "project.html#credit-risk-modelling",
    "href": "project.html#credit-risk-modelling",
    "title": "Personal Projects",
    "section": "5. Credit Risk Modelling",
    "text": "5. Credit Risk Modelling\n\n\n\n\nThe project contains a “Brief Exploratory Data Analysis” section. This suggests that initial investigations were performed to understand the data’s characteristics, distributions of variables, and potential relationships. Weight of Evidence (WOE) and Information Value (IV) are calculated for the binned variables. WOE helps to transform categorical variables for logistic regression, and IV measures the predictive power of each variable. The performance of the logistic regression model is evaluated using the Area Under the Curve (AUC) on the test data. AUC measures the model’s ability to distinguish between borrowers who will default and those who will not. The trained logistic regression model is used to predict the probability of default for each loan in the dataset. An awareness of potential avenues for model improvement, such as exploring different algorithms and addressing class imbalance is also included.\nView Project"
  },
  {
    "objectID": "Credit Risk Modelling.html",
    "href": "Credit Risk Modelling.html",
    "title": "Introduction",
    "section": "",
    "text": "Lending club is a company which brings borrowers and investers together, altering the way people acquire loans. Lending club, in this dataset, complete data for all the loans provided from 2007 to 2015 with more than 22 million records including the status of loan i.e. whether a loan was paid on time or defaulted etc. The data can be found on this link.\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport os\nimport calendar\nimport datetime\nimport warnings\nimport matplotlib.pyplot as plt\nimport sys\nfrom datetime import datetime\nwarnings.filterwarnings('ignore')\nos.chdir(\"C://Users//uzair//Codes/Classification\\\\Credit Risk Modeling\")\npd.set_option('max_columns', None)\npd.set_option('max_rows', None)"
  },
  {
    "objectID": "Credit Risk Modelling.html#brief-exploratory-data-analysis",
    "href": "Credit Risk Modelling.html#brief-exploratory-data-analysis",
    "title": "Introduction",
    "section": "Brief Exploratory Data Analysis",
    "text": "Brief Exploratory Data Analysis\n\nplt.style.use('classic')\nsns.countplot(x=data['loan_status'])\nplt.title('Number of people according to Loan Status')\nplt.xticks(rotation = 90)\nplt.show()\n\n\n\n\n\n\n\n\nThis variable will be used as target variable in our logistic regression model. This variable has class imbalance problem. We can deal with this problem with the help of oversampling or undersampling.\n\nplt.style.use('classic')\nplt.figure(figsize=(10, 6))\n\nsns.countplot(x= data['grade'])\nplt.title('Number of People according to grade')\nplt.xticks(rotation = 45)\nplt.show()\n\n\n\n\n\n\n\n\nGrade is the rating from agency which explains the creditworthiness of the borrower. Grade A is the highest rating which means that the borrower is more likely to repay the loan on time whereas grade G is the lower rating, suggesting the lower creditworthiness of the borrower.\n\nsns.set(font_scale=1.2)\nplt.figure(figsize=(12, 6))\nplt.style.use('classic')\nsns.countplot(data['grade'], \n              hue = data['loan_status'], dodge=True)\nplt.title('Grade And Loan Status')\nplt.legend(prop={\"size\":10})\nplt.xticks(rotation = 90)\nplt.show()\n\n\n\n\n\n\n\n\nThe plot above clearly shows that people with higher credit ratings have paid their loans. The percentage of default increased as the rating decreased."
  },
  {
    "objectID": "Credit Risk Modelling.html#extracting-numeric-values-from-columns",
    "href": "Credit Risk Modelling.html#extracting-numeric-values-from-columns",
    "title": "Introduction",
    "section": "Extracting numeric values from columns",
    "text": "Extracting numeric values from columns\nLooking at the first 5 rows, we can see that some columns that are actually numeric, like emp_length, term, subgrade etc, are recorded as strings due to alphabets and + sign. We will simply extract numeric values from that column and store it new variable.\n\ndata['emp_length'].unique()\n\narray(['10+ years', '6 years', '4 years', '&lt; 1 year', '2 years',\n       '9 years', nan, '5 years', '3 years', '7 years', '1 year',\n       '8 years'], dtype=object)\n\n\n\ndata['emp_length_new'] = data['emp_length'].str.extract('(\\d+)')\ndata['emp_length_new'] = pd.to_numeric(data['emp_length_new'])\n\n\ndata['emp_length_new'].describe()\n\ncount    2.113761e+06\nmean     6.021241e+00\nstd      3.585463e+00\nmin      1.000000e+00\n25%      2.000000e+00\n50%      6.000000e+00\n75%      1.000000e+01\nmax      1.000000e+01\nName: emp_length_new, dtype: float64\n\n\n\ndata['term'].unique()\n\narray([' 36 months', ' 60 months'], dtype=object)\n\n\n\ndata['term_new'] = data['term'].str.extract('(\\d+)')\ndata['term_new'] = pd.to_numeric(data['term_new'])\n\n\ndata['term_new'].head()\n\n0    36\n1    60\n2    36\n3    36\n4    60\nName: term_new, dtype: int64\n\n\n\ndata.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nterm\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nemp_length\nhome_ownership\nannual_inc\nverification_status\nissue_d\nloan_status\npymnt_plan\nurl\ndesc\npurpose\ntitle\nzip_code\naddr_state\ndti\ndelinq_2yrs\nearliest_cr_line\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_d\nlast_pymnt_amnt\nnext_pymnt_d\nlast_credit_pull_d\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\ndebt_settlement_flag_date\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\n\n\n\n\n0\n2500\n2500\n2500.0\n36 months\n13.56\n84.92\nC\nC1\nChef\n10+ years\nRENT\n55000.0\nNot Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n109xx\nNY\n18.24\n0.0\nApr-2001\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\nFeb-2019\n84.92\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n\n\n1\n30000\n30000\n30000.0\n60 months\n18.94\n777.23\nD\nD2\nPostmaster\n10+ years\nMORTGAGE\n90000.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n713xx\nLA\n26.52\n0.0\nJun-1987\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\nFeb-2019\n777.23\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n\n\n2\n5000\n5000\n5000.0\n36 months\n17.97\n180.69\nD\nD1\nAdministrative\n6 years\nMORTGAGE\n59280.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n490xx\nMI\n10.51\n0.0\nApr-2011\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\nFeb-2019\n180.69\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n\n\n3\n4000\n4000\n4000.0\n36 months\n18.94\n146.51\nD\nD2\nIT Supervisor\n10+ years\nMORTGAGE\n92000.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n985xx\nWA\n16.74\n0.0\nFeb-2006\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\nFeb-2019\n146.51\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n\n\n4\n30000\n30000\n30000.0\n60 months\n16.14\n731.78\nC\nC4\nMechanic\n10+ years\nMORTGAGE\n57250.0\nNot Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n212xx\nMD\n26.35\n0.0\nDec-2000\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\nFeb-2019\n731.78\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60"
  },
  {
    "objectID": "Credit Risk Modelling.html#getting-dates",
    "href": "Credit Risk Modelling.html#getting-dates",
    "title": "Introduction",
    "section": "Getting Dates",
    "text": "Getting Dates\nWe have few strings that are actually date, so we will convert all those columns to date type.\n\ndata['earliest_cr_line_date'] = pd.to_datetime(data['earliest_cr_line'], format='%b-%Y')\ndata['issue_date'] = pd.to_datetime(data['issue_d'], format='%b-%Y')\ndata['last_pymnt_date'] = pd.to_datetime(data['last_pymnt_d'], format='%b-%Y')\ndata['next_pymnt_date'] = pd.to_datetime(data['next_pymnt_d'], format='%b-%Y')\ndata['last_credit_pull_date'] = pd.to_datetime(data['last_credit_pull_d'], format='%b-%Y')\ndata['debt_settlement_flag_date'] = pd.to_datetime(data['debt_settlement_flag_date'], format='%b-%Y')\n\n\ndata.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nterm\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nemp_length\nhome_ownership\nannual_inc\nverification_status\nissue_d\nloan_status\npymnt_plan\nurl\ndesc\npurpose\ntitle\nzip_code\naddr_state\ndti\ndelinq_2yrs\nearliest_cr_line\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_d\nlast_pymnt_amnt\nnext_pymnt_d\nlast_credit_pull_d\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\ndebt_settlement_flag_date\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\nearliest_cr_line_date\nissue_date\nlast_pymnt_date\nnext_pymnt_date\nlast_credit_pull_date\n\n\n\n\n0\n2500\n2500\n2500.0\n36 months\n13.56\n84.92\nC\nC1\nChef\n10+ years\nRENT\n55000.0\nNot Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n109xx\nNY\n18.24\n0.0\nApr-2001\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\nFeb-2019\n84.92\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n2001-04-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n\n\n1\n30000\n30000\n30000.0\n60 months\n18.94\n777.23\nD\nD2\nPostmaster\n10+ years\nMORTGAGE\n90000.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n713xx\nLA\n26.52\n0.0\nJun-1987\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\nFeb-2019\n777.23\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n1987-06-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n\n\n2\n5000\n5000\n5000.0\n36 months\n17.97\n180.69\nD\nD1\nAdministrative\n6 years\nMORTGAGE\n59280.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n490xx\nMI\n10.51\n0.0\nApr-2011\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\nFeb-2019\n180.69\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n2011-04-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n\n\n3\n4000\n4000\n4000.0\n36 months\n18.94\n146.51\nD\nD2\nIT Supervisor\n10+ years\nMORTGAGE\n92000.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n985xx\nWA\n16.74\n0.0\nFeb-2006\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\nFeb-2019\n146.51\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n2006-02-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n\n\n4\n30000\n30000\n30000.0\n60 months\n16.14\n731.78\nC\nC4\nMechanic\n10+ years\nMORTGAGE\n57250.0\nNot Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n212xx\nMD\n26.35\n0.0\nDec-2000\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\nFeb-2019\n731.78\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n2000-12-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n\n\n\n\n\n\n\nNow we will get the difference in months from earliest credit line date till now.\n\nprint(datetime.now())\n\n2020-07-25 08:23:59.374619\n\n\n\ndata['diff_from_er_crline_months'] = round(pd.to_numeric((pd.to_datetime('2020-07-24') - data['earliest_cr_line_date'])/np.timedelta64(1, \"M\")))\ndata['diff_from_issuedate_months'] = round(pd.to_numeric((pd.to_datetime('2020-07-24') - data['issue_date'])/np.timedelta64(1, \"M\")))\n\n\ndata.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nterm\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nemp_length\nhome_ownership\nannual_inc\nverification_status\nissue_d\nloan_status\npymnt_plan\nurl\ndesc\npurpose\ntitle\nzip_code\naddr_state\ndti\ndelinq_2yrs\nearliest_cr_line\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_d\nlast_pymnt_amnt\nnext_pymnt_d\nlast_credit_pull_d\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\ndebt_settlement_flag_date\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\nearliest_cr_line_date\nissue_date\nlast_pymnt_date\nnext_pymnt_date\nlast_credit_pull_date\ndiff_from_er_crline_months\ndiff_from_issuedate_months\n\n\n\n\n0\n2500\n2500\n2500.0\n36 months\n13.56\n84.92\nC\nC1\nChef\n10+ years\nRENT\n55000.0\nNot Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n109xx\nNY\n18.24\n0.0\nApr-2001\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\nFeb-2019\n84.92\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n2001-04-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n232.0\n20.0\n\n\n1\n30000\n30000\n30000.0\n60 months\n18.94\n777.23\nD\nD2\nPostmaster\n10+ years\nMORTGAGE\n90000.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n713xx\nLA\n26.52\n0.0\nJun-1987\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\nFeb-2019\n777.23\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n1987-06-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n398.0\n20.0\n\n\n2\n5000\n5000\n5000.0\n36 months\n17.97\n180.69\nD\nD1\nAdministrative\n6 years\nMORTGAGE\n59280.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n490xx\nMI\n10.51\n0.0\nApr-2011\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\nFeb-2019\n180.69\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n2011-04-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n112.0\n20.0\n\n\n3\n4000\n4000\n4000.0\n36 months\n18.94\n146.51\nD\nD2\nIT Supervisor\n10+ years\nMORTGAGE\n92000.0\nSource Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n985xx\nWA\n16.74\n0.0\nFeb-2006\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\nFeb-2019\n146.51\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n2006-02-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n174.0\n20.0\n\n\n4\n30000\n30000\n30000.0\n60 months\n16.14\n731.78\nC\nC4\nMechanic\n10+ years\nMORTGAGE\n57250.0\nNot Verified\nDec-2018\nCurrent\nn\nNaN\nNaN\ndebt_consolidation\nDebt consolidation\n212xx\nMD\n26.35\n0.0\nDec-2000\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\nFeb-2019\n731.78\nMar-2019\nFeb-2019\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n2000-12-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n236.0\n20.0\n\n\n\n\n\n\n\n\ndata[['grade', 'sub_grade']].head()\n\n\n\n\n\n\n\n\ngrade\nsub_grade\n\n\n\n\n0\nC\nC1\n\n\n1\nD\nD2\n\n\n2\nD\nD1\n\n\n3\nD\nD2\n\n\n4\nC\nC4"
  },
  {
    "objectID": "Credit Risk Modelling.html#dropping-few-string-columns",
    "href": "Credit Risk Modelling.html#dropping-few-string-columns",
    "title": "Introduction",
    "section": "Dropping few string columns",
    "text": "Dropping few string columns\n\ncol = ['last_pymnt_d', 'next_pymnt_d', 'last_credit_pull_d', 'issue_d',\n      'earliest_cr_line', 'term', 'emp_length', 'title', 'url', 'desc', 'zip_code']\n\nnew_data = data.drop(col, axis=1)\nnew_data.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\ndebt_settlement_flag_date\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\nearliest_cr_line_date\nissue_date\nlast_pymnt_date\nnext_pymnt_date\nlast_credit_pull_date\ndiff_from_er_crline_months\ndiff_from_issuedate_months\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n2001-04-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n232.0\n20.0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n1987-06-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n398.0\n20.0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n2011-04-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n112.0\n20.0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n2006-02-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n174.0\n20.0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaT\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n2000-12-01\n2018-12-01\n2019-02-01\n2019-03-01\n2019-02-01\n236.0\n20.0"
  },
  {
    "objectID": "Credit Risk Modelling.html#extracting-the-month-and-year-into-different-columns",
    "href": "Credit Risk Modelling.html#extracting-the-month-and-year-into-different-columns",
    "title": "Introduction",
    "section": "Extracting the month and year into different columns",
    "text": "Extracting the month and year into different columns\nI have added this code in comments incase the we extract months and years from the date columns.\n\n# new_data['earliest_cr_line_year'] = pd.DatetimeIndex(new_data['earliest_cr_line_date']).year\n# new_data['earliest_cr_line_month'] = pd.DatetimeIndex(new_data['earliest_cr_line_date']).month\n# new_data['issue_year'] = pd.DatetimeIndex(new_data['issue_date']).year\n# new_data['issue_month'] = pd.DatetimeIndex(new_data['issue_date']).month\n# new_data['last_pymnt_year'] = pd.DatetimeIndex(new_data['last_pymnt_date']).year\n# new_data['last_pymnt_month'] = pd.DatetimeIndex(new_data['last_pymnt_date']).month\n# new_data['next_pymnt_year'] = pd.DatetimeIndex(new_data['next_pymnt_date']).year\n# new_data['next_pymnt_month'] = pd.DatetimeIndex(new_data['next_pymnt_date']).month\n# new_data['last_credit_pull_year'] = pd.DatetimeIndex(new_data['last_credit_pull_date']).year\n# new_data['last_credit_pull_month'] = pd.DatetimeIndex(new_data['last_credit_pull_date']).month\n# new_data['debt_settlement_flag_year'] = pd.DatetimeIndex(new_data['debt_settlement_flag_date']).year\n# new_data['debt_settlement_flag_month'] = pd.DatetimeIndex(new_data['debt_settlement_flag_date']).month\n# new_data.head()"
  },
  {
    "objectID": "Credit Risk Modelling.html#removing-date-columns",
    "href": "Credit Risk Modelling.html#removing-date-columns",
    "title": "Introduction",
    "section": "Removing Date columns",
    "text": "Removing Date columns\n\ncol = ['earliest_cr_line_date', 'issue_date', 'last_pymnt_date', 'next_pymnt_date', 'last_credit_pull_date',\n      'debt_settlement_flag_date']\n\nnew_data_cleaned = new_data.drop(col, axis=1)\nnew_data_cleaned.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n232.0\n20.0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n398.0\n20.0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n112.0\n20.0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n174.0\n20.0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n236.0\n20.0\n\n\n\n\n\n\n\n\nnew_data_cleaned['good_bad'] = np.where(new_data_cleaned['loan_status'].isin(['Charged Off', 'Late (31-120 days)', 'Default',\n                                                              'Does not meet the credit policy. Status:Charged Off']),\n                             0, 1)\nbackup_new = new_data_cleaned.copy()\n# backup_new.drop('loan_status', axis = 1, inplace = True)\n\n\nnew_data_cleaned.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n232.0\n20.0\n1\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n398.0\n20.0\n1\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n112.0\n20.0\n1\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n174.0\n20.0\n1\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n236.0\n20.0\n1\n\n\n\n\n\n\n\n\nEDA after creation of good/bad variable\n\nplt.figure(figsize = (15, 15))\n# iterate through the sources\nfor i, source in enumerate(['funded_amnt', 'int_rate', 'loan_amnt']):\n    plt.subplot(3, 1, i + 1)\n    sns.kdeplot(new_data_cleaned.loc[new_data_cleaned['good_bad'] == 0, source], label = 'Loan == Default')\n    sns.kdeplot(new_data_cleaned.loc[new_data_cleaned['good_bad'] == 1, source], label = 'Loan == Paid')\n    # Label the plots\n    plt.title('Distribution of %s by Loan Status ' % source)\n    plt.xlabel('%s' % source); plt.ylabel('Density');\nplt.tight_layout(h_pad = 2.5)\nplt.show()\n\n\n\n\n\n\n\n\nIt seems that the number of default increases as the interest rate increases, which seems obvious as people have to pay more.\n\n\nGet dummies\n\ndummies = [pd.get_dummies(backup_new['grade'], prefix='grade', prefix_sep='_'),\n          pd.get_dummies(backup_new['sub_grade'], prefix='sub_grade', prefix_sep='_'),\n          pd.get_dummies(backup_new['purpose'], prefix='purpose', prefix_sep='_'),\n          pd.get_dummies(backup_new['home_ownership'], prefix='home_ownership', prefix_sep='_'),\n          pd.get_dummies(backup_new['verification_status'], prefix='verification_status', prefix_sep='_'),\n          pd.get_dummies(backup_new['initial_list_status'], prefix='initial_list_status', prefix_sep='_'),\n          pd.get_dummies(backup_new['addr_state'], prefix='addr_state', prefix_sep='_')]\n\ndummies = pd.concat(dummies, axis=1)\nprint(dummies.shape)\ndummies.head()\n\n(2260668, 118)\n\n\n\n\n\n\n\n\n\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\n\n\n\n\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n\n\n4\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n\n\n\n\n\n\ndummies_df = pd.concat([backup_new, dummies], axis= 1)\nprint(dummies_df.shape)\ndummies_df.head()\n\n(2260668, 254)\n\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nmths_since_last_record\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nannual_inc_joint\ndti_joint\nverification_status_joint\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_bc_dlq\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nrevol_bal_joint\nsec_app_earliest_cr_line\nsec_app_inq_last_6mths\nsec_app_mort_acc\nsec_app_open_acc\nsec_app_revol_util\nsec_app_open_act_il\nsec_app_num_rev_accts\nsec_app_chargeoff_within_12_mths\nsec_app_collections_12_mths_ex_med\nsec_app_mths_since_last_major_derog\nhardship_flag\nhardship_type\nhardship_reason\nhardship_status\ndeferral_term\nhardship_amount\nhardship_start_date\nhardship_end_date\npayment_plan_start_date\nhardship_length\nhardship_dpd\nhardship_loan_status\norig_projected_additional_accrued_interest\nhardship_payoff_balance_amount\nhardship_last_payment_amount\ndisbursement_method\ndebt_settlement_flag\nsettlement_status\nsettlement_date\nsettlement_amount\nsettlement_percentage\nsettlement_term\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n45.0\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\nNaN\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n232.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n75.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\nNaN\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n398.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\nNaN\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n6.0\n36\n112.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\nNaN\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n36\n174.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\nNaN\nNaN\nNaN\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\nNaN\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nCash\nN\nNaN\nNaN\nNaN\nNaN\nNaN\n10.0\n60\n236.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0"
  },
  {
    "objectID": "Credit Risk Modelling.html#missing-values",
    "href": "Credit Risk Modelling.html#missing-values",
    "title": "Introduction",
    "section": "Missing Values",
    "text": "Missing Values\nLets locate the missing values and the percentage so that we can decide whether to impute the missing values or drop the entire column.\n\nmissing = dummies_df.isnull().sum()\nmissing = missing[missing &gt; 0]\n\nmissing_data = pd.DataFrame({'features': missing.index,\n                            'values':missing.values,\n                            'percentage':missing.values/len(dummies_df)})\nmissing_data = missing_data.sort_values(by = 'values', ascending = False)\n\n\nprint(missing_data.head(20))\n\n                                       features   values  percentage\n93   orig_projected_additional_accrued_interest  2252242    0.996273\n85                                deferral_term  2250055    0.995305\n94               hardship_payoff_balance_amount  2250055    0.995305\n90                              hardship_length  2250055    0.995305\n91                                 hardship_dpd  2250055    0.995305\n92                         hardship_loan_status  2250055    0.995305\n82                                hardship_type  2250055    0.995305\n83                              hardship_reason  2250055    0.995305\n89                      payment_plan_start_date  2250055    0.995305\n95                 hardship_last_payment_amount  2250055    0.995305\n84                              hardship_status  2250055    0.995305\n88                            hardship_end_date  2250055    0.995305\n87                          hardship_start_date  2250055    0.995305\n86                              hardship_amount  2250055    0.995305\n96                            settlement_status  2227612    0.985378\n97                              settlement_date  2227612    0.985378\n98                            settlement_amount  2227612    0.985378\n99                        settlement_percentage  2227612    0.985378\n100                             settlement_term  2227612    0.985378\n81          sec_app_mths_since_last_major_derog  2224726    0.984101\n\n\nWe have few columns with more than 75 % of the missing values, we cannot impute values without any information. I will remove all columns with more than 75% of the missing values\n\nremove_columns = missing_data['features'][missing_data['percentage'] &gt; 0.75].tolist()\n\ndf = dummies_df.drop(remove_columns, axis=1)\ndf.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nhardship_flag\ndisbursement_method\ndebt_settlement_flag\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nN\nCash\nN\n10.0\n36\n232.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nN\nCash\nN\n10.0\n60\n398.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nN\nCash\nN\n6.0\n36\n112.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nN\nCash\nN\n10.0\n36\n174.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nN\nCash\nN\n10.0\n60\n236.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n\n\n\n\n\n\nmissing = df.isnull().sum()\nmissing = missing[missing &gt; 0]\n\nmissing_data = pd.DataFrame({'features': missing.index,\n                            'values':missing.values,\n                            'percentage':missing.values/len(df)})\nmissing_data = missing_data.sort_values(by = 'values', ascending = False)\n\n\nmissing_data.head()\n\n\n\n\n\n\n\n\nfeatures\nvalues\npercentage\n\n\n\n\n11\nmths_since_last_major_derog\n1679893\n0.743096\n\n\n43\nmths_since_recent_revol_delinq\n1520309\n0.672504\n\n\n5\nmths_since_last_delinq\n1158502\n0.512460\n\n\n21\nil_util\n1068850\n0.472803\n\n\n19\nmths_since_rcnt_il\n909924\n0.402502\n\n\n\n\n\n\n\n\nplt.figure(figsize=(15, 8))\nsns.barplot(missing_data['features'], missing_data['percentage'], )\nplt.xticks(rotation = 90, fontsize = 12)\nplt.title('Missing Values')\nplt.show()\n\n\n\n\n\n\n\n\n\ncols = ['diff_from_er_crline_months','acc_now_delinq','total_acc','pub_rec','open_acc',\n        'inq_last_6mths','delinq_2yrs','emp_length_new']\n\nfor i in cols:\n    df[i] = df[i].fillna(0)\n    \n    \ndf.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nhardship_flag\ndisbursement_method\ndebt_settlement_flag\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nN\nCash\nN\n10.0\n36\n232.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nN\nCash\nN\n10.0\n60\n398.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nN\nCash\nN\n6.0\n36\n112.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nN\nCash\nN\n10.0\n36\n174.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nN\nCash\nN\n10.0\n60\n236.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n\n\n\n\n\n\ndf['annual_inc'] = df['annual_inc'].fillna(df['annual_inc'].mean())\n\n\nprint(df.shape)\ndf.head()\n\n(2260668, 219)\n\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nhardship_flag\ndisbursement_method\ndebt_settlement_flag\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nN\nCash\nN\n10.0\n36\n232.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nN\nCash\nN\n10.0\n60\n398.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nN\nCash\nN\n6.0\n36\n112.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nN\nCash\nN\n10.0\n36\n174.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nN\nCash\nN\n10.0\n60\n236.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0"
  },
  {
    "objectID": "Credit Risk Modelling.html#categorical-columns",
    "href": "Credit Risk Modelling.html#categorical-columns",
    "title": "Introduction",
    "section": "Categorical Columns",
    "text": "Categorical Columns\n\nGrade\n\ngrade_woe = get_weight_of_evidence(data = df, column='grade', target='good_bad')\ngrade_woe\n\n\n\n\n\n\n\n\ngrade\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n6\nG\n12168\n0.604701\n0.005382\n7358.0\n4810.0\n0.003723\n0.016916\n-1.513718\n0.48162\n\n\n5\nF\n41800\n0.639330\n0.018490\n26724.0\n15076.0\n0.013522\n0.053020\n-1.366351\n0.48162\n\n\n4\nE\n135639\n0.721673\n0.060000\n97887.0\n37752.0\n0.049530\n0.132769\n-0.986034\n0.48162\n\n\n3\nD\n324424\n0.800782\n0.143508\n259793.0\n64631.0\n0.131453\n0.227299\n-0.547618\n0.48162\n\n\n2\nC\n650053\n0.859921\n0.287549\n558994.0\n91059.0\n0.282845\n0.320242\n-0.124178\n0.48162\n\n\n1\nB\n663557\n0.915718\n0.293523\n607631.0\n55926.0\n0.307455\n0.196684\n0.446729\n0.48162\n\n\n0\nA\n433027\n0.965152\n0.191548\n417937.0\n15090.0\n0.211472\n0.053070\n1.382489\n0.48162\n\n\n\n\n\n\n\n\nplot_by_woe(grade_woe)\n\n\n\n\n\n\n\n\nSo the lower the weight of evidence the higher the risk of default. Looking at the graph above, we can clearly see that higher credit rating results in lower chances of default. In this variable, I will keep all dummy variables except grade G as the number of observations and weight of evidence is low.\n\n\nHome OwnerShip\n\nhome_df = get_weight_of_evidence(data=df, column='home_ownership', target= 'good_bad')\nhome_df.head(7)\n\n\n\n\n\n\n\n\nhome_ownership\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n3\nOTHER\n182\n0.791209\n0.000081\n144.0\n38.0\n0.000073\n0.000134\n-0.606582\n0.025063\n\n\n2\nNONE\n54\n0.851852\n0.000024\n46.0\n8.0\n0.000023\n0.000028\n-0.189609\n0.025063\n\n\n5\nRENT\n894929\n0.853602\n0.395869\n763913.0\n131016.0\n0.386532\n0.460766\n-0.175675\n0.025063\n\n\n4\nOWN\n253057\n0.874333\n0.111939\n221256.0\n31801.0\n0.111953\n0.111840\n0.001014\n0.025063\n\n\n1\nMORTGAGE\n1111450\n0.890759\n0.491647\n990034.0\n121416.0\n0.500947\n0.427004\n0.159708\n0.025063\n\n\n0\nANY\n996\n0.934739\n0.000441\n931.0\n65.0\n0.000471\n0.000229\n0.723063\n0.025063\n\n\n\n\n\n\n\n\nplot_by_woe(data=home_df)\n\n\n\n\n\n\n\n\nThis category is slightly more complicated. The number of observation for other, none, and any cateogory is low but the weight of evidence is high for ANY.\n\n\nAddress State\n\naddr_woe = get_weight_of_evidence(data=df, column='addr_state', target='good_bad')\naddr_woe\n\n\n\n\n\n\n\n\naddr_state\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n12\nIA\n14\n0.785714\n0.000006\n11.0\n3.0\n0.000006\n0.000011\n-0.639526\n0.014428\n\n\n1\nAL\n27284\n0.847970\n0.012069\n23136.0\n4148.0\n0.011707\n0.014588\n-0.220046\n0.014428\n\n\n2\nAR\n17074\n0.851060\n0.007553\n14531.0\n2543.0\n0.007353\n0.008943\n-0.195869\n0.014428\n\n\n25\nMS\n12639\n0.852678\n0.005591\n10777.0\n1862.0\n0.005453\n0.006548\n-0.183046\n0.014428\n\n\n18\nLA\n25759\n0.852867\n0.011394\n21969.0\n3790.0\n0.011116\n0.013329\n-0.181543\n0.014428\n\n\n36\nOK\n20691\n0.853221\n0.009153\n17654.0\n3037.0\n0.008933\n0.010681\n-0.178717\n0.014428\n\n\n33\nNV\n32657\n0.857427\n0.014446\n28001.0\n4656.0\n0.014168\n0.016375\n-0.144726\n0.014428\n\n\n32\nNM\n11986\n0.861171\n0.005302\n10322.0\n1664.0\n0.005223\n0.005852\n-0.113756\n0.014428\n\n\n34\nNY\n186389\n0.861971\n0.082449\n160662.0\n25727.0\n0.081293\n0.090478\n-0.107047\n0.014428\n\n\n11\nHI\n10668\n0.863705\n0.004719\n9214.0\n1454.0\n0.004662\n0.005114\n-0.092403\n0.014428\n\n\n41\nSD\n4549\n0.863706\n0.002012\n3929.0\n620.0\n0.001988\n0.002180\n-0.092388\n0.014428\n\n\n9\nFL\n161991\n0.865085\n0.071656\n140136.0\n21855.0\n0.070907\n0.076861\n-0.080625\n0.014428\n\n\n24\nMO\n36084\n0.866534\n0.015962\n31268.0\n4816.0\n0.015821\n0.016937\n-0.068158\n0.014428\n\n\n27\nNC\n62730\n0.868181\n0.027748\n54461.0\n8269.0\n0.027557\n0.029081\n-0.053838\n0.014428\n\n\n20\nMD\n54008\n0.868223\n0.023890\n46891.0\n7117.0\n0.023726\n0.025030\n-0.053470\n0.014428\n\n\n15\nIN\n37515\n0.869945\n0.016595\n32636.0\n4879.0\n0.016513\n0.017159\n-0.038333\n0.014428\n\n\n42\nTN\n35483\n0.870022\n0.015696\n30871.0\n4612.0\n0.015620\n0.016220\n-0.037653\n0.014428\n\n\n38\nPA\n76939\n0.870157\n0.034034\n66949.0\n9990.0\n0.033876\n0.035134\n-0.036463\n0.014428\n\n\n31\nNJ\n83132\n0.870411\n0.036773\n72359.0\n10773.0\n0.036613\n0.037887\n-0.034212\n0.014428\n\n\n4\nCA\n314533\n0.870627\n0.139133\n273841.0\n40692.0\n0.138561\n0.143108\n-0.032293\n0.014428\n\n\n17\nKY\n21887\n0.870882\n0.009682\n19061.0\n2826.0\n0.009645\n0.009939\n-0.030027\n0.014428\n\n\n22\nMI\n58770\n0.871550\n0.025997\n51221.0\n7549.0\n0.025917\n0.026549\n-0.024075\n0.014428\n\n\n45\nVA\n62954\n0.872637\n0.027848\n54936.0\n8018.0\n0.027797\n0.028198\n-0.014329\n0.014428\n\n\n0\nAK\n5231\n0.873064\n0.002314\n4567.0\n664.0\n0.002311\n0.002335\n-0.010479\n0.014428\n\n\n23\nMN\n39517\n0.873624\n0.017480\n34523.0\n4994.0\n0.017468\n0.017563\n-0.005420\n0.014428\n\n\n3\nAZ\n53777\n0.874091\n0.023788\n47006.0\n6771.0\n0.023785\n0.023813\n-0.001183\n0.014428\n\n\n35\nOH\n75132\n0.874820\n0.033234\n65727.0\n9405.0\n0.033257\n0.033076\n0.005459\n0.014428\n\n\n43\nTX\n186335\n0.875289\n0.082425\n163097.0\n23238.0\n0.082525\n0.081725\n0.009747\n0.014428\n\n\n29\nNE\n7819\n0.876583\n0.003459\n6854.0\n965.0\n0.003468\n0.003394\n0.021651\n0.014428\n\n\n8\nDE\n6458\n0.876897\n0.002857\n5663.0\n795.0\n0.002865\n0.002796\n0.024558\n0.014428\n\n\n19\nMA\n51784\n0.879094\n0.022907\n45523.0\n6261.0\n0.023034\n0.022019\n0.045069\n0.014428\n\n\n44\nUT\n14993\n0.880011\n0.006632\n13194.0\n1799.0\n0.006676\n0.006327\n0.053722\n0.014428\n\n\n48\nWI\n29877\n0.882820\n0.013216\n26376.0\n3501.0\n0.013346\n0.012313\n0.080597\n0.014428\n\n\n10\nGA\n74196\n0.886059\n0.032820\n65742.0\n8454.0\n0.033265\n0.029732\n0.112289\n0.014428\n\n\n39\nRI\n10005\n0.888656\n0.004426\n8891.0\n1114.0\n0.004499\n0.003918\n0.138273\n0.014428\n\n\n14\nIL\n91173\n0.891613\n0.040330\n81291.0\n9882.0\n0.041132\n0.034754\n0.168511\n0.014428\n\n\n26\nMT\n6299\n0.892364\n0.002786\n5621.0\n678.0\n0.002844\n0.002384\n0.176309\n0.014428\n\n\n50\nWY\n4748\n0.892376\n0.002100\n4237.0\n511.0\n0.002144\n0.001797\n0.176432\n0.014428\n\n\n16\nKS\n19109\n0.896018\n0.008453\n17122.0\n1987.0\n0.008664\n0.006988\n0.214929\n0.014428\n\n\n47\nWA\n47060\n0.896473\n0.020817\n42188.0\n4872.0\n0.021347\n0.017134\n0.219822\n0.014428\n\n\n6\nCT\n35785\n0.897359\n0.015829\n32112.0\n3673.0\n0.016248\n0.012917\n0.229412\n0.014428\n\n\n5\nCO\n48183\n0.898844\n0.021314\n43309.0\n4874.0\n0.021914\n0.017141\n0.245636\n0.014428\n\n\n28\nND\n3591\n0.899471\n0.001588\n3230.0\n361.0\n0.001634\n0.001270\n0.252550\n0.014428\n\n\n40\nSC\n28003\n0.900404\n0.012387\n25214.0\n2789.0\n0.012758\n0.009809\n0.262907\n0.014428\n\n\n49\nWV\n8351\n0.904802\n0.003694\n7556.0\n795.0\n0.003823\n0.002796\n0.312946\n0.014428\n\n\n37\nOR\n26789\n0.906417\n0.011850\n24282.0\n2507.0\n0.012286\n0.008817\n0.331839\n0.014428\n\n\n30\nNH\n11142\n0.908185\n0.004929\n10119.0\n1023.0\n0.005120\n0.003598\n0.352866\n0.014428\n\n\n7\nDC\n5356\n0.908701\n0.002369\n4867.0\n489.0\n0.002463\n0.001720\n0.359061\n0.014428\n\n\n46\nVT\n4937\n0.919587\n0.002184\n4540.0\n397.0\n0.002297\n0.001396\n0.497937\n0.014428\n\n\n13\nID\n4308\n0.921077\n0.001906\n3968.0\n340.0\n0.002008\n0.001196\n0.518263\n0.014428\n\n\n21\nME\n4974\n0.938681\n0.002200\n4669.0\n305.0\n0.002362\n0.001073\n0.789579\n0.014428\n\n\n\n\n\n\n\n\nplot_by_woe(addr_woe)\n\n\n\n\n\n\n\n\nThis is a bit more complicated to preprocess, as we can see that IA state has only 14 observations and the weight of evidence is extremely low as compare to other states. In order to combine similar categories, we will take into account the number of observations and weight of evidence.\n\ndf['addr_state_IA_AL_AR'] = sum([df['addr_state_IA'],df['addr_state_AL'],\n                                             df['addr_state_AR']])\ndf['addr_state_MS_LA_OK'] = sum([df['addr_state_MS'], df['addr_state_LA'],\n                                df['addr_state_OK']])\ndf['addr_state_NV_NM'] = sum([df['addr_state_NV'], df['addr_state_NM']])\ndf['addr_state_HI_SD'] = sum([df['addr_state_HI'], df['addr_state_SD']])\ndf['addr_state_NC_MD'] = sum([df['addr_state_NC'], df['addr_state_MD']])\ndf['addr_state_IN_TN'] = sum([df['addr_state_IN'], df['addr_state_TN']])\ndf['addr_state_PA_NJ'] = sum([df['addr_state_PA'], df['addr_state_NJ']])\ndf['addr_state_KY_MI_VA_AK'] = sum([df['addr_state_KY'], df['addr_state_MI'], \n                                    df['addr_state_VA'],  df['addr_state_AK']])\ndf['addr_state_MN_AZ_OH'] = sum([df['addr_state_MN'], df['addr_state_AZ'], \n                                    df['addr_state_OH']])\n\ndf['addr_state_NE_DE'] = sum([df['addr_state_NE'], df['addr_state_DE']])\n\n\ndf['addr_state_MA_UT'] = sum([df['addr_state_MA'], df['addr_state_UT']])\ndf['addr_state_WI_GA_RI'] = sum([df['addr_state_WI'], df['addr_state_GA'],\n                                df['addr_state_RI']])\n\ndf['addr_state_MT_WY_KS_WA_CT_CO_ND_SC'] = sum([df['addr_state_MT'], \n                                                df['addr_state_WY'],df['addr_state_KS'],df['addr_state_WA'],\n                                                df['addr_state_CT'], df['addr_state_CO'], df['addr_state_ND'],\n                                                df['addr_state_SC']])\ndf['addr_state_WV_OR_NH_DC'] = sum([df['addr_state_WV'], df['addr_state_OR'], \n                                    df['addr_state_NH'],  df['addr_state_DC']])\n\ndf['addr_state_VT_ID_ME'] = sum([df['addr_state_VT'], df['addr_state_ID'],\n                                df['addr_state_ME']])\n\ndf.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nhardship_flag\ndisbursement_method\ndebt_settlement_flag\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\naddr_state_IA_AL_AR\naddr_state_MS_LA_OK\naddr_state_NV_NM\naddr_state_HI_SD\naddr_state_NC_MD\naddr_state_IN_TN\naddr_state_PA_NJ\naddr_state_KY_MI_VA_AK\naddr_state_MN_AZ_OH\naddr_state_NE_DE\naddr_state_MA_UT\naddr_state_WI_GA_RI\naddr_state_MT_WY_KS_WA_CT_CO_ND_SC\naddr_state_WV_OR_NH_DC\naddr_state_VT_ID_ME\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nN\nCash\nN\n10.0\n36\n232.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nN\nCash\nN\n10.0\n60\n398.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nN\nCash\nN\n6.0\n36\n112.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nN\nCash\nN\n10.0\n36\n174.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nN\nCash\nN\n10.0\n60\n236.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n\n\n\n\n\n\n\nPurpose\n\npurpose_woe = get_weight_of_evidence(data=df, column='purpose', target= 'good_bad')\npurpose_woe\n\n\n\n\n\n\n\n\npurpose\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n3\neducational\n424\n0.792453\n0.000188\n336.0\n88.0\n0.000170\n0.000309\n-0.599035\n0.023313\n\n\n11\nsmall_business\n24689\n0.801855\n0.010921\n19797.0\n4892.0\n0.010017\n0.017205\n-0.540880\n0.023313\n\n\n10\nrenewable_energy\n1445\n0.839446\n0.000639\n1213.0\n232.0\n0.000614\n0.000816\n-0.284695\n0.023313\n\n\n8\nmoving\n15403\n0.847238\n0.006813\n13050.0\n2353.0\n0.006603\n0.008275\n-0.225712\n0.023313\n\n\n2\ndebt_consolidation\n1277877\n0.863848\n0.565265\n1103892.0\n173985.0\n0.558558\n0.611882\n-0.091181\n0.023313\n\n\n7\nmedical\n27488\n0.867870\n0.012159\n23856.0\n3632.0\n0.012071\n0.012773\n-0.056557\n0.023313\n\n\n9\nother\n139440\n0.873336\n0.061681\n121778.0\n17662.0\n0.061618\n0.062115\n-0.008025\n0.023313\n\n\n13\nwedding\n2355\n0.876008\n0.001042\n2063.0\n292.0\n0.001044\n0.001027\n0.016354\n0.023313\n\n\n5\nhouse\n14136\n0.877264\n0.006253\n12401.0\n1735.0\n0.006275\n0.006102\n0.027961\n0.023313\n\n\n12\nvacation\n15525\n0.880129\n0.006867\n13664.0\n1861.0\n0.006914\n0.006545\n0.054842\n0.023313\n\n\n6\nmajor_purchase\n50445\n0.882882\n0.022314\n44537.0\n5908.0\n0.022535\n0.020778\n0.081204\n0.023313\n\n\n4\nhome_improvement\n150457\n0.889623\n0.066554\n133850.0\n16607.0\n0.067727\n0.058405\n0.148086\n0.023313\n\n\n1\ncredit_card\n516971\n0.897853\n0.228681\n464164.0\n52807.0\n0.234862\n0.185715\n0.234785\n0.023313\n\n\n0\ncar\n24013\n0.904635\n0.010622\n21723.0\n2290.0\n0.010992\n0.008054\n0.311011\n0.023313\n\n\n\n\n\n\n\n\nplot_by_woe(purpose_woe, rotation=90)\n\n\n\n\n\n\n\n\nThis category also has the same problem. Again we will perform similar operation to reduce the number of dummy variables\n\ndf['purpose_educational_smallbusiness'] = sum([df['purpose_educational'], df['purpose_small_business']])\ndf['purpose_renewableenergy_moving'] = sum([df['purpose_renewable_energy'], df['purpose_moving']])\ndf['purpose_medical_other'] = sum([df['purpose_medical'], df['purpose_other']])\ndf['purpose_wedding_house_vacation'] = sum([df['purpose_wedding'], df['purpose_house'], df['purpose_vacation']])\ndf.head()\n\n\n\n\n\n\n\n\nloan_amnt\nfunded_amnt\nfunded_amnt_inv\nint_rate\ninstallment\ngrade\nsub_grade\nemp_title\nhome_ownership\nannual_inc\nverification_status\nloan_status\npymnt_plan\npurpose\naddr_state\ndti\ndelinq_2yrs\ninq_last_6mths\nmths_since_last_delinq\nopen_acc\npub_rec\nrevol_bal\nrevol_util\ntotal_acc\ninitial_list_status\nout_prncp\nout_prncp_inv\ntotal_pymnt\ntotal_pymnt_inv\ntotal_rec_prncp\ntotal_rec_int\ntotal_rec_late_fee\nrecoveries\ncollection_recovery_fee\nlast_pymnt_amnt\ncollections_12_mths_ex_med\nmths_since_last_major_derog\npolicy_code\napplication_type\nacc_now_delinq\ntot_coll_amt\ntot_cur_bal\nopen_acc_6m\nopen_act_il\nopen_il_12m\nopen_il_24m\nmths_since_rcnt_il\ntotal_bal_il\nil_util\nopen_rv_12m\nopen_rv_24m\nmax_bal_bc\nall_util\ntotal_rev_hi_lim\ninq_fi\ntotal_cu_tl\ninq_last_12m\nacc_open_past_24mths\navg_cur_bal\nbc_open_to_buy\nbc_util\nchargeoff_within_12_mths\ndelinq_amnt\nmo_sin_old_il_acct\nmo_sin_old_rev_tl_op\nmo_sin_rcnt_rev_tl_op\nmo_sin_rcnt_tl\nmort_acc\nmths_since_recent_bc\nmths_since_recent_inq\nmths_since_recent_revol_delinq\nnum_accts_ever_120_pd\nnum_actv_bc_tl\nnum_actv_rev_tl\nnum_bc_sats\nnum_bc_tl\nnum_il_tl\nnum_op_rev_tl\nnum_rev_accts\nnum_rev_tl_bal_gt_0\nnum_sats\nnum_tl_120dpd_2m\nnum_tl_30dpd\nnum_tl_90g_dpd_24m\nnum_tl_op_past_12m\npct_tl_nvr_dlq\npercent_bc_gt_75\npub_rec_bankruptcies\ntax_liens\ntot_hi_cred_lim\ntotal_bal_ex_mort\ntotal_bc_limit\ntotal_il_high_credit_limit\nhardship_flag\ndisbursement_method\ndebt_settlement_flag\nemp_length_new\nterm_new\ndiff_from_er_crline_months\ndiff_from_issuedate_months\ngood_bad\ngrade_A\ngrade_B\ngrade_C\ngrade_D\ngrade_E\ngrade_F\ngrade_G\nsub_grade_A1\nsub_grade_A2\nsub_grade_A3\nsub_grade_A4\nsub_grade_A5\nsub_grade_B1\nsub_grade_B2\nsub_grade_B3\nsub_grade_B4\nsub_grade_B5\nsub_grade_C1\nsub_grade_C2\nsub_grade_C3\nsub_grade_C4\nsub_grade_C5\nsub_grade_D1\nsub_grade_D2\nsub_grade_D3\nsub_grade_D4\nsub_grade_D5\nsub_grade_E1\nsub_grade_E2\nsub_grade_E3\nsub_grade_E4\nsub_grade_E5\nsub_grade_F1\nsub_grade_F2\nsub_grade_F3\nsub_grade_F4\nsub_grade_F5\nsub_grade_G1\nsub_grade_G2\nsub_grade_G3\nsub_grade_G4\nsub_grade_G5\npurpose_car\npurpose_credit_card\npurpose_debt_consolidation\npurpose_educational\npurpose_home_improvement\npurpose_house\npurpose_major_purchase\npurpose_medical\npurpose_moving\npurpose_other\npurpose_renewable_energy\npurpose_small_business\npurpose_vacation\npurpose_wedding\nhome_ownership_ANY\nhome_ownership_MORTGAGE\nhome_ownership_NONE\nhome_ownership_OTHER\nhome_ownership_OWN\nhome_ownership_RENT\nverification_status_Not Verified\nverification_status_Source Verified\nverification_status_Verified\ninitial_list_status_f\ninitial_list_status_w\naddr_state_AK\naddr_state_AL\naddr_state_AR\naddr_state_AZ\naddr_state_CA\naddr_state_CO\naddr_state_CT\naddr_state_DC\naddr_state_DE\naddr_state_FL\naddr_state_GA\naddr_state_HI\naddr_state_IA\naddr_state_ID\naddr_state_IL\naddr_state_IN\naddr_state_KS\naddr_state_KY\naddr_state_LA\naddr_state_MA\naddr_state_MD\naddr_state_ME\naddr_state_MI\naddr_state_MN\naddr_state_MO\naddr_state_MS\naddr_state_MT\naddr_state_NC\naddr_state_ND\naddr_state_NE\naddr_state_NH\naddr_state_NJ\naddr_state_NM\naddr_state_NV\naddr_state_NY\naddr_state_OH\naddr_state_OK\naddr_state_OR\naddr_state_PA\naddr_state_RI\naddr_state_SC\naddr_state_SD\naddr_state_TN\naddr_state_TX\naddr_state_UT\naddr_state_VA\naddr_state_VT\naddr_state_WA\naddr_state_WI\naddr_state_WV\naddr_state_WY\naddr_state_IA_AL_AR\naddr_state_MS_LA_OK\naddr_state_NV_NM\naddr_state_HI_SD\naddr_state_NC_MD\naddr_state_IN_TN\naddr_state_PA_NJ\naddr_state_KY_MI_VA_AK\naddr_state_MN_AZ_OH\naddr_state_NE_DE\naddr_state_MA_UT\naddr_state_WI_GA_RI\naddr_state_MT_WY_KS_WA_CT_CO_ND_SC\naddr_state_WV_OR_NH_DC\naddr_state_VT_ID_ME\npurpose_educational_smallbusiness\npurpose_renewableenergy_moving\npurpose_medical_other\npurpose_wedding_house_vacation\n\n\n\n\n0\n2500\n2500\n2500.0\n13.56\n84.92\nC\nC1\nChef\nRENT\n55000.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nNY\n18.24\n0.0\n1.0\nNaN\n9.0\n1.0\n4341\n10.3\n34.0\nw\n2386.02\n2386.02\n167.02\n167.02\n113.98\n53.04\n0.0\n0.0\n0.0\n84.92\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n16901.0\n2.0\n2.0\n1.0\n2.0\n2.0\n12560.0\n69.0\n2.0\n7.0\n2137.0\n28.0\n42000.0\n1.0\n11.0\n2.0\n9.0\n1878.0\n34360.0\n5.9\n0.0\n0.0\n140.0\n212.0\n1.0\n1.0\n0.0\n1.0\n2.0\nNaN\n0.0\n2.0\n5.0\n3.0\n3.0\n16.0\n7.0\n18.0\n5.0\n9.0\n0.0\n0.0\n0.0\n3.0\n100.0\n0.0\n1.0\n0.0\n60124.0\n16901.0\n36500.0\n18124.0\nN\nCash\nN\n10.0\n36\n232.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n1\n30000\n30000\n30000.0\n18.94\n777.23\nD\nD2\nPostmaster\nMORTGAGE\n90000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nLA\n26.52\n0.0\n0.0\n71.0\n13.0\n1.0\n12315\n24.2\n44.0\nw\n29387.75\n29387.75\n1507.11\n1507.11\n612.25\n894.86\n0.0\n0.0\n0.0\n777.23\n0.0\nNaN\n1\nIndividual\n0.0\n1208.0\n321915.0\n4.0\n4.0\n2.0\n3.0\n3.0\n87153.0\n88.0\n4.0\n5.0\n998.0\n57.0\n50800.0\n2.0\n15.0\n2.0\n10.0\n24763.0\n13761.0\n8.3\n0.0\n0.0\n163.0\n378.0\n4.0\n3.0\n3.0\n4.0\n4.0\nNaN\n0.0\n2.0\n4.0\n4.0\n9.0\n27.0\n8.0\n14.0\n4.0\n13.0\n0.0\n0.0\n0.0\n6.0\n95.0\n0.0\n1.0\n0.0\n372872.0\n99468.0\n15000.0\n94072.0\nN\nCash\nN\n10.0\n60\n398.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n2\n5000\n5000\n5000.0\n17.97\n180.69\nD\nD1\nAdministrative\nMORTGAGE\n59280.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nMI\n10.51\n0.0\n0.0\nNaN\n8.0\n0.0\n4599\n19.1\n13.0\nw\n4787.21\n4787.21\n353.89\n353.89\n212.79\n141.10\n0.0\n0.0\n0.0\n180.69\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n110299.0\n0.0\n1.0\n0.0\n2.0\n14.0\n7150.0\n72.0\n0.0\n2.0\n0.0\n35.0\n24100.0\n1.0\n5.0\n0.0\n4.0\n18383.0\n13800.0\n0.0\n0.0\n0.0\n87.0\n92.0\n15.0\n14.0\n2.0\n77.0\n14.0\nNaN\n0.0\n0.0\n3.0\n3.0\n3.0\n4.0\n6.0\n7.0\n3.0\n8.0\n0.0\n0.0\n0.0\n0.0\n100.0\n0.0\n0.0\n0.0\n136927.0\n11749.0\n13800.0\n10000.0\nN\nCash\nN\n6.0\n36\n112.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n3\n4000\n4000\n4000.0\n18.94\n146.51\nD\nD2\nIT Supervisor\nMORTGAGE\n92000.0\nSource Verified\nCurrent\nn\ndebt_consolidation\nWA\n16.74\n0.0\n0.0\nNaN\n10.0\n0.0\n5468\n78.1\n13.0\nw\n3831.93\n3831.93\n286.71\n286.71\n168.07\n118.64\n0.0\n0.0\n0.0\n146.51\n0.0\nNaN\n1\nIndividual\n0.0\n686.0\n305049.0\n1.0\n5.0\n3.0\n5.0\n5.0\n30683.0\n68.0\n0.0\n0.0\n3761.0\n70.0\n7000.0\n2.0\n4.0\n3.0\n5.0\n30505.0\n1239.0\n75.2\n0.0\n0.0\n62.0\n154.0\n64.0\n5.0\n3.0\n64.0\n5.0\nNaN\n0.0\n1.0\n2.0\n1.0\n2.0\n7.0\n2.0\n3.0\n2.0\n10.0\n0.0\n0.0\n0.0\n3.0\n100.0\n100.0\n0.0\n0.0\n385183.0\n36151.0\n5000.0\n44984.0\nN\nCash\nN\n10.0\n36\n174.0\n20.0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n\n\n4\n30000\n30000\n30000.0\n16.14\n731.78\nC\nC4\nMechanic\nMORTGAGE\n57250.0\nNot Verified\nCurrent\nn\ndebt_consolidation\nMD\n26.35\n0.0\n0.0\nNaN\n12.0\n0.0\n829\n3.6\n26.0\nw\n29339.02\n29339.02\n1423.21\n1423.21\n660.98\n762.23\n0.0\n0.0\n0.0\n731.78\n0.0\nNaN\n1\nIndividual\n0.0\n0.0\n116007.0\n3.0\n5.0\n3.0\n5.0\n4.0\n28845.0\n89.0\n2.0\n4.0\n516.0\n54.0\n23100.0\n1.0\n0.0\n0.0\n9.0\n9667.0\n8471.0\n8.9\n0.0\n0.0\n53.0\n216.0\n2.0\n2.0\n2.0\n2.0\n13.0\nNaN\n0.0\n2.0\n2.0\n3.0\n8.0\n9.0\n6.0\n15.0\n2.0\n12.0\n0.0\n0.0\n0.0\n5.0\n92.3\n0.0\n0.0\n0.0\n157548.0\n29674.0\n9300.0\n32332.0\nN\nCash\nN\n10.0\n60\n236.0\n20.0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n\n\n\n\n\n\nverification_woe = get_weight_of_evidence(data=df, column='verification_status', target='good_bad')\nverification_woe\n\n\n\n\n\n\n\n\nverification_status\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n2\nVerified\n629631\n0.833671\n0.278515\n524905.0\n104726.0\n0.265597\n0.368307\n-0.326939\n0.085349\n\n\n1\nSource Verified\n886231\n0.869470\n0.392022\n770551.0\n115680.0\n0.389891\n0.406831\n-0.042531\n0.085349\n\n\n0\nNot Verified\n744806\n0.914155\n0.329463\n680868.0\n63938.0\n0.344512\n0.224861\n0.426646\n0.085349\n\n\n\n\n\n\n\n\nplot_by_woe(verification_woe)\n\n\n\n\n\n\n\n\nThere is alot of difference in the weight of evidence of each category so we will keep all these categories.\n\n\nInitial List Status\n\ninitial_woe = get_weight_of_evidence(df,'initial_list_status','good_bad')\ninitial_woe\n\n\n\n\n\n\n\n\ninitial_list_status\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\nf\n725201\n0.842464\n0.320791\n610956.0\n114245.0\n0.309138\n0.401784\n-0.262129\n0.037626\n\n\n1\nw\n1535467\n0.889220\n0.679209\n1365368.0\n170099.0\n0.690862\n0.598216\n0.143990\n0.037626\n\n\n\n\n\n\n\n\nplot_by_woe(initial_woe)\n\n\n\n\n\n\n\n\nWe will keep both of these categories"
  },
  {
    "objectID": "Credit Risk Modelling.html#numeric-columns",
    "href": "Credit Risk Modelling.html#numeric-columns",
    "title": "Introduction",
    "section": "Numeric columns",
    "text": "Numeric columns\n\nTerm\n\nterm_woe = get_weight_of_evidence_numeric(data=df, column='term_new', target='good_bad')\nterm_woe\n\n\n\n\n\n\n\n\nterm_new\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n36\n1609754\n0.892734\n0.71207\n1437082.0\n172672.0\n0.727149\n0.607264\n0.180167\n0.065262\n\n\n1\n60\n650914\n0.828438\n0.28793\n539242.0\n111672.0\n0.272851\n0.392736\n-0.364211\n0.065262\n\n\n\n\n\n\n\n\nplot_by_woe(term_woe)\n\n\n\n\n\n\n\n\n\ndf['term_36'] = np.where(df['term_new'] == 36, 1, 0)\ndf['term_60'] = np.where(df['term_new'] == 60, 1, 0)\ndf[['term_new', 'term_36', 'term_60']].head()\n\n\n\n\n\n\n\n\nterm_new\nterm_36\nterm_60\n\n\n\n\n0\n36\n1\n0\n\n\n1\n60\n0\n1\n\n\n2\n36\n1\n0\n\n\n3\n36\n1\n0\n\n\n4\n60\n0\n1\n\n\n\n\n\n\n\n\n\nEmployment Length\n\nemp_length_woe = get_weight_of_evidence_numeric(data=df, column='emp_length_new', target='good_bad')\nemp_length_woe\n\n\n\n\n\n\n\n\nemp_length_new\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n0.0\n146907\n0.847890\n0.064984\n124561.0\n22346.0\n0.063027\n0.078588\n-0.220661\n0.006226\n\n\n1\n1.0\n338391\n0.872739\n0.149686\n295327.0\n43064.0\n0.149432\n0.151450\n-0.013413\n0.006226\n\n\n2\n2.0\n203677\n0.874458\n0.090096\n178107.0\n25570.0\n0.090120\n0.089926\n0.002156\n0.006226\n\n\n3\n3.0\n180753\n0.873717\n0.079956\n157927.0\n22826.0\n0.079909\n0.080276\n-0.004576\n0.006226\n\n\n4\n4.0\n136605\n0.875993\n0.060427\n119665.0\n16940.0\n0.060549\n0.059576\n0.016209\n0.006226\n\n\n5\n5.0\n139698\n0.874809\n0.061795\n122209.0\n17489.0\n0.061837\n0.061506\n0.005352\n0.006226\n\n\n6\n6.0\n102628\n0.875044\n0.045397\n89804.0\n12824.0\n0.045440\n0.045100\n0.007502\n0.006226\n\n\n7\n7.0\n92695\n0.868558\n0.041003\n80511.0\n12184.0\n0.040738\n0.042850\n-0.050539\n0.006226\n\n\n8\n8.0\n91914\n0.862034\n0.040658\n79233.0\n12681.0\n0.040091\n0.044597\n-0.106521\n0.006226\n\n\n9\n9.0\n79395\n0.866377\n0.035120\n68786.0\n10609.0\n0.034805\n0.037310\n-0.069512\n0.006226\n\n\n10\n10.0\n748005\n0.882606\n0.330878\n660194.0\n87811.0\n0.334052\n0.308820\n0.078538\n0.006226\n\n\n\n\n\n\n\n\nplot_by_woe(emp_length_woe)\n\n\n\n\n\n\n\n\n\ndf['emp_length:0'] = np.where(df['emp_length_new'] == 0, 1, 0)\ndf['emp_length:1'] = np.where(df['emp_length_new'] == 1, 1, 0)\ndf['emp_length:2-3'] = np.where(df['emp_length_new'].isin([2, 3]), 1, 0)\ndf['emp_length:4-6'] = np.where(df['emp_length_new'].isin([4 , 5, 6]), 1, 0)\ndf['emp_length:7-9'] = np.where(df['emp_length_new'].isin([7, 8, 9]), 1, 0)\ndf['emp_length:10'] = np.where(df['emp_length_new'] == 10, 1, 0)\ndf[['emp_length_new', 'emp_length:2-3','emp_length:4-6', 'emp_length:7-9', 'emp_length:10']].head()\n\n\n\n\n\n\n\n\nemp_length_new\nemp_length:2-3\nemp_length:4-6\nemp_length:7-9\nemp_length:10\n\n\n\n\n0\n10.0\n0\n0\n0\n1\n\n\n1\n10.0\n0\n0\n0\n1\n\n\n2\n6.0\n0\n1\n0\n0\n\n\n3\n10.0\n0\n0\n0\n1\n\n\n4\n10.0\n0\n0\n0\n1\n\n\n\n\n\n\n\n\n\nMonth Difference from Issuedate\n\ndf['diff_from_issuedate_months_categories'] = pd.cut(df['diff_from_issuedate_months'], bins = 50)\n\n\nissue_month_woe = get_weight_of_evidence_numeric(data=df, column='diff_from_issuedate_months_categories', target='good_bad')\nissue_month_woe\n\n\n\n\n\n\n\n\ndiff_from_issuedate_months_categories\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(19.862, 22.76]\n128412\n0.995779\n0.056803\n127870.0\n542.0\n0.064701\n0.001906\n3.524694\n0.541746\n\n\n1\n(22.76, 25.52]\n128194\n0.983650\n0.056706\n126098.0\n2096.0\n0.063804\n0.007371\n2.158220\n0.541746\n\n\n2\n(25.52, 28.28]\n130772\n0.961834\n0.057847\n125781.0\n4991.0\n0.063644\n0.017553\n1.288097\n0.541746\n\n\n3\n(28.28, 31.04]\n107864\n0.945941\n0.047713\n102033.0\n5831.0\n0.051628\n0.020507\n0.923299\n0.541746\n\n\n4\n(31.04, 33.8]\n80497\n0.928035\n0.035608\n74704.0\n5793.0\n0.037799\n0.020373\n0.618074\n0.541746\n\n\n5\n(33.8, 36.56]\n121437\n0.906972\n0.053717\n110140.0\n11297.0\n0.055730\n0.039730\n0.338406\n0.541746\n\n\n6\n(36.56, 39.32]\n115183\n0.891286\n0.050951\n102661.0\n12522.0\n0.051945\n0.044038\n0.165136\n0.541746\n\n\n7\n(39.32, 42.08]\n94627\n0.881936\n0.041858\n83455.0\n11172.0\n0.042227\n0.039290\n0.072088\n0.541746\n\n\n8\n(42.08, 44.84]\n68018\n0.863227\n0.030088\n58715.0\n9303.0\n0.029709\n0.032717\n-0.096451\n0.541746\n\n\n9\n(44.84, 47.6]\n95507\n0.854063\n0.042247\n81569.0\n13938.0\n0.041273\n0.049018\n-0.171979\n0.541746\n\n\n10\n(47.6, 50.36]\n103995\n0.831867\n0.046002\n86510.0\n17485.0\n0.043773\n0.061492\n-0.339892\n0.541746\n\n\n11\n(50.36, 53.12]\n126827\n0.823523\n0.056102\n104445.0\n22382.0\n0.052848\n0.078715\n-0.398406\n0.541746\n\n\n12\n(53.12, 55.88]\n71895\n0.824355\n0.031803\n59267.0\n12628.0\n0.029989\n0.044411\n-0.392673\n0.541746\n\n\n13\n(55.88, 58.64]\n130504\n0.821369\n0.057728\n107192.0\n23312.0\n0.054238\n0.081985\n-0.413156\n0.541746\n\n\n14\n(58.64, 61.4]\n110489\n0.818208\n0.048874\n90403.0\n20086.0\n0.045743\n0.070640\n-0.434555\n0.541746\n\n\n15\n(61.4, 64.16]\n95825\n0.813389\n0.042388\n77943.0\n17882.0\n0.039438\n0.062889\n-0.466626\n0.541746\n\n\n16\n(64.16, 66.92]\n49170\n0.815884\n0.021750\n40117.0\n9053.0\n0.020299\n0.031838\n-0.450105\n0.541746\n\n\n17\n(66.92, 69.68]\n70468\n0.819563\n0.031171\n57753.0\n12715.0\n0.029222\n0.044717\n-0.425416\n0.541746\n\n\n18\n(69.68, 72.44]\n68203\n0.818219\n0.030169\n55805.0\n12398.0\n0.028237\n0.043602\n-0.434481\n0.541746\n\n\n19\n(72.44, 75.2]\n65584\n0.821832\n0.029011\n53899.0\n11685.0\n0.027272\n0.041095\n-0.410003\n0.541746\n\n\n20\n(75.2, 77.96]\n35584\n0.828462\n0.015740\n29480.0\n6104.0\n0.014917\n0.021467\n-0.364041\n0.541746\n\n\n21\n(77.96, 80.72]\n45917\n0.840386\n0.020311\n38588.0\n7329.0\n0.019525\n0.025775\n-0.277707\n0.541746\n\n\n22\n(80.72, 83.48]\n41836\n0.843795\n0.018506\n35301.0\n6535.0\n0.017862\n0.022983\n-0.252070\n0.541746\n\n\n23\n(83.48, 86.24]\n35483\n0.843418\n0.015696\n29927.0\n5556.0\n0.015143\n0.019540\n-0.254926\n0.541746\n\n\n24\n(86.24, 89.0]\n28042\n0.842237\n0.012404\n23618.0\n4424.0\n0.011950\n0.015559\n-0.263844\n0.541746\n\n\n25\n(89.0, 91.76]\n14433\n0.846879\n0.006384\n12223.0\n2210.0\n0.006185\n0.007772\n-0.228482\n0.541746\n\n\n26\n(91.76, 94.52]\n18711\n0.844637\n0.008277\n15804.0\n2907.0\n0.007997\n0.010224\n-0.245668\n0.541746\n\n\n27\n(94.52, 97.28]\n16133\n0.835492\n0.007136\n13479.0\n2654.0\n0.006820\n0.009334\n-0.313744\n0.541746\n\n\n28\n(97.28, 100.04]\n10447\n0.829712\n0.004621\n8668.0\n1779.0\n0.004386\n0.006257\n-0.355222\n0.541746\n\n\n29\n(100.04, 102.8]\n5474\n0.842163\n0.002421\n4610.0\n864.0\n0.002333\n0.003039\n-0.264399\n0.541746\n\n\n30\n(102.8, 105.56]\n7101\n0.828897\n0.003141\n5886.0\n1215.0\n0.002978\n0.004273\n-0.360976\n0.541746\n\n\n31\n(105.56, 108.32]\n6119\n0.854225\n0.002707\n5227.0\n892.0\n0.002645\n0.003137\n-0.170682\n0.541746\n\n\n32\n(108.32, 111.08]\n5414\n0.844293\n0.002395\n4571.0\n843.0\n0.002313\n0.002965\n-0.248289\n0.541746\n\n\n33\n(111.08, 113.84]\n3011\n0.856526\n0.001332\n2579.0\n432.0\n0.001305\n0.001519\n-0.152078\n0.541746\n\n\n34\n(113.84, 116.6]\n4013\n0.871418\n0.001775\n3497.0\n516.0\n0.001769\n0.001815\n-0.025255\n0.541746\n\n\n35\n(116.6, 119.36]\n3645\n0.843621\n0.001612\n3075.0\n570.0\n0.001556\n0.002005\n-0.253385\n0.541746\n\n\n36\n(119.36, 122.12]\n3484\n0.848737\n0.001541\n2957.0\n527.0\n0.001496\n0.001853\n-0.214079\n0.541746\n\n\n37\n(122.12, 124.88]\n1901\n0.871120\n0.000841\n1656.0\n245.0\n0.000838\n0.000862\n-0.027907\n0.541746\n\n\n38\n(124.88, 127.64]\n2172\n0.883057\n0.000961\n1918.0\n254.0\n0.000970\n0.000893\n0.082895\n0.541746\n\n\n39\n(127.64, 130.4]\n1924\n0.860707\n0.000851\n1656.0\n268.0\n0.000838\n0.000943\n-0.117636\n0.541746\n\n\n40\n(130.4, 133.16]\n1364\n0.872434\n0.000603\n1190.0\n174.0\n0.000602\n0.000612\n-0.016156\n0.541746\n\n\n41\n(133.16, 135.92]\n765\n0.857516\n0.000338\n656.0\n109.0\n0.000332\n0.000383\n-0.143996\n0.541746\n\n\n42\n(135.92, 138.68]\n959\n0.863399\n0.000424\n828.0\n131.0\n0.000419\n0.000461\n-0.094993\n0.541746\n\n\n43\n(138.68, 141.44]\n731\n0.835841\n0.000323\n611.0\n120.0\n0.000309\n0.000422\n-0.311204\n0.541746\n\n\n44\n(141.44, 144.2]\n279\n0.845878\n0.000123\n236.0\n43.0\n0.000119\n0.000151\n-0.236177\n0.541746\n\n\n45\n(144.2, 146.96]\n265\n0.803774\n0.000117\n213.0\n52.0\n0.000108\n0.000183\n-0.528761\n0.541746\n\n\n46\n(146.96, 149.72]\n776\n0.771907\n0.000343\n599.0\n177.0\n0.000303\n0.000622\n-0.719697\n0.541746\n\n\n47\n(149.72, 152.48]\n783\n0.754789\n0.000346\n591.0\n192.0\n0.000299\n0.000675\n-0.814488\n0.541746\n\n\n48\n(152.48, 155.24]\n270\n0.700000\n0.000119\n189.0\n81.0\n0.000096\n0.000285\n-1.091511\n0.541746\n\n\n49\n(155.24, 158.0]\n161\n0.813665\n0.000071\n131.0\n30.0\n0.000066\n0.000106\n-0.464809\n0.541746\n\n\n\n\n\n\n\n\nplot_by_woe(issue_month_woe, rotation=90)\n\n\n\n\n\n\n\n\n\ndf['diff_from_issuedate_months:17-23'] = np.where(df['diff_from_issuedate_months'].isin(range(17, 24)), 1, 0)\ndf['diff_from_issuedate_months:23-29'] = np.where(df['diff_from_issuedate_months'].isin(range(23, 30)), 1, 0)\ndf['diff_from_issuedate_months:29-34'] = np.where(df['diff_from_issuedate_months'].isin(range(29, 35)), 1, 0)\ndf['diff_from_issuedate_months:34-40'] = np.where(df['diff_from_issuedate_months'].isin(range(34, 41)), 1, 0)\ndf['diff_from_issuedate_months:40-73'] = np.where(df['diff_from_issuedate_months'].isin(range(40, 74)), 1, 0)\ndf['diff_from_issuedate_months:73-84'] = np.where(df['diff_from_issuedate_months'].isin(range(73, 85)), 1, 0)\ndf['diff_from_issuedate_months:84&gt;'] = np.where(df['diff_from_issuedate_months'].isin(range(84,int(df['diff_from_issuedate_months'].max()))), 1, 0)\n\n\n\nInterest Rate\n\ndf['int_rate_categories'] = pd.cut(df['int_rate'], 4)\n\n\nint_woe = get_weight_of_evidence_numeric(data=df, column='int_rate_categories', target= 'good_bad')\nint_woe\n\n\n\n\n\n\n\n\nint_rate_categories\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(5.284, 11.73]\n980184\n0.937920\n0.433582\n919334.0\n60850.0\n0.465174\n0.214001\n0.776429\n0.344584\n\n\n1\n(11.73, 18.15]\n955544\n0.849737\n0.422682\n811961.0\n143583.0\n0.410844\n0.504962\n-0.206270\n0.344584\n\n\n2\n(18.15, 24.57]\n264142\n0.762151\n0.116842\n201316.0\n62826.0\n0.101864\n0.220951\n-0.774302\n0.344584\n\n\n3\n(24.57, 30.99]\n60798\n0.718987\n0.026894\n43713.0\n17085.0\n0.022118\n0.060086\n-0.999364\n0.344584\n\n\n\n\n\n\n\n\nplot_by_woe(int_woe, rotation=90)\n\n\n\n\n\n\n\n\nLooking at the above graph, we can see that as the interest rate is increasing, the chances of default is also increasing.\n\ndf['int_rate:&lt;10'] = np.where(df['int_rate'] &lt;= 10, 1, 0)\ndf['int_rate:10-15'] = np.where((df['int_rate'] &gt; 10) & (df['int_rate'] &lt;= 15), 1, 0)\ndf['int_rate:15-20'] = np.where((df['int_rate'] &gt; 15) & (df['int_rate'] &lt;= 20), 1, 0)\ndf['int_rate:&gt;20'] = np.where(df['int_rate'] &gt; 20, 1, 0)\n\n\n\nFunded Amount\n\ndf['funded_amnt_factor'] = pd.cut(df['funded_amnt'], 25)\n\n\nfunded_woe = get_weight_of_evidence_numeric(data=df, column='funded_amnt_factor', target='good_bad')\nfunded_woe\n\n\n\n\n\n\n\n\nfunded_amnt_factor\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(460.5, 2080.0]\n46118\n0.911943\n0.020400\n42057.0\n4061.0\n0.021280\n0.014282\n0.398788\n0.034517\n\n\n1\n(2080.0, 3660.0]\n91299\n0.898926\n0.040386\n82071.0\n9228.0\n0.041527\n0.032454\n0.246533\n0.034517\n\n\n2\n(3660.0, 5240.0]\n167020\n0.893288\n0.073881\n149197.0\n17823.0\n0.075492\n0.062681\n0.185969\n0.034517\n\n\n3\n(5240.0, 6820.0]\n139704\n0.890891\n0.061798\n124461.0\n15243.0\n0.062976\n0.053608\n0.161063\n0.034517\n\n\n4\n(6820.0, 8400.0]\n180576\n0.883124\n0.079877\n159471.0\n21105.0\n0.080691\n0.074223\n0.083543\n0.034517\n\n\n5\n(8400.0, 9980.0]\n85750\n0.871055\n0.037931\n74693.0\n11057.0\n0.037794\n0.038886\n-0.028486\n0.034517\n\n\n6\n(9980.0, 11560.0]\n264154\n0.880437\n0.116848\n232571.0\n31583.0\n0.117679\n0.111073\n0.057767\n0.034517\n\n\n7\n(11560.0, 13140.0]\n178439\n0.872388\n0.078932\n155668.0\n22771.0\n0.078766\n0.080083\n-0.016571\n0.034517\n\n\n8\n(13140.0, 14720.0]\n80545\n0.849128\n0.035629\n68393.0\n12152.0\n0.034606\n0.042737\n-0.211032\n0.034517\n\n\n9\n(14720.0, 16300.0]\n216969\n0.869585\n0.095976\n188673.0\n28296.0\n0.095467\n0.099513\n-0.041514\n0.034517\n\n\n10\n(16300.0, 17880.0]\n47608\n0.839649\n0.021059\n39974.0\n7634.0\n0.020226\n0.026848\n-0.283192\n0.034517\n\n\n11\n(17880.0, 19460.0]\n86372\n0.848608\n0.038206\n73296.0\n13076.0\n0.037087\n0.045987\n-0.215082\n0.034517\n\n\n12\n(19460.0, 21040.0]\n179284\n0.867038\n0.079306\n155446.0\n23838.0\n0.078654\n0.083835\n-0.063792\n0.034517\n\n\n13\n(21040.0, 22620.0]\n34504\n0.841844\n0.015263\n29047.0\n5457.0\n0.014697\n0.019192\n-0.266793\n0.034517\n\n\n14\n(22620.0, 24200.0]\n77963\n0.854700\n0.034487\n66635.0\n11328.0\n0.033717\n0.039839\n-0.166857\n0.034517\n\n\n15\n(24200.0, 25780.0]\n81303\n0.873301\n0.035964\n71002.0\n10301.0\n0.035926\n0.036227\n-0.008342\n0.034517\n\n\n16\n(25780.0, 27360.0]\n21558\n0.850357\n0.009536\n18332.0\n3226.0\n0.009276\n0.011345\n-0.201404\n0.034517\n\n\n17\n(27360.0, 28940.0]\n41508\n0.860894\n0.018361\n35734.0\n5774.0\n0.018081\n0.020306\n-0.116072\n0.034517\n\n\n18\n(28940.0, 30520.0]\n71297\n0.870387\n0.031538\n62056.0\n9241.0\n0.031400\n0.032499\n-0.034422\n0.034517\n\n\n19\n(30520.0, 32100.0]\n22251\n0.864006\n0.009843\n19225.0\n3026.0\n0.009728\n0.010642\n-0.089839\n0.034517\n\n\n20\n(32100.0, 33680.0]\n9998\n0.840668\n0.004423\n8405.0\n1593.0\n0.004253\n0.005602\n-0.275601\n0.034517\n\n\n21\n(33680.0, 35260.0]\n91898\n0.845426\n0.040651\n77693.0\n14205.0\n0.039312\n0.049957\n-0.239638\n0.034517\n\n\n22\n(35260.0, 36840.0]\n7055\n0.946704\n0.003121\n6679.0\n376.0\n0.003380\n0.001322\n0.938325\n0.034517\n\n\n23\n(36840.0, 38420.0]\n2761\n0.954727\n0.001221\n2636.0\n125.0\n0.001334\n0.000440\n1.109895\n0.034517\n\n\n24\n(38420.0, 40000.0]\n34734\n0.947458\n0.015364\n32909.0\n1825.0\n0.016652\n0.006418\n0.953357\n0.034517\n\n\n\n\n\n\n\n\nplot_by_woe(funded_woe, rotation=90)\n\n\n\n\n\n\n\n\n\ndf['funded_amnt_450-4000'] = np.where((df['funded_amnt'] &gt; 450) & (df['funded_amnt'] &lt;= 4000) , 1, 0)\ndf['funded_amnt_4000-8000'] = np.where((df['funded_amnt'] &gt; 4000) & (df['funded_amnt'] &lt;= 8000) , 1, 0)\ndf['funded_amnt_8000-12000'] = np.where((df['funded_amnt'] &gt; 8000) & (df['funded_amnt'] &lt;= 12000) , 1, 0)\ndf['funded_amnt_12000-16000'] = np.where((df['funded_amnt'] &gt; 12000) & (df['funded_amnt'] &lt;= 16000) , 1, 0)\ndf['funded_amnt_16000-20000'] = np.where((df['funded_amnt'] &gt; 16000) & (df['funded_amnt'] &lt;= 20000) , 1, 0)\ndf['funded_amnt_20000-25000'] = np.where((df['funded_amnt'] &gt; 20000) & (df['funded_amnt'] &lt;= 25000) , 1, 0)\ndf['funded_amnt_25000-30000'] = np.where((df['funded_amnt'] &gt; 25000) & (df['funded_amnt'] &lt;= 30000) , 1, 0)\ndf['funded_amnt_30000-35000'] = np.where((df['funded_amnt'] &gt; 30000) & (df['funded_amnt'] &lt;= 35000) , 1, 0)\ndf['funded_amnt_&gt;35000'] = np.where(df['funded_amnt'] &gt; 35000, 1, 0)\n\n\n\nAnnual Income\n\ndf['annual_inc_factors'] = pd.cut(df['annual_inc'], 100)\n\nannual_woe = get_weight_of_evidence_numeric(df, column='annual_inc_factors', target='good_bad')\nannual_woe\n\n\n\n\n\n\n\n\nannual_inc_factors\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(-110000.0, 1100000.0]\n2260170\n0.874211\n9.997797e-01\n1975865.0\n284305.0\n9.997678e-01\n0.999863\n-0.000095\ninf\n\n\n1\n(1100000.0, 2200000.0]\n306\n0.944444\n1.353582e-04\n289.0\n17.0\n1.462311e-04\n0.000060\n0.894404\ninf\n\n\n2\n(2200000.0, 3300000.0]\n42\n0.857143\n1.857858e-05\n36.0\n6.0\n1.821564e-05\n0.000021\n-0.147050\ninf\n\n\n3\n(3300000.0, 4400000.0]\n38\n0.868421\n1.680919e-05\n33.0\n5.0\n1.669767e-05\n0.000018\n-0.051739\ninf\n\n\n4\n(4400000.0, 5500000.0]\n28\n0.892857\n1.238572e-05\n25.0\n3.0\n1.264975e-05\n0.000011\n0.181454\ninf\n\n\n5\n(5500000.0, 6600000.0]\n29\n0.896552\n1.282807e-05\n26.0\n3.0\n1.315574e-05\n0.000011\n0.220675\ninf\n\n\n6\n(6600000.0, 7700000.0]\n24\n0.958333\n1.061633e-05\n23.0\n1.0\n1.163777e-05\n0.000004\n1.196685\ninf\n\n\n7\n(7700000.0, 8800000.0]\n14\n0.928571\n6.192860e-06\n13.0\n1.0\n6.577869e-06\n0.000004\n0.626140\ninf\n\n\n8\n(8800000.0, 9900000.0]\n13\n0.769231\n5.750513e-06\n10.0\n3.0\n5.059899e-06\n0.000011\n-0.734836\ninf\n\n\n9\n(9900000.0, 11000000.0]\n2\n1.000000\n8.846943e-07\n2.0\n0.0\n1.011980e-06\n0.000000\ninf\ninf\n\n\n10\n(11000000.0, 12100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n11\n(12100000.0, 13200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n12\n(13200000.0, 14300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n13\n(14300000.0, 15400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n14\n(15400000.0, 16500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n15\n(16500000.0, 17600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n16\n(17600000.0, 18700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n17\n(18700000.0, 19800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n18\n(19800000.0, 20900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n19\n(20900000.0, 22000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n20\n(22000000.0, 23100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n21\n(23100000.0, 24200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n22\n(24200000.0, 25300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n23\n(25300000.0, 26400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n24\n(26400000.0, 27500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n25\n(27500000.0, 28600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n26\n(28600000.0, 29700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n27\n(29700000.0, 30800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n28\n(30800000.0, 31900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n29\n(31900000.0, 33000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n30\n(33000000.0, 34100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n31\n(34100000.0, 35200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n32\n(35200000.0, 36300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n33\n(36300000.0, 37400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n34\n(37400000.0, 38500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n35\n(38500000.0, 39600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n36\n(39600000.0, 40700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n37\n(40700000.0, 41800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n38\n(41800000.0, 42900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n39\n(42900000.0, 44000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n40\n(44000000.0, 45100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n41\n(45100000.0, 46200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n42\n(46200000.0, 47300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n43\n(47300000.0, 48400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n44\n(48400000.0, 49500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n45\n(49500000.0, 50600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n46\n(50600000.0, 51700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n47\n(51700000.0, 52800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n48\n(52800000.0, 53900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n49\n(53900000.0, 55000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n50\n(55000000.0, 56100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n51\n(56100000.0, 57200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n52\n(57200000.0, 58300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n53\n(58300000.0, 59400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n54\n(59400000.0, 60500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n55\n(60500000.0, 61600000.0]\n1\n1.000000\n4.423471e-07\n1.0\n0.0\n5.059899e-07\n0.000000\ninf\ninf\n\n\n56\n(61600000.0, 62700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n57\n(62700000.0, 63800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n58\n(63800000.0, 64900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n59\n(64900000.0, 66000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n60\n(66000000.0, 67100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n61\n(67100000.0, 68200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n62\n(68200000.0, 69300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n63\n(69300000.0, 70400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n64\n(70400000.0, 71500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n65\n(71500000.0, 72600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n66\n(72600000.0, 73700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n67\n(73700000.0, 74800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n68\n(74800000.0, 75900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n69\n(75900000.0, 77000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n70\n(77000000.0, 78100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n71\n(78100000.0, 79200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n72\n(79200000.0, 80300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n73\n(80300000.0, 81400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n74\n(81400000.0, 82500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n75\n(82500000.0, 83600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n76\n(83600000.0, 84700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n77\n(84700000.0, 85800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n78\n(85800000.0, 86900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n79\n(86900000.0, 88000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n80\n(88000000.0, 89100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n81\n(89100000.0, 90200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n82\n(90200000.0, 91300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n83\n(91300000.0, 92400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n84\n(92400000.0, 93500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n85\n(93500000.0, 94600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n86\n(94600000.0, 95700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n87\n(95700000.0, 96800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n88\n(96800000.0, 97900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n89\n(97900000.0, 99000000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n90\n(99000000.0, 100100000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n91\n(100100000.0, 101200000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n92\n(101200000.0, 102300000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n93\n(102300000.0, 103400000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n94\n(103400000.0, 104500000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n95\n(104500000.0, 105600000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n96\n(105600000.0, 106700000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n97\n(106700000.0, 107800000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n98\n(107800000.0, 108900000.0]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n99\n(108900000.0, 110000000.0]\n1\n1.000000\n4.423471e-07\n1.0\n0.0\n5.059899e-07\n0.000000\ninf\ninf\n\n\n\n\n\n\n\n\nannual_income_df = df.loc[(df['annual_inc'] &gt; 0) & (df['annual_inc'] &lt;= 200000) , :]\nannual_income_df['annual_inc_factors'] = pd.cut(annual_income_df['annual_inc'], 20)\n\n\nannual_woe = get_weight_of_evidence_numeric(annual_income_df, column='annual_inc_factors', target='good_bad')\nannual_woe\n\n\n\n\n\n\n\n\nannual_inc_factors\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(-199.64, 10000.342]\n4288\n0.889459\n0.001944\n3814.0\n474.0\n0.001981\n0.001693\n0.157076\n0.028924\n\n\n1\n(10000.342, 20000.324]\n36917\n0.852697\n0.016738\n31479.0\n5438.0\n0.016348\n0.019420\n-0.172241\n0.028924\n\n\n2\n(20000.324, 30000.306]\n127934\n0.846593\n0.058004\n108308.0\n19626.0\n0.056247\n0.070089\n-0.220027\n0.028924\n\n\n3\n(30000.306, 40000.288]\n240340\n0.851906\n0.108968\n204747.0\n35593.0\n0.106329\n0.127112\n-0.178525\n0.028924\n\n\n4\n(40000.288, 50000.27]\n303513\n0.857604\n0.137610\n260294.0\n43219.0\n0.135176\n0.154346\n-0.132619\n0.028924\n\n\n5\n(50000.27, 60000.252]\n302831\n0.863716\n0.137300\n261560.0\n41271.0\n0.135833\n0.147389\n-0.081647\n0.028924\n\n\n6\n(60000.252, 70000.234]\n254668\n0.871052\n0.115464\n221829.0\n32839.0\n0.115200\n0.117276\n-0.017861\n0.028924\n\n\n7\n(70000.234, 80000.216]\n228238\n0.877991\n0.103481\n200391.0\n27847.0\n0.104067\n0.099449\n0.045395\n0.028924\n\n\n8\n(80000.216, 90000.198]\n170545\n0.883544\n0.077323\n150684.0\n19861.0\n0.078253\n0.070929\n0.098276\n0.028924\n\n\n9\n(90000.198, 100000.18]\n142579\n0.889837\n0.064644\n126872.0\n15707.0\n0.065887\n0.056094\n0.160922\n0.028924\n\n\n10\n(100000.18, 110000.162]\n95176\n0.897054\n0.043152\n85378.0\n9798.0\n0.044339\n0.034991\n0.236759\n0.028924\n\n\n11\n(110000.162, 120000.144]\n78686\n0.898559\n0.035675\n70704.0\n7982.0\n0.036718\n0.028506\n0.253162\n0.028924\n\n\n12\n(120000.144, 130000.126]\n57853\n0.901751\n0.026230\n52169.0\n5684.0\n0.027092\n0.020299\n0.288683\n0.028924\n\n\n13\n(130000.126, 140000.108]\n39552\n0.908879\n0.017932\n35948.0\n3604.0\n0.018669\n0.012871\n0.371878\n0.028924\n\n\n14\n(140000.108, 150000.09]\n41901\n0.903630\n0.018997\n37863.0\n4038.0\n0.019663\n0.014421\n0.310074\n0.028924\n\n\n15\n(150000.09, 160000.072]\n21772\n0.911216\n0.009871\n19839.0\n1933.0\n0.010303\n0.006903\n0.400426\n0.028924\n\n\n16\n(160000.072, 170000.054]\n16140\n0.915675\n0.007318\n14779.0\n1361.0\n0.007675\n0.004860\n0.456837\n0.028924\n\n\n17\n(170000.054, 180000.036]\n18429\n0.908351\n0.008356\n16740.0\n1689.0\n0.008693\n0.006032\n0.365514\n0.028924\n\n\n18\n(180000.036, 190000.018]\n10064\n0.916534\n0.004563\n9224.0\n840.0\n0.004790\n0.003000\n0.468011\n0.028924\n\n\n19\n(190000.018, 200000.0]\n14183\n0.914687\n0.006430\n12973.0\n1210.0\n0.006737\n0.004321\n0.444099\n0.028924\n\n\n\n\n\n\n\n\nplot_by_woe(annual_woe, rotation=90)\n\n\n\n\n\n\n\n\nAbove graph suggests that higher annual income results in lower chances of default. The first category has extremely low number of observations so we will ignore this category.\n\ndf['annual_inc_&lt;20k'] = np.where(df['annual_inc'] &lt; 20000, 1, 0)\ndf['annual_inc_20k-30k'] = np.where((df['annual_inc'] &gt;= 20000) & (df['annual_inc'] &lt; 30000), 1, 0)\ndf['annual_inc_30k-40k'] = np.where((df['annual_inc'] &gt;= 30000) & (df['annual_inc'] &lt; 40000), 1, 0)\ndf['annual_inc_40k-50k'] = np.where((df['annual_inc'] &gt;= 40000) & (df['annual_inc'] &lt; 50000), 1, 0)\ndf['annual_inc_50k-60k'] = np.where((df['annual_inc'] &gt;= 50000) & (df['annual_inc'] &lt; 60000), 1, 0)\ndf['annual_inc_60k-70k'] = np.where((df['annual_inc'] &gt;= 60000) & (df['annual_inc'] &lt; 70000), 1, 0)\ndf['annual_inc_70k-80k'] = np.where((df['annual_inc'] &gt;= 70000) & (df['annual_inc'] &lt; 80000), 1, 0)\ndf['annual_inc_80k-90k'] = np.where((df['annual_inc'] &gt;= 80000) & (df['annual_inc'] &lt; 90000), 1, 0)\ndf['annual_inc_90k-100k'] = np.where((df['annual_inc'] &gt;= 90000) & (df['annual_inc'] &lt; 100000), 1, 0)\ndf['annual_inc_100k-120k'] = np.where((df['annual_inc'] &gt;= 100000) & (df['annual_inc'] &lt; 120000), 1, 0)\ndf['annual_inc_120k-140k'] = np.where((df['annual_inc'] &gt;= 120000) & (df['annual_inc'] &lt; 140000), 1, 0)\ndf['annual_inc_140k-160k'] = np.where((df['annual_inc'] &gt;= 140000) & (df['annual_inc'] &lt; 160000), 1, 0)\ndf['annual_inc_160k-180k'] = np.where((df['annual_inc'] &gt;= 160000) & (df['annual_inc'] &lt; 180000), 1, 0)\ndf['annual_inc_&gt;180k'] = np.where(df['annual_inc'] &gt;= 180000, 1, 0)\n\n\n\nDTI\nThis column has missing values and skewness related issues. In order to preprocess this column, I will remove the observations with missing values and add all the extreme values in one category.\n\ndti_df = df[pd.notnull(df['dti'])]\ndti_df = df.loc[(df['dti'] &lt; 39), :]\n\n\ndti_df['dti_factors'] = pd.cut(dti_df['dti'], 10)\n\ndti_woe = get_weight_of_evidence_numeric(data=dti_df, column='dti_factors', target='good_bad')\ndti_woe\n\n\n\n\n\n\n\n\ndti_factors\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(-1.04, 2.999]\n49766\n0.902845\n0.022379\n44931.0\n4835.0\n0.023121\n0.017240\n0.293541\n0.044665\n\n\n1\n(2.999, 6.998]\n160085\n0.905563\n0.071989\n144967.0\n15118.0\n0.074599\n0.053904\n0.324915\n0.044665\n\n\n2\n(6.998, 10.997]\n277924\n0.900757\n0.124980\n250342.0\n27582.0\n0.128824\n0.098346\n0.269959\n0.044665\n\n\n3\n(10.997, 14.996]\n367164\n0.891098\n0.165111\n327179.0\n39985.0\n0.168364\n0.142570\n0.166298\n0.044665\n\n\n4\n(14.996, 18.995]\n383464\n0.879352\n0.172441\n337200.0\n46264.0\n0.173521\n0.164958\n0.050607\n0.044665\n\n\n5\n(18.995, 22.994]\n344189\n0.866614\n0.154779\n298279.0\n45910.0\n0.153492\n0.163696\n-0.064359\n0.044665\n\n\n6\n(22.994, 26.993]\n273503\n0.853073\n0.122992\n233318.0\n40185.0\n0.120064\n0.143283\n-0.176797\n0.044665\n\n\n7\n(26.993, 30.992]\n195694\n0.840445\n0.088002\n164470.0\n31224.0\n0.084635\n0.111332\n-0.274164\n0.044665\n\n\n8\n(30.992, 34.991]\n124181\n0.826866\n0.055843\n102681.0\n21500.0\n0.052839\n0.076660\n-0.372131\n0.044665\n\n\n9\n(34.991, 38.99]\n47770\n0.835545\n0.021482\n39914.0\n7856.0\n0.020539\n0.028011\n-0.310256\n0.044665\n\n\n\n\n\n\n\n\nplot_by_woe(dti_woe, rotation=90)\n\n\n\n\n\n\n\n\n\ndf['dti_-1-6.998'] = np.where((df['dti'] &gt; -1) & (df['dti'] &lt;= 6.998), 1, 0)\ndf['dti_6.998-14.996'] = np.where((df['dti'] &gt; 6.998) & (df['dti'] &lt;= 14.996), 1, 0)\ndf['dti_14.996-22.994'] = np.where((df['dti'] &gt; 14.996) & (df['dti'] &lt;= 22.994), 1, 0)\ndf['dti_22.994-30.992'] = np.where((df['dti'] &gt; 22.994) & (df['dti'] &lt;= 30.992), 1, 0)\ndf['dti_30.992-38.99'] = np.where((df['dti'] &gt; 30.992) & (df['dti'] &lt;= 38.99), 1, 0)\ndf['dti_39.99&gt;'] = np.where(df['dti'] &gt; 39.99, 1, 0)\n\n\n\nTotal Acc\n\ndf['total_acc_category'] = pd.cut(df['total_acc'], 50)\n\ntotal_acc_woe = get_weight_of_evidence_numeric(df,'total_acc_category', 'good_bad')\ntotal_acc_woe\n\n\n\n\n\n\n\n\ntotal_acc_category\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n(-0.176, 3.52]\n5627\n0.905278\n2.489087e-03\n5094.0\n533.0\n2.577513e-03\n0.001874\n0.318488\ninf\n\n\n1\n(3.52, 7.04]\n82183\n0.887957\n3.635341e-02\n72975.0\n9208.0\n3.692461e-02\n0.032383\n0.131235\ninf\n\n\n2\n(7.04, 10.56]\n138704\n0.881582\n6.135532e-02\n122279.0\n16425.0\n6.187194e-02\n0.057765\n0.068692\ninf\n\n\n3\n(10.56, 14.08]\n269744\n0.877736\n1.193205e-01\n236764.0\n32980.0\n1.198002e-01\n0.115986\n0.032353\ninf\n\n\n4\n(14.08, 17.6]\n238179\n0.875946\n1.053578e-01\n208632.0\n29547.0\n1.055657e-01\n0.103913\n0.015781\ninf\n\n\n5\n(17.6, 21.12]\n327683\n0.875425\n1.449496e-01\n286862.0\n40821.0\n1.451493e-01\n0.143562\n0.010996\ninf\n\n\n6\n(21.12, 24.64]\n232459\n0.873969\n1.028276e-01\n203162.0\n29297.0\n1.027979e-01\n0.103034\n-0.002290\ninf\n\n\n7\n(24.64, 28.16]\n268652\n0.872977\n1.188374e-01\n234527.0\n34125.0\n1.186683e-01\n0.120013\n-0.011269\ninf\n\n\n8\n(28.16, 31.68]\n164834\n0.871641\n7.291385e-02\n143676.0\n21158.0\n7.269861e-02\n0.074410\n-0.023266\ninf\n\n\n9\n(31.68, 35.2]\n170863\n0.871371\n7.558076e-02\n148885.0\n21978.0\n7.533431e-02\n0.077294\n-0.025677\ninf\n\n\n10\n(35.2, 38.72]\n95441\n0.869239\n4.221805e-02\n82961.0\n12480.0\n4.197743e-02\n0.043890\n-0.044566\ninf\n\n\n11\n(38.72, 42.24]\n92609\n0.867939\n4.096533e-02\n80379.0\n12230.0\n4.067096e-02\n0.043011\n-0.055948\ninf\n\n\n12\n(42.24, 45.76]\n49144\n0.865884\n2.173871e-02\n42553.0\n6591.0\n2.153139e-02\n0.023180\n-0.073764\ninf\n\n\n13\n(45.76, 49.28]\n45609\n0.866364\n2.017501e-02\n39514.0\n6095.0\n1.999369e-02\n0.021435\n-0.069623\ninf\n\n\n14\n(49.28, 52.8]\n23166\n0.863982\n1.024741e-02\n20015.0\n3151.0\n1.012739e-02\n0.011082\n-0.090047\ninf\n\n\n15\n(52.8, 56.32]\n20655\n0.866086\n9.136680e-03\n17889.0\n2766.0\n9.051653e-03\n0.009728\n-0.072025\ninf\n\n\n16\n(56.32, 59.84]\n10345\n0.857322\n4.576081e-03\n8869.0\n1476.0\n4.487624e-03\n0.005191\n-0.145583\ninf\n\n\n17\n(59.84, 63.36]\n10702\n0.855074\n4.733999e-03\n9151.0\n1551.0\n4.630314e-03\n0.005455\n-0.163846\ninf\n\n\n18\n(63.36, 66.88]\n4123\n0.861024\n1.823797e-03\n3550.0\n573.0\n1.796264e-03\n0.002015\n-0.114992\ninf\n\n\n19\n(66.88, 70.4]\n3606\n0.866334\n1.595104e-03\n3124.0\n482.0\n1.580712e-03\n0.001695\n-0.069884\ninf\n\n\n20\n(70.4, 73.92]\n1722\n0.870499\n7.617218e-04\n1499.0\n223.0\n7.584789e-04\n0.000784\n-0.033427\ninf\n\n\n21\n(73.92, 77.44]\n1616\n0.852723\n7.148330e-04\n1378.0\n238.0\n6.972541e-04\n0.000837\n-0.182691\ninf\n\n\n22\n(77.44, 80.96]\n780\n0.851282\n3.450308e-04\n664.0\n116.0\n3.359773e-04\n0.000408\n-0.194117\ninf\n\n\n23\n(80.96, 84.48]\n711\n0.860759\n3.145088e-04\n612.0\n99.0\n3.096658e-04\n0.000348\n-0.117197\ninf\n\n\n24\n(84.48, 88.0]\n506\n0.883399\n2.238276e-04\n447.0\n59.0\n2.261775e-04\n0.000207\n0.086212\ninf\n\n\n25\n(88.0, 91.52]\n298\n0.872483\n1.318194e-04\n260.0\n38.0\n1.315574e-04\n0.000134\n-0.015714\ninf\n\n\n26\n(91.52, 95.04]\n245\n0.840816\n1.083750e-04\n206.0\n39.0\n1.042339e-04\n0.000137\n-0.274495\ninf\n\n\n27\n(95.04, 98.56]\n119\n0.806723\n5.263931e-05\n96.0\n23.0\n4.857503e-05\n0.000081\n-0.509955\ninf\n\n\n28\n(98.56, 102.08]\n106\n0.877358\n4.688880e-05\n93.0\n13.0\n4.705706e-05\n0.000046\n0.028841\ninf\n\n\n29\n(102.08, 105.6]\n47\n0.936170\n2.079032e-05\n44.0\n3.0\n2.226356e-05\n0.000011\n0.746768\ninf\n\n\n30\n(105.6, 109.12]\n57\n0.877193\n2.521379e-05\n50.0\n7.0\n2.529950e-05\n0.000025\n0.027304\ninf\n\n\n31\n(109.12, 112.64]\n27\n0.814815\n1.194337e-05\n22.0\n5.0\n1.113178e-05\n0.000018\n-0.457205\ninf\n\n\n32\n(112.64, 116.16]\n27\n0.888889\n1.194337e-05\n24.0\n3.0\n1.214376e-05\n0.000011\n0.140632\ninf\n\n\n33\n(116.16, 119.68]\n16\n0.812500\n7.077554e-06\n13.0\n3.0\n6.577869e-06\n0.000011\n-0.472472\ninf\n\n\n34\n(119.68, 123.2]\n15\n0.933333\n6.635207e-06\n14.0\n1.0\n7.083859e-06\n0.000004\n0.700248\ninf\n\n\n35\n(123.2, 126.72]\n7\n0.857143\n3.096430e-06\n6.0\n1.0\n3.035939e-06\n0.000004\n-0.147050\ninf\n\n\n36\n(126.72, 130.24]\n6\n1.000000\n2.654083e-06\n6.0\n0.0\n3.035939e-06\n0.000000\ninf\ninf\n\n\n37\n(130.24, 133.76]\n5\n1.000000\n2.211736e-06\n5.0\n0.0\n2.529950e-06\n0.000000\ninf\ninf\n\n\n38\n(133.76, 137.28]\n5\n0.800000\n2.211736e-06\n4.0\n1.0\n2.023960e-06\n0.000004\n-0.552515\ninf\n\n\n39\n(137.28, 140.8]\n4\n1.000000\n1.769389e-06\n4.0\n0.0\n2.023960e-06\n0.000000\ninf\ninf\n\n\n40\n(140.8, 144.32]\n3\n0.666667\n1.327041e-06\n2.0\n1.0\n1.011980e-06\n0.000004\n-1.245662\ninf\n\n\n41\n(144.32, 147.84]\n3\n1.000000\n1.327041e-06\n3.0\n0.0\n1.517970e-06\n0.000000\ninf\ninf\n\n\n42\n(147.84, 151.36]\n5\n0.800000\n2.211736e-06\n4.0\n1.0\n2.023960e-06\n0.000004\n-0.552515\ninf\n\n\n43\n(151.36, 154.88]\n1\n1.000000\n4.423471e-07\n1.0\n0.0\n5.059899e-07\n0.000000\ninf\ninf\n\n\n44\n(154.88, 158.4]\n2\n1.000000\n8.846943e-07\n2.0\n0.0\n1.011980e-06\n0.000000\ninf\ninf\n\n\n45\n(158.4, 161.92]\n2\n1.000000\n8.846943e-07\n2.0\n0.0\n1.011980e-06\n0.000000\ninf\ninf\n\n\n46\n(161.92, 165.44]\n2\n1.000000\n8.846943e-07\n2.0\n0.0\n1.011980e-06\n0.000000\ninf\ninf\n\n\n47\n(165.44, 168.96]\n0\nNaN\n0.000000e+00\nNaN\nNaN\nNaN\nNaN\nNaN\ninf\n\n\n48\n(168.96, 172.48]\n1\n0.000000\n4.423471e-07\n0.0\n1.0\n0.000000e+00\n0.000004\n-inf\ninf\n\n\n49\n(172.48, 176.0]\n2\n0.000000\n8.846943e-07\n0.0\n2.0\n0.000000e+00\n0.000007\n-inf\ninf\n\n\n\n\n\n\n\n\nplot_by_woe(total_acc_woe, rotation=90)\n\n\n\n\n\n\n\n\n\ndf['total_acc_-0.176-7.04'] = np.where((df['total_acc'] &gt; -0.2) & (df['total_acc'] &lt;= 7.04), 1, 0)\ndf['total_acc_7.04-14.08'] = np.where((df['total_acc'] &gt; 7.04) & (df['total_acc'] &lt;= 14.08), 1, 0)\ndf['total_acc_14.08-21.12'] = np.where((df['total_acc'] &gt; 14.08) & (df['total_acc'] &lt;= 21.12), 1, 0)\ndf['total_acc_21.12-24.64'] = np.where((df['total_acc'] &gt; 21.12) & (df['total_acc'] &lt;= 24.64), 1, 0)\ndf['total_acc_24.64-28.16'] = np.where((df['total_acc'] &gt; 24.64) & (df['total_acc'] &lt;= 28.16), 1, 0)\ndf['total_acc_28.16-35.2'] = np.where((df['total_acc'] &gt; 28.16) & (df['total_acc'] &lt;= 35.2), 1, 0)\ndf['total_acc_35.2-42.24'] = np.where((df['total_acc'] &gt; 35.2) & (df['total_acc'] &lt;= 42.24), 1, 0)\ndf['total_acc_42.24-49.28'] = np.where((df['total_acc'] &gt; 42.24) & (df['total_acc'] &lt;= 49.28), 1, 0)\ndf['total_acc_49.28-56.32'] = np.where((df['total_acc'] &gt; 49.28) & (df['total_acc'] &lt;= 56.32), 1, 0)\ndf['total_acc_56.32-66.88'] = np.where((df['total_acc'] &gt; 56.32) & (df['total_acc'] &lt;= 66.88), 1, 0)\ndf['total_acc_66.88&gt;'] = np.where(df['total_acc'] &gt; 66.88, 1, 0)\n\n\n\nAccount now Delinq\n\ndf['acc_now_delinq_category'] = pd.cut(df['acc_now_delinq'], 5)\nacc_delinq_woe = get_weight_of_evidence_numeric(df, 'acc_now_delinq', 'good_bad')\nacc_delinq_woe\n\n\n\n\n\n\n\n\nacc_now_delinq\nnumber_of_obs\nprop_good\npercentage_of_total\nnumber_of_good\nnumber_of_bad\nprop_n_good\nprop_n_bad\nweight_of_evidence\ninformation_value\n\n\n\n\n0\n0.0\n2251886\n0.874385\n9.961153e-01\n1969016.0\n282870.0\n9.963022e-01\n0.994816\n0.001493\ninf\n\n\n1\n1.0\n8293\n0.833353\n3.668385e-03\n6911.0\n1382.0\n3.496896e-03\n0.004860\n-0.329226\ninf\n\n\n2\n2.0\n421\n0.819477\n1.862281e-04\n345.0\n76.0\n1.745665e-04\n0.000267\n-0.425998\ninf\n\n\n3\n3.0\n50\n0.760000\n2.211736e-05\n38.0\n12.0\n1.922762e-05\n0.000042\n-0.786130\ninf\n\n\n4\n4.0\n11\n0.818182\n4.865818e-06\n9.0\n2.0\n4.553909e-06\n0.000007\n-0.434732\ninf\n\n\n5\n5.0\n3\n0.666667\n1.327041e-06\n2.0\n1.0\n1.011980e-06\n0.000004\n-1.245662\ninf\n\n\n6\n6.0\n2\n0.500000\n8.846943e-07\n1.0\n1.0\n5.059899e-07\n0.000004\n-1.938809\ninf\n\n\n7\n7.0\n1\n1.000000\n4.423471e-07\n1.0\n0.0\n5.059899e-07\n0.000000\ninf\ninf\n\n\n8\n14.0\n1\n1.000000\n4.423471e-07\n1.0\n0.0\n5.059899e-07\n0.000000\ninf\ninf\n\n\n\n\n\n\n\n\ndf['acc_now_delinq_0.0'] = np.where(df['acc_now_delinq'] == 0.0, 1, 0)"
  }
]